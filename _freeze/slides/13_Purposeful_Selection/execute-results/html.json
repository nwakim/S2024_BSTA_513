{
  "hash": "e620f9aaa1f3b494a1a8aa3c6c257ef2",
  "result": {
    "markdown": "---\ntitle: \"Lesson 13: Purposeful model selection\"\nauthor: \"Nicky Wakim\"\ntitle-slide-attributes:\n    data-background-color: \"#213c96\"\ndate: \"03/4/2024\"\ncategories: [\"Week 9\"]\nformat: \n  revealjs:\n    theme: [default, simple_NW.scss]\n    chalkboard: true\n    slide-number: true\n    show-slide-number: all\n    width: 1955\n    height: 1100\n    footer: Purposeful Selection\n    html-math-method: mathjax\n    highlight-style: ayu\nexecute:\n  freeze: auto  # re-render only when source changes\n---\n\n\n\n\n# Learning Objectives\n\n1.    Understand the overall steps for purposeful selection as a model building strategy\n\n2.    Apply purposeful selection to a dataset using R\n\n3.    Connect purposeful selection steps back to tests of coefficients in Class 8 \n\n4.    Use different approaches to assess the linear scale of continuous variables in\nlogistic regression\n\n\n# Learning Objectives\n\n::: lob\n1.    Understand the overall steps for purposeful selection as a model building strategy\n:::\n\n2.    Apply purposeful selection to a dataset using R\n\n3.    Connect purposeful selection steps back to tests of coefficients in Class 8 \n\n4.    Use different approaches to assess the linear scale of continuous variables in\nlogistic regression\n\n## \n\n \n\n \n\n::: columns\n::: {.column width=\"20%\"}\n:::\n\n::: {.column width=\"60%\"}\n::: qt\n[ \"Successful modeling of a complex data set is [**part science**]{style=\"color:#FF8021;\"}, [**part statistical methods**]{style=\"color:#34AC8B;\"}, and [**part experience and common sense**]{style=\"color:#4FADF3;\"}.\" ]{style=\"font-size:60px;\"}\n:::\n\n \n\n::: qt-t\nHosmer, Lemeshow, and Sturdivant Textbook, pg. 101\n:::\n:::\n:::\n\n## Overall Process\n\n0.  Exploratory data analysis\n\n1.  Check unadjusted associations in simple linear regression\n\n2.  Enter all covariates in model that meet some threshold\n\n    -   [One textbook](https://onlinelibrary.wiley.com/doi/book/10.1002/9781118548387) suggest $p<0.2$ or $p<0.25$: great for modest sized datasets\n    -   PLEASE keep in mind sample size in your study\n    -   Can also use magnitude of association rather than, or along with, p-value\n\n3.  Remove those that no longer reach some threshold\n\n    -   Compare magnitude of associations to unadjusted version (univariable)\n\n4.  Check scaling of continuous and coding of categorical covariates\n\n5.  Finalize main effect model\n\n6.  Check for interactions\n\n7.  Assess model fit\n\n    -   Model assumptions, diagnostics, overall fit\n\n## Process with snappier step names\n\n::: columns\n::: {.column width=\"10%\"}\n**Pre-step:**\n\n \n\n**Step 1:**\n\n \n\n**Step 2:**\n\n \n\n**Step 3:**\n\n \n\n**Step 4:**\n\n \n\n**Step 5:**\n\n \n\n**Step 6:**\n\n \n\n**Step 7:**\n:::\n\n::: {.column width=\"50%\"}\nExploratory data analysis (EDA)\n\n \n\nSimple linear regressions\n\n \n\nPreliminary variable selection\n\n \n\nAssess change in coefficients\n\n \n\nAssess scale for continuous variables\n\n \n\nFinalize main effect model\n\n \n\nCheck for interactions\n\n \n\nAssess model fit\n:::\n:::\n\n# Learning Objectives\n\n1.    Understand the overall steps for purposeful selection as a model building strategy\n\n::: lob\n2.    Apply purposeful selection to a dataset using R\n:::\n\n3.    Connect purposeful selection steps back to tests of coefficients in Class 8 \n\n4.    Use different approaches to assess the linear scale of continuous variables in\nlogistic regression\n\n## Pre-step: Exploratory data analysis\n\n-   Things we have been doing over the quarter in class and in our project \n-   I will not discuss some of the methods mentioned in our lab and data management class\n\n    -   I am only going to introduce additional exploratory functions\n\n \n\nA few things we can do: \n\n-   Check the data\n-   Study your variables\n-   Missing data?\n-   Explore simple relationships and assumptions\n\n## Pre-step: Exploratory data analysis: Check the data\n\n::: columns\n::: {.column width=\"50%\"}\n-   Get to know the potential values for the data\n\n    -   Categories\n\n    -   Units\n\n-   Then make sure the summary of values makes sense\n\n    -   If minimum or maximum look outside appropriate range\n    -   For example: a negative value for a measurement that is inherently positive (like population or income)\n:::\n\n::: {.column width=\"50%\"}\n[![https://www.gapminder.org/data/documentation/](13_Purposeful_selection/Gapminder_doc.png){fig-align=\"center\"}](https://www.gapminder.org/data/documentation/)\n:::\n:::\n\n## Pre-step: Exploratory data analysis: Check the data\n\n::: columns\n::: {.column width=\"25%\"}\n-   Look at a summary for the raw data\n\n-   Typical use:\n\n::: {.cell}\n\n```{.r .cell-code}\nlibrary(skimr)\nskim(gapm)\n```\n:::\n\n\n-   [Some `skim()` help](https://cran.r-project.org/web/packages/skimr/vignettes/skimr.html)\n:::\n\n::: {.column width=\"1%\"}\n:::\n\n::: {.column width=\"74%\"}\n:::\n:::\n\n## Pre-step: Exploratory data analysis: Check the data\n\n::: columns\n::: {.column width=\"25%\"}\n-   Look at a summary for the raw data\n\n-   Typical use:\n\n::: {.cell}\n\n```{.r .cell-code}\nlibrary(skimr)\nskim(gapm)\n```\n:::\n\n\n-   [Some `skim()` help](https://cran.r-project.org/web/packages/skimr/vignettes/skimr.html)\n\n-   Note that `skim(gapm)` looks different because I had to create factors\n-   I am breaking down the `skim()` function into the categorical and continuous variables only because I want to show them on the slides\n:::\n\n::: {.column width=\"1%\"}\n:::\n\n::: {.column width=\"74%\"}\n\n::: {.cell}\n\n```{.r .cell-code}\nskim(gapm_sub1) %>% yank(\"factor\")\n```\n\n::: {.cell-output-display}\n**Variable type: factor**\n\n|skim_variable  | n_missing| complete_rate|ordered | n_unique|top_counts                         |\n|:--------------|---------:|-------------:|:-------|--------:|:----------------------------------|\n|four_regions   |         0|          1.00|FALSE   |        4|Asi: 57, Afr: 54, Eur: 49, Ame: 35 |\n|income_levels1 |         1|          0.99|FALSE   |        4|Hig: 56, Upp: 55, Low: 52, Low: 31 |\n|income_levels2 |         1|          0.99|FALSE   |        2|Hig: 111, Low: 83                  |\n:::\n:::\n\n:::\n:::\n\n## Pre-step: Exploratory data analysis: Check the data {.smaller}\n\n\n::: {.cell skimr_digits='2'}\n\n```{.r .cell-code}\nskim(gapm_sub1) %>% yank(\"numeric\")\n```\n\n::: {.cell-output-display}\n**Variable type: numeric**\n\n|skim_variable      | n_missing| complete_rate|     mean|       sd|      p0|     p25|      p50|      p75|      p100|hist  |\n|:------------------|---------:|-------------:|--------:|--------:|-------:|-------:|--------:|--------:|---------:|:-----|\n|CO2emissions       |         4|          0.98|     4.55|     6.10|    0.03|    0.64|     2.41|     6.22|     41.20|▇▁▁▁▁ |\n|ElectricityUsePP   |        58|          0.70|  4220.92|  5964.07|   31.10|  699.00|  2410.00|  5600.00|  52400.00|▇▁▁▁▁ |\n|FoodSupplykcPPD    |        27|          0.86|  2825.06|   443.59| 1910.00| 2490.00|  2775.00|  3172.50|   3740.00|▅▇▇▇▅ |\n|IncomePP           |         2|          0.99| 16704.45| 19098.61|  614.00| 3370.00| 10100.00| 22700.00| 129000.00|▇▂▁▁▁ |\n|LifeExpectancyYrs  |         8|          0.96|    70.66|     8.44|   47.50|   64.30|    72.70|    76.90|     82.90|▁▃▃▇▇ |\n|FemaleLiteracyRate |       115|          0.41|    81.65|    21.95|   13.00|   70.97|    91.60|    98.03|     99.80|▁▁▂▁▇ |\n|WaterSourcePrct    |         1|          0.99|    84.84|    18.64|   18.30|   74.90|    93.50|    99.07|    100.00|▁▁▂▂▇ |\n|Latitude           |         0|          1.00|    19.11|    23.93|  -42.00|    4.00|    17.33|    40.00|     65.00|▁▃▇▆▅ |\n|Longitude          |         0|          1.00|    21.98|    66.52| -175.00|   -5.75|    21.00|    49.27|    179.14|▁▃▇▃▂ |\n|population_mill    |         0|          1.00|    35.95|   136.87|    0.00|    1.73|     7.57|    24.50|   1370.00|▇▁▁▁▁ |\n:::\n:::\n\n\n## Poll Everywhere Question 1\n\n## Pre-step: Exploratory data analysis: Study your variables\n\n-   Started this a little bit in previous slide (`skim()`), but you may want to look at things like:\n\n    -   Sample size\n    -   Counts of missing data\n    -   Means and standard deviations\n    -   IQRs\n    -   Medians\n    -   Minimums and maximums\n\n-   Can also look at visuals\n    -   Continuous variables: histograms (in `skimr() a little)\n    -   Categorical variables: frequency plots\n\n## Pre-step: Exploratory data analysis: Study your variables {.smaller}\n\n\n::: {.cell}\n\n```{.r .cell-code}\nlibrary(Hmisc)\nhist.data.frame(gapm %>% select(-Longitude, -Latitude, -eight_regions, -six_regions, -geo, -`World bank, 4 income groups 2017`, -country, -population, -`World bank region`, -ElectricityUsePP))\n```\n\n::: {.cell-output-display}\n![](13_Purposeful_Selection_files/figure-revealjs/unnamed-chunk-6-1.png){width=960}\n:::\n:::\n\n\n## Poll Everywhere Question 2\n\n## Pre-step: Exploratory data analysis: Missing data\n\n-   Why are there missing data?\n-   Which variables and observations should be excluded because of missing data?\n-   Will I impute missing data?\n\n \n\n-   Unfortunately, we don’t have time to discuss missing data more thoroughly  \n-   I will try to cover this topic more thoroughly in BSTA 513\n\n \n\n-   For the Gapminder dataset, we chose to use complete cases\n\n## Pre-step / Step 1 : Explore simple relationships and assumptions {.smaller}\n\n\n::: {.cell layout-align=\"center\"}\n\n```{.r .cell-code}\ngapm2 %>% ggpairs() # gapm2 is a new dataset with some variables selected\n```\n\n::: {.cell-output-display}\n![](13_Purposeful_Selection_files/figure-revealjs/unnamed-chunk-7-1.png){fig-align='center' width=960}\n:::\n:::\n\n\n## Poll Everywhere Question 3\n\n# End of 3/4 class\n\n## Step 1: Simple linear regressions\n\n## Step 2: Preliminary variable selection\n\n## Step 3: Assess change in coefficients\n\n## Step 4: Assess scale for continuous variables\n\n## Step 5: Finalize main effect model\n\n## Step 6: Check for interactions\n\n## Step 7: Assess model fit\n",
    "supporting": [
      "13_Purposeful_Selection_files"
    ],
    "filters": [
      "rmarkdown/pagebreak.lua"
    ],
    "includes": {
      "include-after-body": [
        "\n<script>\n  // htmlwidgets need to know to resize themselves when slides are shown/hidden.\n  // Fire the \"slideenter\" event (handled by htmlwidgets.js) when the current\n  // slide changes (different for each slide format).\n  (function () {\n    // dispatch for htmlwidgets\n    function fireSlideEnter() {\n      const event = window.document.createEvent(\"Event\");\n      event.initEvent(\"slideenter\", true, true);\n      window.document.dispatchEvent(event);\n    }\n\n    function fireSlideChanged(previousSlide, currentSlide) {\n      fireSlideEnter();\n\n      // dispatch for shiny\n      if (window.jQuery) {\n        if (previousSlide) {\n          window.jQuery(previousSlide).trigger(\"hidden\");\n        }\n        if (currentSlide) {\n          window.jQuery(currentSlide).trigger(\"shown\");\n        }\n      }\n    }\n\n    // hookup for slidy\n    if (window.w3c_slidy) {\n      window.w3c_slidy.add_observer(function (slide_num) {\n        // slide_num starts at position 1\n        fireSlideChanged(null, w3c_slidy.slides[slide_num - 1]);\n      });\n    }\n\n  })();\n</script>\n\n"
      ]
    },
    "engineDependencies": {},
    "preserve": {},
    "postProcess": true
  }
}