{
  "hash": "280b261c46bbef537f385f821a8e6e75",
  "result": {
    "markdown": "---\ntitle: \"Lesson 13: Purposeful model selection\"\nauthor: \"Nicky Wakim\"\ntitle-slide-attributes:\n    data-background-color: \"#213c96\"\ndate: \"03/4/2024\"\ncategories: [\"Week 9\"]\nformat: \n  revealjs:\n    theme: [default, simple_NW.scss]\n    chalkboard: true\n    slide-number: true\n    show-slide-number: all\n    width: 1955\n    height: 1100\n    footer: Purposeful Selection\n    html-math-method: mathjax\n    highlight-style: ayu\nexecute:\n  freeze: auto  # re-render only when source changes\n---\n\n\n\n\n# Learning Objectives\n\n1.  Understand the overall steps for purposeful selection as a model building strategy\n\n2.  Apply purposeful selection to a dataset using R\n\n3.  Use different approaches to assess the linear scale of continuous variables in logistic regression\n\n## Regression analysis process\n\n::: box\n![](images/arrow2.png){.absolute top=\"13.5%\" right=\"62.1%\" width=\"155\"} ![](images/arrow2.png){.absolute top=\"13.5%\" right=\"28.4%\" width=\"155\"}![](images/arrow_back4.png){.absolute top=\"7.5%\" right=\"30.5%\" width=\"820\"} ![](images/arrow_down.png){.absolute top=\"60.5%\" right=\"48%\" width=\"85\"}\n\n::: columns\n::: {.column width=\"30%\"}\n::: RAP1\n::: RAP1-title\nModel Selection\n:::\n\n::: RAP1-cont\n-   Building a model\n\n-   Selecting variables\n\n-   Prediction vs interpretation\n\n-   Comparing potential models\n:::\n:::\n:::\n\n::: {.column width=\"4%\"}\n:::\n\n::: {.column width=\"30%\"}\n::: RAP2\n::: RAP2-title\nModel Fitting\n:::\n\n::: RAP2-cont\n-   Find best fit line\n\n-   Using OLS in this class\n\n-   Parameter estimation\n\n-   Categorical covariates\n\n-   Interactions\n:::\n:::\n:::\n\n::: {.column width=\"4%\"}\n:::\n\n::: {.column width=\"30%\"}\n::: RAP3\n::: RAP3-title\nModel Evaluation\n:::\n\n::: RAP3-cont\n-   Evaluation of model fit\n-   Testing model assumptions\n-   Residuals\n-   Transformations\n-   Influential points\n-   Multicollinearity\n:::\n:::\n:::\n:::\n:::\n\n::: RAP4\n::: RAP4-title\nModel Use (Inference)\n:::\n\n::: RAP4-cont\n::: columns\n::: {.column width=\"50%\"}\n-   Inference for coefficients\n-   Hypothesis testing for coefficients\n:::\n\n::: {.column width=\"50%\"}\n-   Inference for expected $Y$ given $X$\n-   Prediction of new $Y$ given $X$\n:::\n:::\n:::\n:::\n\n# Learning Objectives\n\n::: lob\n1.  Understand the overall steps for purposeful selection as a model building strategy\n:::\n\n2.  Apply purposeful selection to a dataset using R\n\n3.  Use different approaches to assess the linear scale of continuous variables in logistic regression\n\n## \n\n \n\n \n\n::: columns\n::: {.column width=\"20%\"}\n:::\n\n::: {.column width=\"60%\"}\n::: qt\n[\"Successful modeling of a complex data set is [**part science**]{style=\"color:#FF8021;\"}, [**part statistical methods**]{style=\"color:#34AC8B;\"}, and [**part experience and common sense**]{style=\"color:#4FADF3;\"}.\"]{style=\"font-size:60px;\"}\n:::\n\n \n\n::: qt-t\nHosmer, Lemeshow, and Sturdivant Textbook, pg. 101\n:::\n:::\n:::\n\n## Overall Process\n\n0.  Exploratory data analysis\n\n1.  Check unadjusted associations in simple linear regression\n\n2.  Enter all covariates in model that meet some threshold\n\n    -   [One textbook](https://onlinelibrary.wiley.com/doi/book/10.1002/9781118548387) suggest $p<0.2$ or $p<0.25$: great for modest sized datasets\n    -   PLEASE keep in mind sample size in your study\n    -   Can also use magnitude of association rather than, or along with, p-value\n\n3.  Remove those that no longer reach some threshold\n\n    -   Compare magnitude of associations to unadjusted version (univariable)\n\n4.  Check scaling of continuous and coding of categorical covariates\n\n5.  Check for interactions\n\n6.  Assess model fit\n\n    -   Model assumptions, diagnostics, overall fit\n\n## Process with snappier step names\n\n::: columns\n::: {.column width=\"10%\"}\n**Pre-step:**\n\n \n\n**Step 1:**\n\n \n\n**Step 2:**\n\n \n\n**Step 3:**\n\n \n\n**Step 4:**\n\n \n\n**Step 5:**\n\n \n\n**Step 6:**\n:::\n\n::: {.column width=\"50%\"}\nExploratory data analysis (EDA)\n\n \n\nSimple linear regressions / analysis\n\n \n\nPreliminary variable selection\n\n \n\nAssess change in coefficients\n\n \n\nAssess scale for continuous variables\n\n \n\nCheck for interactions\n\n \n\nAssess model fit\n:::\n:::\n\n# Learning Objectives\n\n1.  Understand the overall steps for purposeful selection as a model building strategy\n\n::: lob\n2.  Apply purposeful selection to a dataset using R\n:::\n\n3.  Use different approaches to assess the linear scale of continuous variables in logistic regression\n\n## Pre-step: Exploratory data analysis\n\n-   Things we have been doing over the quarter in class and in our project\n\n-   I will not discuss some of the methods mentioned in our lab and data management class\n\n    -   I am only going to introduce additional exploratory functions\n\n \n\nA few things we can do:\n\n-   Check the data\n-   Study your variables\n-   Missing data?\n-   Explore simple relationships and assumptions\n\n## Pre-step: Exploratory data analysis: Check the data\n\n::: columns\n::: {.column width=\"50%\"}\n-   Get to know the potential values for the data\n\n    -   Categories\n\n    -   Units\n\n-   Then make sure the summary of values makes sense\n\n    -   If minimum or maximum look outside appropriate range\n    -   For example: a negative value for a measurement that is inherently positive (like population or income)\n:::\n\n::: {.column width=\"50%\"}\n[![https://www.gapminder.org/data/documentation/](13_Purposeful_selection/Gapminder_doc.png){fig-align=\"center\"}](https://www.gapminder.org/data/documentation/)\n:::\n:::\n\n## Pre-step: Exploratory data analysis: Check the data\n\n::: columns\n::: {.column width=\"25%\"}\n-   Look at a summary for the raw data\n\n-   Typical use:\n\n\n::: {.cell}\n\n```{.r .cell-code}\nlibrary(skimr)\nskim(gapm)\n```\n:::\n\n\n-   [Some `skim()` help](https://cran.r-project.org/web/packages/skimr/vignettes/skimr.html)\n:::\n\n::: {.column width=\"1%\"}\n:::\n\n::: {.column width=\"74%\"}\n:::\n:::\n\n## Pre-step: Exploratory data analysis: Check the data\n\n::: columns\n::: {.column width=\"25%\"}\n-   Look at a summary for the raw data\n\n-   Typical use:\n\n\n::: {.cell}\n\n```{.r .cell-code}\nlibrary(skimr)\nskim(gapm)\n```\n:::\n\n\n-   [Some `skim()` help](https://cran.r-project.org/web/packages/skimr/vignettes/skimr.html)\n\n-   Note that `skim(gapm)` looks different because I had to create factors\n\n-   I am breaking down the `skim()` function into the categorical and continuous variables only because I want to show them on the slides\n:::\n\n::: {.column width=\"1%\"}\n:::\n\n::: {.column width=\"74%\"}\n\n::: {.cell}\n\n```{.r .cell-code}\nskim(gapm_sub1) %>% yank(\"factor\")\n```\n\n::: {.cell-output-display}\n**Variable type: factor**\n\n|skim_variable  | n_missing| complete_rate|ordered | n_unique|top_counts                         |\n|:--------------|---------:|-------------:|:-------|--------:|:----------------------------------|\n|four_regions   |         0|          1.00|FALSE   |        4|Asi: 57, Afr: 54, Eur: 49, Ame: 35 |\n|income_levels1 |         1|          0.99|FALSE   |        4|Hig: 56, Upp: 55, Low: 52, Low: 31 |\n|income_levels2 |         1|          0.99|FALSE   |        2|Hig: 111, Low: 83                  |\n:::\n:::\n\n:::\n:::\n\n## Pre-step: Exploratory data analysis: Check the data {.smaller}\n\n\n::: {.cell skimr_digits='2'}\n\n```{.r .cell-code}\nskim(gapm_sub1) %>% yank(\"numeric\")\n```\n\n::: {.cell-output-display}\n**Variable type: numeric**\n\n|skim_variable      | n_missing| complete_rate|     mean|       sd|      p0|     p25|      p50|      p75|      p100|hist  |\n|:------------------|---------:|-------------:|--------:|--------:|-------:|-------:|--------:|--------:|---------:|:-----|\n|CO2emissions       |         4|          0.98|     4.55|     6.10|    0.03|    0.64|     2.41|     6.22|     41.20|▇▁▁▁▁ |\n|ElectricityUsePP   |        58|          0.70|  4220.92|  5964.07|   31.10|  699.00|  2410.00|  5600.00|  52400.00|▇▁▁▁▁ |\n|FoodSupplykcPPD    |        27|          0.86|  2825.06|   443.59| 1910.00| 2490.00|  2775.00|  3172.50|   3740.00|▅▇▇▇▅ |\n|IncomePP           |         2|          0.99| 16704.45| 19098.61|  614.00| 3370.00| 10100.00| 22700.00| 129000.00|▇▂▁▁▁ |\n|LifeExpectancyYrs  |         8|          0.96|    70.66|     8.44|   47.50|   64.30|    72.70|    76.90|     82.90|▁▃▃▇▇ |\n|FemaleLiteracyRate |       115|          0.41|    81.65|    21.95|   13.00|   70.97|    91.60|    98.03|     99.80|▁▁▂▁▇ |\n|WaterSourcePrct    |         1|          0.99|    84.84|    18.64|   18.30|   74.90|    93.50|    99.07|    100.00|▁▁▂▂▇ |\n|Latitude           |         0|          1.00|    19.11|    23.93|  -42.00|    4.00|    17.33|    40.00|     65.00|▁▃▇▆▅ |\n|Longitude          |         0|          1.00|    21.98|    66.52| -175.00|   -5.75|    21.00|    49.27|    179.14|▁▃▇▃▂ |\n|population_mill    |         0|          1.00|    35.95|   136.87|    0.00|    1.73|     7.57|    24.50|   1370.00|▇▁▁▁▁ |\n:::\n:::\n\n\n## Poll Everywhere Question 1\n\n## Pre-step: Exploratory data analysis: Study your variables\n\n-   Started this a little bit in previous slide (`skim()`), but you may want to look at things like:\n\n    -   Sample size\n    -   Counts of missing data\n    -   Means and standard deviations\n    -   IQRs\n    -   Medians\n    -   Minimums and maximums\n\n-   Can also look at visuals\n\n    -   Continuous variables: histograms (in \\`skimr() a little)\n    -   Categorical variables: frequency plots\n\n## Pre-step: Exploratory data analysis: Study your variables {.smaller}\n\n\n::: {.cell}\n\n```{.r .cell-code}\nlibrary(Hmisc)\nhist.data.frame(gapm %>% select(-Longitude, -Latitude, -eight_regions, -six_regions, -geo, -`World bank, 4 income groups 2017`, -country, -population, -`World bank region`, -ElectricityUsePP))\n```\n\n::: {.cell-output-display}\n![](13_Purposeful_Selection_files/figure-revealjs/unnamed-chunk-6-1.png){width=960}\n:::\n:::\n\n\n## Poll Everywhere Question 2\n\n## Pre-step: Exploratory data analysis: Missing data\n\n-   Why are there missing data?\n-   Which variables and observations should be excluded because of missing data?\n-   Will I impute missing data?\n\n \n\n-   Unfortunately, we don’t have time to discuss missing data more thoroughly\\\n-   I will try to cover this topic more thoroughly in BSTA 513\n\n \n\n-   For the Gapminder dataset, we chose to use complete cases\n\n## Pre-step / Step 1 : Explore simple relationships and assumptions {.smaller}\n\n\n::: {.cell layout-align=\"center\"}\n\n```{.r .cell-code}\ngapm2 %>% ggpairs() # gapm2 is a new dataset with some variables selected\n```\n\n::: {.cell-output-display}\n![](13_Purposeful_Selection_files/figure-revealjs/unnamed-chunk-7-1.png){fig-align='center' width=960}\n:::\n:::\n\n\n## Poll Everywhere Question 3\n\n## Step 1: Simple linear regressions / analysis\n\n-   For each covariate, we want to see how it relates to the outcome (without adjusting for other covariates)\n\n-   We can partially do this with **visualizations**\n\n    -   Helps us see the data we throw it into regression that makes assumptions (like our LINE assumptions)\n\n    -   `ggpairs()` can be a quick way to do it\n\n    -   `ggplot()` can make each plot\n\n        -   `+ geom_boxplot()` to make boxplots by groups for categorical covariates\n        -   `+ geom_jitter() + stat_summary()` to make non-overlaping points with group means for categorical covariates\n        -   `+ geom_point()` to make scatterplots for continuous covariates\n\n-   We need to run **simple linear regression**\n\n    -   We're calling regression with multi-level categories \"simple\" even though there are multiple coefficients\n\n## Step 1: Simple linear regressions / analysis\n\n-   Let's think back to our Gapminder dataset\n\n-   Always good to start with our main relationship: life expectancy vs. female literacy rate\n\n    -   *Throwback to Lesson 3 SLR when we first visualized and ran `lm()` for this relationship*\n\n\n::: {.cell}\n\n```{.r .cell-code}\nmodel_FLR = lm(LifeExpectancyYrs ~ FemaleLiteracyRate, data = gapm_sub)\n```\n:::\n\n\n \n\n::: columns\n::: {.column width=\"45%\"}\n\n::: {.cell}\n::: {.cell-output-display}\n![](13_Purposeful_Selection_files/figure-revealjs/unnamed-chunk-9-1.png){width=1056}\n:::\n:::\n\n:::\n\n::: {.column width=\"55%\"}\n\n::: {.cell}\n::: {.cell-output-display}\n```{=html}\n<div id=\"ebmdrnqdwz\" style=\"padding-left:0px;padding-right:0px;padding-top:10px;padding-bottom:10px;overflow-x:auto;overflow-y:auto;width:auto;height:auto;\">\n<style>#ebmdrnqdwz table {\n  font-family: system-ui, 'Segoe UI', Roboto, Helvetica, Arial, sans-serif, 'Apple Color Emoji', 'Segoe UI Emoji', 'Segoe UI Symbol', 'Noto Color Emoji';\n  -webkit-font-smoothing: antialiased;\n  -moz-osx-font-smoothing: grayscale;\n}\n\n#ebmdrnqdwz thead, #ebmdrnqdwz tbody, #ebmdrnqdwz tfoot, #ebmdrnqdwz tr, #ebmdrnqdwz td, #ebmdrnqdwz th {\n  border-style: none;\n}\n\n#ebmdrnqdwz p {\n  margin: 0;\n  padding: 0;\n}\n\n#ebmdrnqdwz .gt_table {\n  display: table;\n  border-collapse: collapse;\n  line-height: normal;\n  margin-left: auto;\n  margin-right: auto;\n  color: #333333;\n  font-size: 40px;\n  font-weight: normal;\n  font-style: normal;\n  background-color: #FFFFFF;\n  width: auto;\n  border-top-style: solid;\n  border-top-width: 2px;\n  border-top-color: #A8A8A8;\n  border-right-style: none;\n  border-right-width: 2px;\n  border-right-color: #D3D3D3;\n  border-bottom-style: solid;\n  border-bottom-width: 2px;\n  border-bottom-color: #A8A8A8;\n  border-left-style: none;\n  border-left-width: 2px;\n  border-left-color: #D3D3D3;\n}\n\n#ebmdrnqdwz .gt_caption {\n  padding-top: 4px;\n  padding-bottom: 4px;\n}\n\n#ebmdrnqdwz .gt_title {\n  color: #333333;\n  font-size: 125%;\n  font-weight: initial;\n  padding-top: 4px;\n  padding-bottom: 4px;\n  padding-left: 5px;\n  padding-right: 5px;\n  border-bottom-color: #FFFFFF;\n  border-bottom-width: 0;\n}\n\n#ebmdrnqdwz .gt_subtitle {\n  color: #333333;\n  font-size: 85%;\n  font-weight: initial;\n  padding-top: 3px;\n  padding-bottom: 5px;\n  padding-left: 5px;\n  padding-right: 5px;\n  border-top-color: #FFFFFF;\n  border-top-width: 0;\n}\n\n#ebmdrnqdwz .gt_heading {\n  background-color: #FFFFFF;\n  text-align: center;\n  border-bottom-color: #FFFFFF;\n  border-left-style: none;\n  border-left-width: 1px;\n  border-left-color: #D3D3D3;\n  border-right-style: none;\n  border-right-width: 1px;\n  border-right-color: #D3D3D3;\n}\n\n#ebmdrnqdwz .gt_bottom_border {\n  border-bottom-style: solid;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n}\n\n#ebmdrnqdwz .gt_col_headings {\n  border-top-style: solid;\n  border-top-width: 2px;\n  border-top-color: #D3D3D3;\n  border-bottom-style: solid;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n  border-left-style: none;\n  border-left-width: 1px;\n  border-left-color: #D3D3D3;\n  border-right-style: none;\n  border-right-width: 1px;\n  border-right-color: #D3D3D3;\n}\n\n#ebmdrnqdwz .gt_col_heading {\n  color: #333333;\n  background-color: #FFFFFF;\n  font-size: 100%;\n  font-weight: normal;\n  text-transform: inherit;\n  border-left-style: none;\n  border-left-width: 1px;\n  border-left-color: #D3D3D3;\n  border-right-style: none;\n  border-right-width: 1px;\n  border-right-color: #D3D3D3;\n  vertical-align: bottom;\n  padding-top: 5px;\n  padding-bottom: 6px;\n  padding-left: 5px;\n  padding-right: 5px;\n  overflow-x: hidden;\n}\n\n#ebmdrnqdwz .gt_column_spanner_outer {\n  color: #333333;\n  background-color: #FFFFFF;\n  font-size: 100%;\n  font-weight: normal;\n  text-transform: inherit;\n  padding-top: 0;\n  padding-bottom: 0;\n  padding-left: 4px;\n  padding-right: 4px;\n}\n\n#ebmdrnqdwz .gt_column_spanner_outer:first-child {\n  padding-left: 0;\n}\n\n#ebmdrnqdwz .gt_column_spanner_outer:last-child {\n  padding-right: 0;\n}\n\n#ebmdrnqdwz .gt_column_spanner {\n  border-bottom-style: solid;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n  vertical-align: bottom;\n  padding-top: 5px;\n  padding-bottom: 5px;\n  overflow-x: hidden;\n  display: inline-block;\n  width: 100%;\n}\n\n#ebmdrnqdwz .gt_spanner_row {\n  border-bottom-style: hidden;\n}\n\n#ebmdrnqdwz .gt_group_heading {\n  padding-top: 8px;\n  padding-bottom: 8px;\n  padding-left: 5px;\n  padding-right: 5px;\n  color: #333333;\n  background-color: #FFFFFF;\n  font-size: 100%;\n  font-weight: initial;\n  text-transform: inherit;\n  border-top-style: solid;\n  border-top-width: 2px;\n  border-top-color: #D3D3D3;\n  border-bottom-style: solid;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n  border-left-style: none;\n  border-left-width: 1px;\n  border-left-color: #D3D3D3;\n  border-right-style: none;\n  border-right-width: 1px;\n  border-right-color: #D3D3D3;\n  vertical-align: middle;\n  text-align: left;\n}\n\n#ebmdrnqdwz .gt_empty_group_heading {\n  padding: 0.5px;\n  color: #333333;\n  background-color: #FFFFFF;\n  font-size: 100%;\n  font-weight: initial;\n  border-top-style: solid;\n  border-top-width: 2px;\n  border-top-color: #D3D3D3;\n  border-bottom-style: solid;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n  vertical-align: middle;\n}\n\n#ebmdrnqdwz .gt_from_md > :first-child {\n  margin-top: 0;\n}\n\n#ebmdrnqdwz .gt_from_md > :last-child {\n  margin-bottom: 0;\n}\n\n#ebmdrnqdwz .gt_row {\n  padding-top: 8px;\n  padding-bottom: 8px;\n  padding-left: 5px;\n  padding-right: 5px;\n  margin: 10px;\n  border-top-style: solid;\n  border-top-width: 1px;\n  border-top-color: #D3D3D3;\n  border-left-style: none;\n  border-left-width: 1px;\n  border-left-color: #D3D3D3;\n  border-right-style: none;\n  border-right-width: 1px;\n  border-right-color: #D3D3D3;\n  vertical-align: middle;\n  overflow-x: hidden;\n}\n\n#ebmdrnqdwz .gt_stub {\n  color: #333333;\n  background-color: #FFFFFF;\n  font-size: 100%;\n  font-weight: initial;\n  text-transform: inherit;\n  border-right-style: solid;\n  border-right-width: 2px;\n  border-right-color: #D3D3D3;\n  padding-left: 5px;\n  padding-right: 5px;\n}\n\n#ebmdrnqdwz .gt_stub_row_group {\n  color: #333333;\n  background-color: #FFFFFF;\n  font-size: 100%;\n  font-weight: initial;\n  text-transform: inherit;\n  border-right-style: solid;\n  border-right-width: 2px;\n  border-right-color: #D3D3D3;\n  padding-left: 5px;\n  padding-right: 5px;\n  vertical-align: top;\n}\n\n#ebmdrnqdwz .gt_row_group_first td {\n  border-top-width: 2px;\n}\n\n#ebmdrnqdwz .gt_row_group_first th {\n  border-top-width: 2px;\n}\n\n#ebmdrnqdwz .gt_summary_row {\n  color: #333333;\n  background-color: #FFFFFF;\n  text-transform: inherit;\n  padding-top: 8px;\n  padding-bottom: 8px;\n  padding-left: 5px;\n  padding-right: 5px;\n}\n\n#ebmdrnqdwz .gt_first_summary_row {\n  border-top-style: solid;\n  border-top-color: #D3D3D3;\n}\n\n#ebmdrnqdwz .gt_first_summary_row.thick {\n  border-top-width: 2px;\n}\n\n#ebmdrnqdwz .gt_last_summary_row {\n  padding-top: 8px;\n  padding-bottom: 8px;\n  padding-left: 5px;\n  padding-right: 5px;\n  border-bottom-style: solid;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n}\n\n#ebmdrnqdwz .gt_grand_summary_row {\n  color: #333333;\n  background-color: #FFFFFF;\n  text-transform: inherit;\n  padding-top: 8px;\n  padding-bottom: 8px;\n  padding-left: 5px;\n  padding-right: 5px;\n}\n\n#ebmdrnqdwz .gt_first_grand_summary_row {\n  padding-top: 8px;\n  padding-bottom: 8px;\n  padding-left: 5px;\n  padding-right: 5px;\n  border-top-style: double;\n  border-top-width: 6px;\n  border-top-color: #D3D3D3;\n}\n\n#ebmdrnqdwz .gt_last_grand_summary_row_top {\n  padding-top: 8px;\n  padding-bottom: 8px;\n  padding-left: 5px;\n  padding-right: 5px;\n  border-bottom-style: double;\n  border-bottom-width: 6px;\n  border-bottom-color: #D3D3D3;\n}\n\n#ebmdrnqdwz .gt_striped {\n  background-color: rgba(128, 128, 128, 0.05);\n}\n\n#ebmdrnqdwz .gt_table_body {\n  border-top-style: solid;\n  border-top-width: 2px;\n  border-top-color: #D3D3D3;\n  border-bottom-style: solid;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n}\n\n#ebmdrnqdwz .gt_footnotes {\n  color: #333333;\n  background-color: #FFFFFF;\n  border-bottom-style: none;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n  border-left-style: none;\n  border-left-width: 2px;\n  border-left-color: #D3D3D3;\n  border-right-style: none;\n  border-right-width: 2px;\n  border-right-color: #D3D3D3;\n}\n\n#ebmdrnqdwz .gt_footnote {\n  margin: 0px;\n  font-size: 90%;\n  padding-top: 4px;\n  padding-bottom: 4px;\n  padding-left: 5px;\n  padding-right: 5px;\n}\n\n#ebmdrnqdwz .gt_sourcenotes {\n  color: #333333;\n  background-color: #FFFFFF;\n  border-bottom-style: none;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n  border-left-style: none;\n  border-left-width: 2px;\n  border-left-color: #D3D3D3;\n  border-right-style: none;\n  border-right-width: 2px;\n  border-right-color: #D3D3D3;\n}\n\n#ebmdrnqdwz .gt_sourcenote {\n  font-size: 90%;\n  padding-top: 4px;\n  padding-bottom: 4px;\n  padding-left: 5px;\n  padding-right: 5px;\n}\n\n#ebmdrnqdwz .gt_left {\n  text-align: left;\n}\n\n#ebmdrnqdwz .gt_center {\n  text-align: center;\n}\n\n#ebmdrnqdwz .gt_right {\n  text-align: right;\n  font-variant-numeric: tabular-nums;\n}\n\n#ebmdrnqdwz .gt_font_normal {\n  font-weight: normal;\n}\n\n#ebmdrnqdwz .gt_font_bold {\n  font-weight: bold;\n}\n\n#ebmdrnqdwz .gt_font_italic {\n  font-style: italic;\n}\n\n#ebmdrnqdwz .gt_super {\n  font-size: 65%;\n}\n\n#ebmdrnqdwz .gt_footnote_marks {\n  font-size: 75%;\n  vertical-align: 0.4em;\n  position: initial;\n}\n\n#ebmdrnqdwz .gt_asterisk {\n  font-size: 100%;\n  vertical-align: 0;\n}\n\n#ebmdrnqdwz .gt_indent_1 {\n  text-indent: 5px;\n}\n\n#ebmdrnqdwz .gt_indent_2 {\n  text-indent: 10px;\n}\n\n#ebmdrnqdwz .gt_indent_3 {\n  text-indent: 15px;\n}\n\n#ebmdrnqdwz .gt_indent_4 {\n  text-indent: 20px;\n}\n\n#ebmdrnqdwz .gt_indent_5 {\n  text-indent: 25px;\n}\n</style>\n<table class=\"gt_table\" data-quarto-disable-processing=\"false\" data-quarto-bootstrap=\"false\">\n  <thead>\n    \n    <tr class=\"gt_col_headings\">\n      <th class=\"gt_col_heading gt_columns_bottom_border gt_left\" rowspan=\"1\" colspan=\"1\" scope=\"col\" id=\"term\">term</th>\n      <th class=\"gt_col_heading gt_columns_bottom_border gt_right\" rowspan=\"1\" colspan=\"1\" scope=\"col\" id=\"estimate\">estimate</th>\n      <th class=\"gt_col_heading gt_columns_bottom_border gt_right\" rowspan=\"1\" colspan=\"1\" scope=\"col\" id=\"std.error\">std.error</th>\n      <th class=\"gt_col_heading gt_columns_bottom_border gt_right\" rowspan=\"1\" colspan=\"1\" scope=\"col\" id=\"statistic\">statistic</th>\n      <th class=\"gt_col_heading gt_columns_bottom_border gt_right\" rowspan=\"1\" colspan=\"1\" scope=\"col\" id=\"p.value\">p.value</th>\n    </tr>\n  </thead>\n  <tbody class=\"gt_table_body\">\n    <tr><td headers=\"term\" class=\"gt_row gt_left\">(Intercept)</td>\n<td headers=\"estimate\" class=\"gt_row gt_right\">51.438</td>\n<td headers=\"std.error\" class=\"gt_row gt_right\">2.739</td>\n<td headers=\"statistic\" class=\"gt_row gt_right\">18.782</td>\n<td headers=\"p.value\" class=\"gt_row gt_right\">0.000</td></tr>\n    <tr><td headers=\"term\" class=\"gt_row gt_left\">FemaleLiteracyRate</td>\n<td headers=\"estimate\" class=\"gt_row gt_right\">0.230</td>\n<td headers=\"std.error\" class=\"gt_row gt_right\">0.032</td>\n<td headers=\"statistic\" class=\"gt_row gt_right\">7.141</td>\n<td headers=\"p.value\" class=\"gt_row gt_right\">0.000</td></tr>\n  </tbody>\n  \n  \n</table>\n</div>\n```\n:::\n:::\n\n:::\n:::\n\n## Poll Everywhere Question 4\n\n## Step 1: Simple linear regressions / analysis\n\n-   Let's do this with one other variable before I show you a streamlined version of SLR\n\n\n::: {.cell}\n\n```{.r .cell-code}\nmodel_WR = lm(LifeExpectancyYrs ~ four_regions, data = gapm_sub)\n```\n:::\n\n\n \n\n::: columns\n::: {.column width=\"45%\"}\n\n::: {.cell layout-align=\"center\"}\n\n```{.r .cell-code  code-fold=\"true\"}\nggplot(gapm_sub, aes(x = four_regions, y = LifeExpectancyYrs)) +\n  geom_jitter(size = 1, alpha = .6, width = 0.2) +\n  stat_summary(fun = mean, geom = \"point\", size = 8, shape = 18) +\n  labs(x = \"World region\", \n       y = \"Country life expectancy (years)\",\n       title = \"Life expectancy vs. world region\",\n       caption = \"Diamonds = region averages\") +\n  theme(axis.title = element_text(size = 20), \n        axis.text = element_text(size = 20), \n        title = element_text(size = 20))\n```\n\n::: {.cell-output-display}\n![](13_Purposeful_Selection_files/figure-revealjs/unnamed-chunk-12-1.png){fig-align='center' width=672}\n:::\n:::\n\n:::\n\n::: {.column width=\"55%\"}\n\n::: {.cell}\n\n```{.r .cell-code}\nanova(model_WR) %>% tidy() %>% gt() %>%\n   tab_options(table.font.size = 40) %>%\n   fmt_number(decimals = 3)\n```\n\n::: {.cell-output-display}\n```{=html}\n<div id=\"ooluzxtnvs\" style=\"padding-left:0px;padding-right:0px;padding-top:10px;padding-bottom:10px;overflow-x:auto;overflow-y:auto;width:auto;height:auto;\">\n<style>#ooluzxtnvs table {\n  font-family: system-ui, 'Segoe UI', Roboto, Helvetica, Arial, sans-serif, 'Apple Color Emoji', 'Segoe UI Emoji', 'Segoe UI Symbol', 'Noto Color Emoji';\n  -webkit-font-smoothing: antialiased;\n  -moz-osx-font-smoothing: grayscale;\n}\n\n#ooluzxtnvs thead, #ooluzxtnvs tbody, #ooluzxtnvs tfoot, #ooluzxtnvs tr, #ooluzxtnvs td, #ooluzxtnvs th {\n  border-style: none;\n}\n\n#ooluzxtnvs p {\n  margin: 0;\n  padding: 0;\n}\n\n#ooluzxtnvs .gt_table {\n  display: table;\n  border-collapse: collapse;\n  line-height: normal;\n  margin-left: auto;\n  margin-right: auto;\n  color: #333333;\n  font-size: 40px;\n  font-weight: normal;\n  font-style: normal;\n  background-color: #FFFFFF;\n  width: auto;\n  border-top-style: solid;\n  border-top-width: 2px;\n  border-top-color: #A8A8A8;\n  border-right-style: none;\n  border-right-width: 2px;\n  border-right-color: #D3D3D3;\n  border-bottom-style: solid;\n  border-bottom-width: 2px;\n  border-bottom-color: #A8A8A8;\n  border-left-style: none;\n  border-left-width: 2px;\n  border-left-color: #D3D3D3;\n}\n\n#ooluzxtnvs .gt_caption {\n  padding-top: 4px;\n  padding-bottom: 4px;\n}\n\n#ooluzxtnvs .gt_title {\n  color: #333333;\n  font-size: 125%;\n  font-weight: initial;\n  padding-top: 4px;\n  padding-bottom: 4px;\n  padding-left: 5px;\n  padding-right: 5px;\n  border-bottom-color: #FFFFFF;\n  border-bottom-width: 0;\n}\n\n#ooluzxtnvs .gt_subtitle {\n  color: #333333;\n  font-size: 85%;\n  font-weight: initial;\n  padding-top: 3px;\n  padding-bottom: 5px;\n  padding-left: 5px;\n  padding-right: 5px;\n  border-top-color: #FFFFFF;\n  border-top-width: 0;\n}\n\n#ooluzxtnvs .gt_heading {\n  background-color: #FFFFFF;\n  text-align: center;\n  border-bottom-color: #FFFFFF;\n  border-left-style: none;\n  border-left-width: 1px;\n  border-left-color: #D3D3D3;\n  border-right-style: none;\n  border-right-width: 1px;\n  border-right-color: #D3D3D3;\n}\n\n#ooluzxtnvs .gt_bottom_border {\n  border-bottom-style: solid;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n}\n\n#ooluzxtnvs .gt_col_headings {\n  border-top-style: solid;\n  border-top-width: 2px;\n  border-top-color: #D3D3D3;\n  border-bottom-style: solid;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n  border-left-style: none;\n  border-left-width: 1px;\n  border-left-color: #D3D3D3;\n  border-right-style: none;\n  border-right-width: 1px;\n  border-right-color: #D3D3D3;\n}\n\n#ooluzxtnvs .gt_col_heading {\n  color: #333333;\n  background-color: #FFFFFF;\n  font-size: 100%;\n  font-weight: normal;\n  text-transform: inherit;\n  border-left-style: none;\n  border-left-width: 1px;\n  border-left-color: #D3D3D3;\n  border-right-style: none;\n  border-right-width: 1px;\n  border-right-color: #D3D3D3;\n  vertical-align: bottom;\n  padding-top: 5px;\n  padding-bottom: 6px;\n  padding-left: 5px;\n  padding-right: 5px;\n  overflow-x: hidden;\n}\n\n#ooluzxtnvs .gt_column_spanner_outer {\n  color: #333333;\n  background-color: #FFFFFF;\n  font-size: 100%;\n  font-weight: normal;\n  text-transform: inherit;\n  padding-top: 0;\n  padding-bottom: 0;\n  padding-left: 4px;\n  padding-right: 4px;\n}\n\n#ooluzxtnvs .gt_column_spanner_outer:first-child {\n  padding-left: 0;\n}\n\n#ooluzxtnvs .gt_column_spanner_outer:last-child {\n  padding-right: 0;\n}\n\n#ooluzxtnvs .gt_column_spanner {\n  border-bottom-style: solid;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n  vertical-align: bottom;\n  padding-top: 5px;\n  padding-bottom: 5px;\n  overflow-x: hidden;\n  display: inline-block;\n  width: 100%;\n}\n\n#ooluzxtnvs .gt_spanner_row {\n  border-bottom-style: hidden;\n}\n\n#ooluzxtnvs .gt_group_heading {\n  padding-top: 8px;\n  padding-bottom: 8px;\n  padding-left: 5px;\n  padding-right: 5px;\n  color: #333333;\n  background-color: #FFFFFF;\n  font-size: 100%;\n  font-weight: initial;\n  text-transform: inherit;\n  border-top-style: solid;\n  border-top-width: 2px;\n  border-top-color: #D3D3D3;\n  border-bottom-style: solid;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n  border-left-style: none;\n  border-left-width: 1px;\n  border-left-color: #D3D3D3;\n  border-right-style: none;\n  border-right-width: 1px;\n  border-right-color: #D3D3D3;\n  vertical-align: middle;\n  text-align: left;\n}\n\n#ooluzxtnvs .gt_empty_group_heading {\n  padding: 0.5px;\n  color: #333333;\n  background-color: #FFFFFF;\n  font-size: 100%;\n  font-weight: initial;\n  border-top-style: solid;\n  border-top-width: 2px;\n  border-top-color: #D3D3D3;\n  border-bottom-style: solid;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n  vertical-align: middle;\n}\n\n#ooluzxtnvs .gt_from_md > :first-child {\n  margin-top: 0;\n}\n\n#ooluzxtnvs .gt_from_md > :last-child {\n  margin-bottom: 0;\n}\n\n#ooluzxtnvs .gt_row {\n  padding-top: 8px;\n  padding-bottom: 8px;\n  padding-left: 5px;\n  padding-right: 5px;\n  margin: 10px;\n  border-top-style: solid;\n  border-top-width: 1px;\n  border-top-color: #D3D3D3;\n  border-left-style: none;\n  border-left-width: 1px;\n  border-left-color: #D3D3D3;\n  border-right-style: none;\n  border-right-width: 1px;\n  border-right-color: #D3D3D3;\n  vertical-align: middle;\n  overflow-x: hidden;\n}\n\n#ooluzxtnvs .gt_stub {\n  color: #333333;\n  background-color: #FFFFFF;\n  font-size: 100%;\n  font-weight: initial;\n  text-transform: inherit;\n  border-right-style: solid;\n  border-right-width: 2px;\n  border-right-color: #D3D3D3;\n  padding-left: 5px;\n  padding-right: 5px;\n}\n\n#ooluzxtnvs .gt_stub_row_group {\n  color: #333333;\n  background-color: #FFFFFF;\n  font-size: 100%;\n  font-weight: initial;\n  text-transform: inherit;\n  border-right-style: solid;\n  border-right-width: 2px;\n  border-right-color: #D3D3D3;\n  padding-left: 5px;\n  padding-right: 5px;\n  vertical-align: top;\n}\n\n#ooluzxtnvs .gt_row_group_first td {\n  border-top-width: 2px;\n}\n\n#ooluzxtnvs .gt_row_group_first th {\n  border-top-width: 2px;\n}\n\n#ooluzxtnvs .gt_summary_row {\n  color: #333333;\n  background-color: #FFFFFF;\n  text-transform: inherit;\n  padding-top: 8px;\n  padding-bottom: 8px;\n  padding-left: 5px;\n  padding-right: 5px;\n}\n\n#ooluzxtnvs .gt_first_summary_row {\n  border-top-style: solid;\n  border-top-color: #D3D3D3;\n}\n\n#ooluzxtnvs .gt_first_summary_row.thick {\n  border-top-width: 2px;\n}\n\n#ooluzxtnvs .gt_last_summary_row {\n  padding-top: 8px;\n  padding-bottom: 8px;\n  padding-left: 5px;\n  padding-right: 5px;\n  border-bottom-style: solid;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n}\n\n#ooluzxtnvs .gt_grand_summary_row {\n  color: #333333;\n  background-color: #FFFFFF;\n  text-transform: inherit;\n  padding-top: 8px;\n  padding-bottom: 8px;\n  padding-left: 5px;\n  padding-right: 5px;\n}\n\n#ooluzxtnvs .gt_first_grand_summary_row {\n  padding-top: 8px;\n  padding-bottom: 8px;\n  padding-left: 5px;\n  padding-right: 5px;\n  border-top-style: double;\n  border-top-width: 6px;\n  border-top-color: #D3D3D3;\n}\n\n#ooluzxtnvs .gt_last_grand_summary_row_top {\n  padding-top: 8px;\n  padding-bottom: 8px;\n  padding-left: 5px;\n  padding-right: 5px;\n  border-bottom-style: double;\n  border-bottom-width: 6px;\n  border-bottom-color: #D3D3D3;\n}\n\n#ooluzxtnvs .gt_striped {\n  background-color: rgba(128, 128, 128, 0.05);\n}\n\n#ooluzxtnvs .gt_table_body {\n  border-top-style: solid;\n  border-top-width: 2px;\n  border-top-color: #D3D3D3;\n  border-bottom-style: solid;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n}\n\n#ooluzxtnvs .gt_footnotes {\n  color: #333333;\n  background-color: #FFFFFF;\n  border-bottom-style: none;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n  border-left-style: none;\n  border-left-width: 2px;\n  border-left-color: #D3D3D3;\n  border-right-style: none;\n  border-right-width: 2px;\n  border-right-color: #D3D3D3;\n}\n\n#ooluzxtnvs .gt_footnote {\n  margin: 0px;\n  font-size: 90%;\n  padding-top: 4px;\n  padding-bottom: 4px;\n  padding-left: 5px;\n  padding-right: 5px;\n}\n\n#ooluzxtnvs .gt_sourcenotes {\n  color: #333333;\n  background-color: #FFFFFF;\n  border-bottom-style: none;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n  border-left-style: none;\n  border-left-width: 2px;\n  border-left-color: #D3D3D3;\n  border-right-style: none;\n  border-right-width: 2px;\n  border-right-color: #D3D3D3;\n}\n\n#ooluzxtnvs .gt_sourcenote {\n  font-size: 90%;\n  padding-top: 4px;\n  padding-bottom: 4px;\n  padding-left: 5px;\n  padding-right: 5px;\n}\n\n#ooluzxtnvs .gt_left {\n  text-align: left;\n}\n\n#ooluzxtnvs .gt_center {\n  text-align: center;\n}\n\n#ooluzxtnvs .gt_right {\n  text-align: right;\n  font-variant-numeric: tabular-nums;\n}\n\n#ooluzxtnvs .gt_font_normal {\n  font-weight: normal;\n}\n\n#ooluzxtnvs .gt_font_bold {\n  font-weight: bold;\n}\n\n#ooluzxtnvs .gt_font_italic {\n  font-style: italic;\n}\n\n#ooluzxtnvs .gt_super {\n  font-size: 65%;\n}\n\n#ooluzxtnvs .gt_footnote_marks {\n  font-size: 75%;\n  vertical-align: 0.4em;\n  position: initial;\n}\n\n#ooluzxtnvs .gt_asterisk {\n  font-size: 100%;\n  vertical-align: 0;\n}\n\n#ooluzxtnvs .gt_indent_1 {\n  text-indent: 5px;\n}\n\n#ooluzxtnvs .gt_indent_2 {\n  text-indent: 10px;\n}\n\n#ooluzxtnvs .gt_indent_3 {\n  text-indent: 15px;\n}\n\n#ooluzxtnvs .gt_indent_4 {\n  text-indent: 20px;\n}\n\n#ooluzxtnvs .gt_indent_5 {\n  text-indent: 25px;\n}\n</style>\n<table class=\"gt_table\" data-quarto-disable-processing=\"false\" data-quarto-bootstrap=\"false\">\n  <thead>\n    \n    <tr class=\"gt_col_headings\">\n      <th class=\"gt_col_heading gt_columns_bottom_border gt_left\" rowspan=\"1\" colspan=\"1\" scope=\"col\" id=\"term\">term</th>\n      <th class=\"gt_col_heading gt_columns_bottom_border gt_right\" rowspan=\"1\" colspan=\"1\" scope=\"col\" id=\"df\">df</th>\n      <th class=\"gt_col_heading gt_columns_bottom_border gt_right\" rowspan=\"1\" colspan=\"1\" scope=\"col\" id=\"sumsq\">sumsq</th>\n      <th class=\"gt_col_heading gt_columns_bottom_border gt_right\" rowspan=\"1\" colspan=\"1\" scope=\"col\" id=\"meansq\">meansq</th>\n      <th class=\"gt_col_heading gt_columns_bottom_border gt_right\" rowspan=\"1\" colspan=\"1\" scope=\"col\" id=\"statistic\">statistic</th>\n      <th class=\"gt_col_heading gt_columns_bottom_border gt_right\" rowspan=\"1\" colspan=\"1\" scope=\"col\" id=\"p.value\">p.value</th>\n    </tr>\n  </thead>\n  <tbody class=\"gt_table_body\">\n    <tr><td headers=\"term\" class=\"gt_row gt_left\">four_regions</td>\n<td headers=\"df\" class=\"gt_row gt_right\">3.000</td>\n<td headers=\"sumsq\" class=\"gt_row gt_right\">2,743.042</td>\n<td headers=\"meansq\" class=\"gt_row gt_right\">914.347</td>\n<td headers=\"statistic\" class=\"gt_row gt_right\">33.680</td>\n<td headers=\"p.value\" class=\"gt_row gt_right\">0.000</td></tr>\n    <tr><td headers=\"term\" class=\"gt_row gt_left\">Residuals</td>\n<td headers=\"df\" class=\"gt_row gt_right\">68.000</td>\n<td headers=\"sumsq\" class=\"gt_row gt_right\">1,846.077</td>\n<td headers=\"meansq\" class=\"gt_row gt_right\">27.148</td>\n<td headers=\"statistic\" class=\"gt_row gt_right\">NA</td>\n<td headers=\"p.value\" class=\"gt_row gt_right\">NA</td></tr>\n  </tbody>\n  \n  \n</table>\n</div>\n```\n:::\n:::\n\n\n \n\n-   Recall from Lesson 5 (SLR: More inference + Evaluation):\n\n    -   `anova()` with one model name will compare the model (`model_WR`) to the intercept model\n:::\n:::\n\n## Step 1: Simple linear regressions / analysis\n\n-   If we do a good job visualizing the relationship between our outcome and each covariate, then we can proceed to a streamlined version of the F-test for each relationship\n\n-   First, I will select the variables that we are considering for model selection:\n\n\n::: {.cell}\n\n```{.r .cell-code}\ngapm2 = gapm_sub %>% select(LifeExpectancyYrs, CO2emissions, FoodSupplykcPPD, \n                            IncomePP, FemaleLiteracyRate, WaterSourcePrct, \n                            four_regions, members_oecd_g77)\n```\n:::\n\n\n-   We need to make sure our dataset only contains the variables we are considering for the model:\n\n\n::: {.cell}\n\n```{.r .cell-code}\ngapm3 = gapm2 %>% select(-LifeExpectancyYrs)\n```\n:::\n\n\n## Step 1: Simple linear regressions / analysis {.smaller}\n\n-   Now I can run the `lapply()` function, which allows me to run the same function multiple times over all the columns in `gapm3`\n\n-   For each covariate I am running: `lm(gapm2$LifeExpectancyYrs ~ x) %>% anova()`\n\n    -   So I am fitting the simple linear regression and printing the ANOVA table with F-test (comparing model with a without the covariate)\n\n\n::: {.cell}\n\n```{.r .cell-code}\nlapply( gapm3, function(x) lm(gapm2$LifeExpectancyYrs ~ x) %>% anova() )\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n$CO2emissions\nAnalysis of Variance Table\n\nResponse: gapm2$LifeExpectancyYrs\n          Df Sum Sq Mean Sq F value   Pr(>F)   \nx          1  452.3  452.31  7.6536 0.007241 **\nResiduals 70 4136.8   59.10                    \n---\nSignif. codes:  0 '***' 0.001 '**' 0.01 '*' 0.05 '.' 0.1 ' ' 1\n\n$FoodSupplykcPPD\nAnalysis of Variance Table\n\nResponse: gapm2$LifeExpectancyYrs\n          Df Sum Sq Mean Sq F value    Pr(>F)    \nx          1 1893.4 1893.44  49.168 1.188e-09 ***\nResiduals 70 2695.7   38.51                      \n---\nSignif. codes:  0 '***' 0.001 '**' 0.01 '*' 0.05 '.' 0.1 ' ' 1\n\n$IncomePP\nAnalysis of Variance Table\n\nResponse: gapm2$LifeExpectancyYrs\n          Df Sum Sq Mean Sq F value    Pr(>F)    \nx          1 1220.3 1220.34  25.358 3.557e-06 ***\nResiduals 70 3368.8   48.13                      \n---\nSignif. codes:  0 '***' 0.001 '**' 0.01 '*' 0.05 '.' 0.1 ' ' 1\n\n$FemaleLiteracyRate\nAnalysis of Variance Table\n\nResponse: gapm2$LifeExpectancyYrs\n          Df Sum Sq Mean Sq F value    Pr(>F)    \nx          1 1934.2 1934.24  50.999 6.895e-10 ***\nResiduals 70 2654.9   37.93                      \n---\nSignif. codes:  0 '***' 0.001 '**' 0.01 '*' 0.05 '.' 0.1 ' ' 1\n\n$WaterSourcePrct\nAnalysis of Variance Table\n\nResponse: gapm2$LifeExpectancyYrs\n          Df Sum Sq Mean Sq F value    Pr(>F)    \nx          1 2988.2 2988.20  130.66 < 2.2e-16 ***\nResiduals 70 1600.9   22.87                      \n---\nSignif. codes:  0 '***' 0.001 '**' 0.01 '*' 0.05 '.' 0.1 ' ' 1\n\n$four_regions\nAnalysis of Variance Table\n\nResponse: gapm2$LifeExpectancyYrs\n          Df Sum Sq Mean Sq F value    Pr(>F)    \nx          3 2743.0  914.35   33.68 1.858e-13 ***\nResiduals 68 1846.1   27.15                      \n---\nSignif. codes:  0 '***' 0.001 '**' 0.01 '*' 0.05 '.' 0.1 ' ' 1\n\n$members_oecd_g77\nAnalysis of Variance Table\n\nResponse: gapm2$LifeExpectancyYrs\n          Df Sum Sq Mean Sq F value    Pr(>F)    \nx          2 1103.7  551.85  10.925 7.553e-05 ***\nResiduals 69 3485.4   50.51                      \n---\nSignif. codes:  0 '***' 0.001 '**' 0.01 '*' 0.05 '.' 0.1 ' ' 1\n```\n:::\n:::\n\n\n-   We can scroll through the output to see the ANOVA table for each covariate\n\n## Step 1: Simple linear regressions / analysis\n\n-   We can also filter the ANOVA table to just show the p-value for each F-test\n\n\n::: {.cell}\n\n```{.r .cell-code}\nsapply( gapm3, function(x) anova( lm(gapm2$LifeExpectancyYrs ~ x) )$`Pr(>F)` )\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n     CO2emissions FoodSupplykcPPD     IncomePP FemaleLiteracyRate\n[1,]  0.007241207    1.187753e-09 3.557341e-06       6.894997e-10\n[2,]           NA              NA           NA                 NA\n     WaterSourcePrct four_regions members_oecd_g77\n[1,]    1.148644e-17 1.857818e-13      7.55261e-05\n[2,]              NA           NA               NA\n```\n:::\n:::\n\n\n-   Row 1 is the p-value for the F-test\n\n    -   This will help us in Step 2\n\n## Step 2: Preliminary variable selection\n\n-   Identify candidates for your first multivariable model by performing an F-test on each covariate's SLR\n\n    -   Using p-values from previous slide\n    -   If the p-value of the test is less than 0.25, then consider the variable a candidate\n\n \n\n-   Candidates for first multivariable model\n\n    -   All clinically important variables (regardless of p-value)\n    -   Variables with univariate test with p-value \\< 0.25\n\n \n\n-   With more experience, you won’t need to rely on these strict rules as much\n\n## Step 2: Preliminary variable selection\n\n-   From the previous p-values from the F-test on each covariate's SLR\n\n    -   Decision: we keep all the covariates since they all have a p-value \\< 0.25\n\n\n::: {.cell}\n\n```{.r .cell-code}\nsapply( gapm3, function(x) anova( lm(gapm2$LifeExpectancyYrs ~ x) )$`Pr(>F)` )\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n     CO2emissions FoodSupplykcPPD     IncomePP FemaleLiteracyRate\n[1,]  0.007241207    1.187753e-09 3.557341e-06       6.894997e-10\n[2,]           NA              NA           NA                 NA\n     WaterSourcePrct four_regions members_oecd_g77\n[1,]    1.148644e-17 1.857818e-13      7.55261e-05\n[2,]              NA           NA               NA\n```\n:::\n:::\n\n\n## Step 2: Preliminary variable selection\n\n-   Fit an **initial model** including any independent variable with p-value \\< 0.25 and clinically important variables\n\n\n::: {.cell}\n\n```{.r .cell-code}\ninit_model = lm(LifeExpectancyYrs ~ FemaleLiteracyRate + CO2emissions + IncomePP +\n               four_regions + WaterSourcePrct + FoodSupplykcPPD + members_oecd_g77, \n                 data = gapm2)\ntidy(init_model, conf.int = T) %>% gt() %>% tab_options(table.font.size = 30) %>% \n  fmt_number(decimals = 4)\n```\n\n::: {.cell-output-display}\n```{=html}\n<div id=\"hwbutsvkjg\" style=\"padding-left:0px;padding-right:0px;padding-top:10px;padding-bottom:10px;overflow-x:auto;overflow-y:auto;width:auto;height:auto;\">\n<style>#hwbutsvkjg table {\n  font-family: system-ui, 'Segoe UI', Roboto, Helvetica, Arial, sans-serif, 'Apple Color Emoji', 'Segoe UI Emoji', 'Segoe UI Symbol', 'Noto Color Emoji';\n  -webkit-font-smoothing: antialiased;\n  -moz-osx-font-smoothing: grayscale;\n}\n\n#hwbutsvkjg thead, #hwbutsvkjg tbody, #hwbutsvkjg tfoot, #hwbutsvkjg tr, #hwbutsvkjg td, #hwbutsvkjg th {\n  border-style: none;\n}\n\n#hwbutsvkjg p {\n  margin: 0;\n  padding: 0;\n}\n\n#hwbutsvkjg .gt_table {\n  display: table;\n  border-collapse: collapse;\n  line-height: normal;\n  margin-left: auto;\n  margin-right: auto;\n  color: #333333;\n  font-size: 30px;\n  font-weight: normal;\n  font-style: normal;\n  background-color: #FFFFFF;\n  width: auto;\n  border-top-style: solid;\n  border-top-width: 2px;\n  border-top-color: #A8A8A8;\n  border-right-style: none;\n  border-right-width: 2px;\n  border-right-color: #D3D3D3;\n  border-bottom-style: solid;\n  border-bottom-width: 2px;\n  border-bottom-color: #A8A8A8;\n  border-left-style: none;\n  border-left-width: 2px;\n  border-left-color: #D3D3D3;\n}\n\n#hwbutsvkjg .gt_caption {\n  padding-top: 4px;\n  padding-bottom: 4px;\n}\n\n#hwbutsvkjg .gt_title {\n  color: #333333;\n  font-size: 125%;\n  font-weight: initial;\n  padding-top: 4px;\n  padding-bottom: 4px;\n  padding-left: 5px;\n  padding-right: 5px;\n  border-bottom-color: #FFFFFF;\n  border-bottom-width: 0;\n}\n\n#hwbutsvkjg .gt_subtitle {\n  color: #333333;\n  font-size: 85%;\n  font-weight: initial;\n  padding-top: 3px;\n  padding-bottom: 5px;\n  padding-left: 5px;\n  padding-right: 5px;\n  border-top-color: #FFFFFF;\n  border-top-width: 0;\n}\n\n#hwbutsvkjg .gt_heading {\n  background-color: #FFFFFF;\n  text-align: center;\n  border-bottom-color: #FFFFFF;\n  border-left-style: none;\n  border-left-width: 1px;\n  border-left-color: #D3D3D3;\n  border-right-style: none;\n  border-right-width: 1px;\n  border-right-color: #D3D3D3;\n}\n\n#hwbutsvkjg .gt_bottom_border {\n  border-bottom-style: solid;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n}\n\n#hwbutsvkjg .gt_col_headings {\n  border-top-style: solid;\n  border-top-width: 2px;\n  border-top-color: #D3D3D3;\n  border-bottom-style: solid;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n  border-left-style: none;\n  border-left-width: 1px;\n  border-left-color: #D3D3D3;\n  border-right-style: none;\n  border-right-width: 1px;\n  border-right-color: #D3D3D3;\n}\n\n#hwbutsvkjg .gt_col_heading {\n  color: #333333;\n  background-color: #FFFFFF;\n  font-size: 100%;\n  font-weight: normal;\n  text-transform: inherit;\n  border-left-style: none;\n  border-left-width: 1px;\n  border-left-color: #D3D3D3;\n  border-right-style: none;\n  border-right-width: 1px;\n  border-right-color: #D3D3D3;\n  vertical-align: bottom;\n  padding-top: 5px;\n  padding-bottom: 6px;\n  padding-left: 5px;\n  padding-right: 5px;\n  overflow-x: hidden;\n}\n\n#hwbutsvkjg .gt_column_spanner_outer {\n  color: #333333;\n  background-color: #FFFFFF;\n  font-size: 100%;\n  font-weight: normal;\n  text-transform: inherit;\n  padding-top: 0;\n  padding-bottom: 0;\n  padding-left: 4px;\n  padding-right: 4px;\n}\n\n#hwbutsvkjg .gt_column_spanner_outer:first-child {\n  padding-left: 0;\n}\n\n#hwbutsvkjg .gt_column_spanner_outer:last-child {\n  padding-right: 0;\n}\n\n#hwbutsvkjg .gt_column_spanner {\n  border-bottom-style: solid;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n  vertical-align: bottom;\n  padding-top: 5px;\n  padding-bottom: 5px;\n  overflow-x: hidden;\n  display: inline-block;\n  width: 100%;\n}\n\n#hwbutsvkjg .gt_spanner_row {\n  border-bottom-style: hidden;\n}\n\n#hwbutsvkjg .gt_group_heading {\n  padding-top: 8px;\n  padding-bottom: 8px;\n  padding-left: 5px;\n  padding-right: 5px;\n  color: #333333;\n  background-color: #FFFFFF;\n  font-size: 100%;\n  font-weight: initial;\n  text-transform: inherit;\n  border-top-style: solid;\n  border-top-width: 2px;\n  border-top-color: #D3D3D3;\n  border-bottom-style: solid;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n  border-left-style: none;\n  border-left-width: 1px;\n  border-left-color: #D3D3D3;\n  border-right-style: none;\n  border-right-width: 1px;\n  border-right-color: #D3D3D3;\n  vertical-align: middle;\n  text-align: left;\n}\n\n#hwbutsvkjg .gt_empty_group_heading {\n  padding: 0.5px;\n  color: #333333;\n  background-color: #FFFFFF;\n  font-size: 100%;\n  font-weight: initial;\n  border-top-style: solid;\n  border-top-width: 2px;\n  border-top-color: #D3D3D3;\n  border-bottom-style: solid;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n  vertical-align: middle;\n}\n\n#hwbutsvkjg .gt_from_md > :first-child {\n  margin-top: 0;\n}\n\n#hwbutsvkjg .gt_from_md > :last-child {\n  margin-bottom: 0;\n}\n\n#hwbutsvkjg .gt_row {\n  padding-top: 8px;\n  padding-bottom: 8px;\n  padding-left: 5px;\n  padding-right: 5px;\n  margin: 10px;\n  border-top-style: solid;\n  border-top-width: 1px;\n  border-top-color: #D3D3D3;\n  border-left-style: none;\n  border-left-width: 1px;\n  border-left-color: #D3D3D3;\n  border-right-style: none;\n  border-right-width: 1px;\n  border-right-color: #D3D3D3;\n  vertical-align: middle;\n  overflow-x: hidden;\n}\n\n#hwbutsvkjg .gt_stub {\n  color: #333333;\n  background-color: #FFFFFF;\n  font-size: 100%;\n  font-weight: initial;\n  text-transform: inherit;\n  border-right-style: solid;\n  border-right-width: 2px;\n  border-right-color: #D3D3D3;\n  padding-left: 5px;\n  padding-right: 5px;\n}\n\n#hwbutsvkjg .gt_stub_row_group {\n  color: #333333;\n  background-color: #FFFFFF;\n  font-size: 100%;\n  font-weight: initial;\n  text-transform: inherit;\n  border-right-style: solid;\n  border-right-width: 2px;\n  border-right-color: #D3D3D3;\n  padding-left: 5px;\n  padding-right: 5px;\n  vertical-align: top;\n}\n\n#hwbutsvkjg .gt_row_group_first td {\n  border-top-width: 2px;\n}\n\n#hwbutsvkjg .gt_row_group_first th {\n  border-top-width: 2px;\n}\n\n#hwbutsvkjg .gt_summary_row {\n  color: #333333;\n  background-color: #FFFFFF;\n  text-transform: inherit;\n  padding-top: 8px;\n  padding-bottom: 8px;\n  padding-left: 5px;\n  padding-right: 5px;\n}\n\n#hwbutsvkjg .gt_first_summary_row {\n  border-top-style: solid;\n  border-top-color: #D3D3D3;\n}\n\n#hwbutsvkjg .gt_first_summary_row.thick {\n  border-top-width: 2px;\n}\n\n#hwbutsvkjg .gt_last_summary_row {\n  padding-top: 8px;\n  padding-bottom: 8px;\n  padding-left: 5px;\n  padding-right: 5px;\n  border-bottom-style: solid;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n}\n\n#hwbutsvkjg .gt_grand_summary_row {\n  color: #333333;\n  background-color: #FFFFFF;\n  text-transform: inherit;\n  padding-top: 8px;\n  padding-bottom: 8px;\n  padding-left: 5px;\n  padding-right: 5px;\n}\n\n#hwbutsvkjg .gt_first_grand_summary_row {\n  padding-top: 8px;\n  padding-bottom: 8px;\n  padding-left: 5px;\n  padding-right: 5px;\n  border-top-style: double;\n  border-top-width: 6px;\n  border-top-color: #D3D3D3;\n}\n\n#hwbutsvkjg .gt_last_grand_summary_row_top {\n  padding-top: 8px;\n  padding-bottom: 8px;\n  padding-left: 5px;\n  padding-right: 5px;\n  border-bottom-style: double;\n  border-bottom-width: 6px;\n  border-bottom-color: #D3D3D3;\n}\n\n#hwbutsvkjg .gt_striped {\n  background-color: rgba(128, 128, 128, 0.05);\n}\n\n#hwbutsvkjg .gt_table_body {\n  border-top-style: solid;\n  border-top-width: 2px;\n  border-top-color: #D3D3D3;\n  border-bottom-style: solid;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n}\n\n#hwbutsvkjg .gt_footnotes {\n  color: #333333;\n  background-color: #FFFFFF;\n  border-bottom-style: none;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n  border-left-style: none;\n  border-left-width: 2px;\n  border-left-color: #D3D3D3;\n  border-right-style: none;\n  border-right-width: 2px;\n  border-right-color: #D3D3D3;\n}\n\n#hwbutsvkjg .gt_footnote {\n  margin: 0px;\n  font-size: 90%;\n  padding-top: 4px;\n  padding-bottom: 4px;\n  padding-left: 5px;\n  padding-right: 5px;\n}\n\n#hwbutsvkjg .gt_sourcenotes {\n  color: #333333;\n  background-color: #FFFFFF;\n  border-bottom-style: none;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n  border-left-style: none;\n  border-left-width: 2px;\n  border-left-color: #D3D3D3;\n  border-right-style: none;\n  border-right-width: 2px;\n  border-right-color: #D3D3D3;\n}\n\n#hwbutsvkjg .gt_sourcenote {\n  font-size: 90%;\n  padding-top: 4px;\n  padding-bottom: 4px;\n  padding-left: 5px;\n  padding-right: 5px;\n}\n\n#hwbutsvkjg .gt_left {\n  text-align: left;\n}\n\n#hwbutsvkjg .gt_center {\n  text-align: center;\n}\n\n#hwbutsvkjg .gt_right {\n  text-align: right;\n  font-variant-numeric: tabular-nums;\n}\n\n#hwbutsvkjg .gt_font_normal {\n  font-weight: normal;\n}\n\n#hwbutsvkjg .gt_font_bold {\n  font-weight: bold;\n}\n\n#hwbutsvkjg .gt_font_italic {\n  font-style: italic;\n}\n\n#hwbutsvkjg .gt_super {\n  font-size: 65%;\n}\n\n#hwbutsvkjg .gt_footnote_marks {\n  font-size: 75%;\n  vertical-align: 0.4em;\n  position: initial;\n}\n\n#hwbutsvkjg .gt_asterisk {\n  font-size: 100%;\n  vertical-align: 0;\n}\n\n#hwbutsvkjg .gt_indent_1 {\n  text-indent: 5px;\n}\n\n#hwbutsvkjg .gt_indent_2 {\n  text-indent: 10px;\n}\n\n#hwbutsvkjg .gt_indent_3 {\n  text-indent: 15px;\n}\n\n#hwbutsvkjg .gt_indent_4 {\n  text-indent: 20px;\n}\n\n#hwbutsvkjg .gt_indent_5 {\n  text-indent: 25px;\n}\n</style>\n<table class=\"gt_table\" data-quarto-disable-processing=\"false\" data-quarto-bootstrap=\"false\">\n  <thead>\n    \n    <tr class=\"gt_col_headings\">\n      <th class=\"gt_col_heading gt_columns_bottom_border gt_left\" rowspan=\"1\" colspan=\"1\" scope=\"col\" id=\"term\">term</th>\n      <th class=\"gt_col_heading gt_columns_bottom_border gt_right\" rowspan=\"1\" colspan=\"1\" scope=\"col\" id=\"estimate\">estimate</th>\n      <th class=\"gt_col_heading gt_columns_bottom_border gt_right\" rowspan=\"1\" colspan=\"1\" scope=\"col\" id=\"std.error\">std.error</th>\n      <th class=\"gt_col_heading gt_columns_bottom_border gt_right\" rowspan=\"1\" colspan=\"1\" scope=\"col\" id=\"statistic\">statistic</th>\n      <th class=\"gt_col_heading gt_columns_bottom_border gt_right\" rowspan=\"1\" colspan=\"1\" scope=\"col\" id=\"p.value\">p.value</th>\n      <th class=\"gt_col_heading gt_columns_bottom_border gt_right\" rowspan=\"1\" colspan=\"1\" scope=\"col\" id=\"conf.low\">conf.low</th>\n      <th class=\"gt_col_heading gt_columns_bottom_border gt_right\" rowspan=\"1\" colspan=\"1\" scope=\"col\" id=\"conf.high\">conf.high</th>\n    </tr>\n  </thead>\n  <tbody class=\"gt_table_body\">\n    <tr><td headers=\"term\" class=\"gt_row gt_left\">(Intercept)</td>\n<td headers=\"estimate\" class=\"gt_row gt_right\">37.5560</td>\n<td headers=\"std.error\" class=\"gt_row gt_right\">4.4083</td>\n<td headers=\"statistic\" class=\"gt_row gt_right\">8.5194</td>\n<td headers=\"p.value\" class=\"gt_row gt_right\">0.0000</td>\n<td headers=\"conf.low\" class=\"gt_row gt_right\">28.7410</td>\n<td headers=\"conf.high\" class=\"gt_row gt_right\">46.3710</td></tr>\n    <tr><td headers=\"term\" class=\"gt_row gt_left\">FemaleLiteracyRate</td>\n<td headers=\"estimate\" class=\"gt_row gt_right\">0.0020</td>\n<td headers=\"std.error\" class=\"gt_row gt_right\">0.0352</td>\n<td headers=\"statistic\" class=\"gt_row gt_right\">0.0580</td>\n<td headers=\"p.value\" class=\"gt_row gt_right\">0.9539</td>\n<td headers=\"conf.low\" class=\"gt_row gt_right\">−0.0684</td>\n<td headers=\"conf.high\" class=\"gt_row gt_right\">0.0725</td></tr>\n    <tr><td headers=\"term\" class=\"gt_row gt_left\">CO2emissions</td>\n<td headers=\"estimate\" class=\"gt_row gt_right\">−0.2860</td>\n<td headers=\"std.error\" class=\"gt_row gt_right\">0.1340</td>\n<td headers=\"statistic\" class=\"gt_row gt_right\">−2.1344</td>\n<td headers=\"p.value\" class=\"gt_row gt_right\">0.0368</td>\n<td headers=\"conf.low\" class=\"gt_row gt_right\">−0.5539</td>\n<td headers=\"conf.high\" class=\"gt_row gt_right\">−0.0181</td></tr>\n    <tr><td headers=\"term\" class=\"gt_row gt_left\">IncomePP</td>\n<td headers=\"estimate\" class=\"gt_row gt_right\">0.0002</td>\n<td headers=\"std.error\" class=\"gt_row gt_right\">0.0001</td>\n<td headers=\"statistic\" class=\"gt_row gt_right\">2.4133</td>\n<td headers=\"p.value\" class=\"gt_row gt_right\">0.0188</td>\n<td headers=\"conf.low\" class=\"gt_row gt_right\">0.0000</td>\n<td headers=\"conf.high\" class=\"gt_row gt_right\">0.0003</td></tr>\n    <tr><td headers=\"term\" class=\"gt_row gt_left\">four_regionsAmericas</td>\n<td headers=\"estimate\" class=\"gt_row gt_right\">9.8963</td>\n<td headers=\"std.error\" class=\"gt_row gt_right\">2.0031</td>\n<td headers=\"statistic\" class=\"gt_row gt_right\">4.9405</td>\n<td headers=\"p.value\" class=\"gt_row gt_right\">0.0000</td>\n<td headers=\"conf.low\" class=\"gt_row gt_right\">5.8909</td>\n<td headers=\"conf.high\" class=\"gt_row gt_right\">13.9017</td></tr>\n    <tr><td headers=\"term\" class=\"gt_row gt_left\">four_regionsAsia</td>\n<td headers=\"estimate\" class=\"gt_row gt_right\">5.7849</td>\n<td headers=\"std.error\" class=\"gt_row gt_right\">1.5993</td>\n<td headers=\"statistic\" class=\"gt_row gt_right\">3.6172</td>\n<td headers=\"p.value\" class=\"gt_row gt_right\">0.0006</td>\n<td headers=\"conf.low\" class=\"gt_row gt_right\">2.5870</td>\n<td headers=\"conf.high\" class=\"gt_row gt_right\">8.9829</td></tr>\n    <tr><td headers=\"term\" class=\"gt_row gt_left\">four_regionsEurope</td>\n<td headers=\"estimate\" class=\"gt_row gt_right\">7.1421</td>\n<td headers=\"std.error\" class=\"gt_row gt_right\">2.6994</td>\n<td headers=\"statistic\" class=\"gt_row gt_right\">2.6458</td>\n<td headers=\"p.value\" class=\"gt_row gt_right\">0.0104</td>\n<td headers=\"conf.low\" class=\"gt_row gt_right\">1.7442</td>\n<td headers=\"conf.high\" class=\"gt_row gt_right\">12.5399</td></tr>\n    <tr><td headers=\"term\" class=\"gt_row gt_left\">WaterSourcePrct</td>\n<td headers=\"estimate\" class=\"gt_row gt_right\">0.1377</td>\n<td headers=\"std.error\" class=\"gt_row gt_right\">0.0658</td>\n<td headers=\"statistic\" class=\"gt_row gt_right\">2.0928</td>\n<td headers=\"p.value\" class=\"gt_row gt_right\">0.0405</td>\n<td headers=\"conf.low\" class=\"gt_row gt_right\">0.0061</td>\n<td headers=\"conf.high\" class=\"gt_row gt_right\">0.2693</td></tr>\n    <tr><td headers=\"term\" class=\"gt_row gt_left\">FoodSupplykcPPD</td>\n<td headers=\"estimate\" class=\"gt_row gt_right\">0.0052</td>\n<td headers=\"std.error\" class=\"gt_row gt_right\">0.0021</td>\n<td headers=\"statistic\" class=\"gt_row gt_right\">2.4961</td>\n<td headers=\"p.value\" class=\"gt_row gt_right\">0.0153</td>\n<td headers=\"conf.low\" class=\"gt_row gt_right\">0.0010</td>\n<td headers=\"conf.high\" class=\"gt_row gt_right\">0.0093</td></tr>\n    <tr><td headers=\"term\" class=\"gt_row gt_left\">members_oecd_g77oecd</td>\n<td headers=\"estimate\" class=\"gt_row gt_right\">−0.3317</td>\n<td headers=\"std.error\" class=\"gt_row gt_right\">2.5476</td>\n<td headers=\"statistic\" class=\"gt_row gt_right\">−0.1302</td>\n<td headers=\"p.value\" class=\"gt_row gt_right\">0.8968</td>\n<td headers=\"conf.low\" class=\"gt_row gt_right\">−5.4259</td>\n<td headers=\"conf.high\" class=\"gt_row gt_right\">4.7625</td></tr>\n    <tr><td headers=\"term\" class=\"gt_row gt_left\">members_oecd_g77others</td>\n<td headers=\"estimate\" class=\"gt_row gt_right\">0.3341</td>\n<td headers=\"std.error\" class=\"gt_row gt_right\">2.2986</td>\n<td headers=\"statistic\" class=\"gt_row gt_right\">0.1453</td>\n<td headers=\"p.value\" class=\"gt_row gt_right\">0.8849</td>\n<td headers=\"conf.low\" class=\"gt_row gt_right\">−4.2622</td>\n<td headers=\"conf.high\" class=\"gt_row gt_right\">4.9304</td></tr>\n  </tbody>\n  \n  \n</table>\n</div>\n```\n:::\n:::\n\n\n## Step 3: Assess change in coefficient\n\n::: columns\n::: {.column width=\"48%\"}\n-   This is where we start identifying covariates that we might remove\n\n \n\n-   I would start by using the p-value to guide me towards specific variables\n\n    -   Female literacy rate, but that's our main covariate\n    -   `members_oecd_g77`\n    -   Maybe water source percent?\n\n \n\n-   Some people will say you can use the p-value alone\n\n    -   I like to double check that those variables do not have a large effect on the other coefficients\n:::\n\n::: {.column width=\"52%\"}\n\n::: {.cell}\n::: {.cell-output-display}\n```{=html}\n<div id=\"wbynjozpip\" style=\"padding-left:0px;padding-right:0px;padding-top:10px;padding-bottom:10px;overflow-x:auto;overflow-y:auto;width:auto;height:auto;\">\n<style>#wbynjozpip table {\n  font-family: system-ui, 'Segoe UI', Roboto, Helvetica, Arial, sans-serif, 'Apple Color Emoji', 'Segoe UI Emoji', 'Segoe UI Symbol', 'Noto Color Emoji';\n  -webkit-font-smoothing: antialiased;\n  -moz-osx-font-smoothing: grayscale;\n}\n\n#wbynjozpip thead, #wbynjozpip tbody, #wbynjozpip tfoot, #wbynjozpip tr, #wbynjozpip td, #wbynjozpip th {\n  border-style: none;\n}\n\n#wbynjozpip p {\n  margin: 0;\n  padding: 0;\n}\n\n#wbynjozpip .gt_table {\n  display: table;\n  border-collapse: collapse;\n  line-height: normal;\n  margin-left: auto;\n  margin-right: auto;\n  color: #333333;\n  font-size: 33px;\n  font-weight: normal;\n  font-style: normal;\n  background-color: #FFFFFF;\n  width: auto;\n  border-top-style: solid;\n  border-top-width: 2px;\n  border-top-color: #A8A8A8;\n  border-right-style: none;\n  border-right-width: 2px;\n  border-right-color: #D3D3D3;\n  border-bottom-style: solid;\n  border-bottom-width: 2px;\n  border-bottom-color: #A8A8A8;\n  border-left-style: none;\n  border-left-width: 2px;\n  border-left-color: #D3D3D3;\n}\n\n#wbynjozpip .gt_caption {\n  padding-top: 4px;\n  padding-bottom: 4px;\n}\n\n#wbynjozpip .gt_title {\n  color: #333333;\n  font-size: 125%;\n  font-weight: initial;\n  padding-top: 4px;\n  padding-bottom: 4px;\n  padding-left: 5px;\n  padding-right: 5px;\n  border-bottom-color: #FFFFFF;\n  border-bottom-width: 0;\n}\n\n#wbynjozpip .gt_subtitle {\n  color: #333333;\n  font-size: 85%;\n  font-weight: initial;\n  padding-top: 3px;\n  padding-bottom: 5px;\n  padding-left: 5px;\n  padding-right: 5px;\n  border-top-color: #FFFFFF;\n  border-top-width: 0;\n}\n\n#wbynjozpip .gt_heading {\n  background-color: #FFFFFF;\n  text-align: center;\n  border-bottom-color: #FFFFFF;\n  border-left-style: none;\n  border-left-width: 1px;\n  border-left-color: #D3D3D3;\n  border-right-style: none;\n  border-right-width: 1px;\n  border-right-color: #D3D3D3;\n}\n\n#wbynjozpip .gt_bottom_border {\n  border-bottom-style: solid;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n}\n\n#wbynjozpip .gt_col_headings {\n  border-top-style: solid;\n  border-top-width: 2px;\n  border-top-color: #D3D3D3;\n  border-bottom-style: solid;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n  border-left-style: none;\n  border-left-width: 1px;\n  border-left-color: #D3D3D3;\n  border-right-style: none;\n  border-right-width: 1px;\n  border-right-color: #D3D3D3;\n}\n\n#wbynjozpip .gt_col_heading {\n  color: #333333;\n  background-color: #FFFFFF;\n  font-size: 100%;\n  font-weight: normal;\n  text-transform: inherit;\n  border-left-style: none;\n  border-left-width: 1px;\n  border-left-color: #D3D3D3;\n  border-right-style: none;\n  border-right-width: 1px;\n  border-right-color: #D3D3D3;\n  vertical-align: bottom;\n  padding-top: 5px;\n  padding-bottom: 6px;\n  padding-left: 5px;\n  padding-right: 5px;\n  overflow-x: hidden;\n}\n\n#wbynjozpip .gt_column_spanner_outer {\n  color: #333333;\n  background-color: #FFFFFF;\n  font-size: 100%;\n  font-weight: normal;\n  text-transform: inherit;\n  padding-top: 0;\n  padding-bottom: 0;\n  padding-left: 4px;\n  padding-right: 4px;\n}\n\n#wbynjozpip .gt_column_spanner_outer:first-child {\n  padding-left: 0;\n}\n\n#wbynjozpip .gt_column_spanner_outer:last-child {\n  padding-right: 0;\n}\n\n#wbynjozpip .gt_column_spanner {\n  border-bottom-style: solid;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n  vertical-align: bottom;\n  padding-top: 5px;\n  padding-bottom: 5px;\n  overflow-x: hidden;\n  display: inline-block;\n  width: 100%;\n}\n\n#wbynjozpip .gt_spanner_row {\n  border-bottom-style: hidden;\n}\n\n#wbynjozpip .gt_group_heading {\n  padding-top: 8px;\n  padding-bottom: 8px;\n  padding-left: 5px;\n  padding-right: 5px;\n  color: #333333;\n  background-color: #FFFFFF;\n  font-size: 100%;\n  font-weight: initial;\n  text-transform: inherit;\n  border-top-style: solid;\n  border-top-width: 2px;\n  border-top-color: #D3D3D3;\n  border-bottom-style: solid;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n  border-left-style: none;\n  border-left-width: 1px;\n  border-left-color: #D3D3D3;\n  border-right-style: none;\n  border-right-width: 1px;\n  border-right-color: #D3D3D3;\n  vertical-align: middle;\n  text-align: left;\n}\n\n#wbynjozpip .gt_empty_group_heading {\n  padding: 0.5px;\n  color: #333333;\n  background-color: #FFFFFF;\n  font-size: 100%;\n  font-weight: initial;\n  border-top-style: solid;\n  border-top-width: 2px;\n  border-top-color: #D3D3D3;\n  border-bottom-style: solid;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n  vertical-align: middle;\n}\n\n#wbynjozpip .gt_from_md > :first-child {\n  margin-top: 0;\n}\n\n#wbynjozpip .gt_from_md > :last-child {\n  margin-bottom: 0;\n}\n\n#wbynjozpip .gt_row {\n  padding-top: 8px;\n  padding-bottom: 8px;\n  padding-left: 5px;\n  padding-right: 5px;\n  margin: 10px;\n  border-top-style: solid;\n  border-top-width: 1px;\n  border-top-color: #D3D3D3;\n  border-left-style: none;\n  border-left-width: 1px;\n  border-left-color: #D3D3D3;\n  border-right-style: none;\n  border-right-width: 1px;\n  border-right-color: #D3D3D3;\n  vertical-align: middle;\n  overflow-x: hidden;\n}\n\n#wbynjozpip .gt_stub {\n  color: #333333;\n  background-color: #FFFFFF;\n  font-size: 100%;\n  font-weight: initial;\n  text-transform: inherit;\n  border-right-style: solid;\n  border-right-width: 2px;\n  border-right-color: #D3D3D3;\n  padding-left: 5px;\n  padding-right: 5px;\n}\n\n#wbynjozpip .gt_stub_row_group {\n  color: #333333;\n  background-color: #FFFFFF;\n  font-size: 100%;\n  font-weight: initial;\n  text-transform: inherit;\n  border-right-style: solid;\n  border-right-width: 2px;\n  border-right-color: #D3D3D3;\n  padding-left: 5px;\n  padding-right: 5px;\n  vertical-align: top;\n}\n\n#wbynjozpip .gt_row_group_first td {\n  border-top-width: 2px;\n}\n\n#wbynjozpip .gt_row_group_first th {\n  border-top-width: 2px;\n}\n\n#wbynjozpip .gt_summary_row {\n  color: #333333;\n  background-color: #FFFFFF;\n  text-transform: inherit;\n  padding-top: 8px;\n  padding-bottom: 8px;\n  padding-left: 5px;\n  padding-right: 5px;\n}\n\n#wbynjozpip .gt_first_summary_row {\n  border-top-style: solid;\n  border-top-color: #D3D3D3;\n}\n\n#wbynjozpip .gt_first_summary_row.thick {\n  border-top-width: 2px;\n}\n\n#wbynjozpip .gt_last_summary_row {\n  padding-top: 8px;\n  padding-bottom: 8px;\n  padding-left: 5px;\n  padding-right: 5px;\n  border-bottom-style: solid;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n}\n\n#wbynjozpip .gt_grand_summary_row {\n  color: #333333;\n  background-color: #FFFFFF;\n  text-transform: inherit;\n  padding-top: 8px;\n  padding-bottom: 8px;\n  padding-left: 5px;\n  padding-right: 5px;\n}\n\n#wbynjozpip .gt_first_grand_summary_row {\n  padding-top: 8px;\n  padding-bottom: 8px;\n  padding-left: 5px;\n  padding-right: 5px;\n  border-top-style: double;\n  border-top-width: 6px;\n  border-top-color: #D3D3D3;\n}\n\n#wbynjozpip .gt_last_grand_summary_row_top {\n  padding-top: 8px;\n  padding-bottom: 8px;\n  padding-left: 5px;\n  padding-right: 5px;\n  border-bottom-style: double;\n  border-bottom-width: 6px;\n  border-bottom-color: #D3D3D3;\n}\n\n#wbynjozpip .gt_striped {\n  background-color: rgba(128, 128, 128, 0.05);\n}\n\n#wbynjozpip .gt_table_body {\n  border-top-style: solid;\n  border-top-width: 2px;\n  border-top-color: #D3D3D3;\n  border-bottom-style: solid;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n}\n\n#wbynjozpip .gt_footnotes {\n  color: #333333;\n  background-color: #FFFFFF;\n  border-bottom-style: none;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n  border-left-style: none;\n  border-left-width: 2px;\n  border-left-color: #D3D3D3;\n  border-right-style: none;\n  border-right-width: 2px;\n  border-right-color: #D3D3D3;\n}\n\n#wbynjozpip .gt_footnote {\n  margin: 0px;\n  font-size: 90%;\n  padding-top: 4px;\n  padding-bottom: 4px;\n  padding-left: 5px;\n  padding-right: 5px;\n}\n\n#wbynjozpip .gt_sourcenotes {\n  color: #333333;\n  background-color: #FFFFFF;\n  border-bottom-style: none;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n  border-left-style: none;\n  border-left-width: 2px;\n  border-left-color: #D3D3D3;\n  border-right-style: none;\n  border-right-width: 2px;\n  border-right-color: #D3D3D3;\n}\n\n#wbynjozpip .gt_sourcenote {\n  font-size: 90%;\n  padding-top: 4px;\n  padding-bottom: 4px;\n  padding-left: 5px;\n  padding-right: 5px;\n}\n\n#wbynjozpip .gt_left {\n  text-align: left;\n}\n\n#wbynjozpip .gt_center {\n  text-align: center;\n}\n\n#wbynjozpip .gt_right {\n  text-align: right;\n  font-variant-numeric: tabular-nums;\n}\n\n#wbynjozpip .gt_font_normal {\n  font-weight: normal;\n}\n\n#wbynjozpip .gt_font_bold {\n  font-weight: bold;\n}\n\n#wbynjozpip .gt_font_italic {\n  font-style: italic;\n}\n\n#wbynjozpip .gt_super {\n  font-size: 65%;\n}\n\n#wbynjozpip .gt_footnote_marks {\n  font-size: 75%;\n  vertical-align: 0.4em;\n  position: initial;\n}\n\n#wbynjozpip .gt_asterisk {\n  font-size: 100%;\n  vertical-align: 0;\n}\n\n#wbynjozpip .gt_indent_1 {\n  text-indent: 5px;\n}\n\n#wbynjozpip .gt_indent_2 {\n  text-indent: 10px;\n}\n\n#wbynjozpip .gt_indent_3 {\n  text-indent: 15px;\n}\n\n#wbynjozpip .gt_indent_4 {\n  text-indent: 20px;\n}\n\n#wbynjozpip .gt_indent_5 {\n  text-indent: 25px;\n}\n</style>\n<table class=\"gt_table\" data-quarto-disable-processing=\"false\" data-quarto-bootstrap=\"false\">\n  <thead>\n    \n    <tr class=\"gt_col_headings\">\n      <th class=\"gt_col_heading gt_columns_bottom_border gt_left\" rowspan=\"1\" colspan=\"1\" scope=\"col\" id=\"term\">term</th>\n      <th class=\"gt_col_heading gt_columns_bottom_border gt_right\" rowspan=\"1\" colspan=\"1\" scope=\"col\" id=\"estimate\">estimate</th>\n      <th class=\"gt_col_heading gt_columns_bottom_border gt_right\" rowspan=\"1\" colspan=\"1\" scope=\"col\" id=\"std.error\">std.error</th>\n      <th class=\"gt_col_heading gt_columns_bottom_border gt_right\" rowspan=\"1\" colspan=\"1\" scope=\"col\" id=\"statistic\">statistic</th>\n      <th class=\"gt_col_heading gt_columns_bottom_border gt_right\" rowspan=\"1\" colspan=\"1\" scope=\"col\" id=\"p.value\">p.value</th>\n    </tr>\n  </thead>\n  <tbody class=\"gt_table_body\">\n    <tr><td headers=\"term\" class=\"gt_row gt_left\">(Intercept)</td>\n<td headers=\"estimate\" class=\"gt_row gt_right\">37.5560</td>\n<td headers=\"std.error\" class=\"gt_row gt_right\">4.4083</td>\n<td headers=\"statistic\" class=\"gt_row gt_right\">8.5194</td>\n<td headers=\"p.value\" class=\"gt_row gt_right\">0.0000</td></tr>\n    <tr><td headers=\"term\" class=\"gt_row gt_left\">FemaleLiteracyRate</td>\n<td headers=\"estimate\" class=\"gt_row gt_right\">0.0020</td>\n<td headers=\"std.error\" class=\"gt_row gt_right\">0.0352</td>\n<td headers=\"statistic\" class=\"gt_row gt_right\">0.0580</td>\n<td headers=\"p.value\" class=\"gt_row gt_right\">0.9539</td></tr>\n    <tr><td headers=\"term\" class=\"gt_row gt_left\">CO2emissions</td>\n<td headers=\"estimate\" class=\"gt_row gt_right\">−0.2860</td>\n<td headers=\"std.error\" class=\"gt_row gt_right\">0.1340</td>\n<td headers=\"statistic\" class=\"gt_row gt_right\">−2.1344</td>\n<td headers=\"p.value\" class=\"gt_row gt_right\">0.0368</td></tr>\n    <tr><td headers=\"term\" class=\"gt_row gt_left\">IncomePP</td>\n<td headers=\"estimate\" class=\"gt_row gt_right\">0.0002</td>\n<td headers=\"std.error\" class=\"gt_row gt_right\">0.0001</td>\n<td headers=\"statistic\" class=\"gt_row gt_right\">2.4133</td>\n<td headers=\"p.value\" class=\"gt_row gt_right\">0.0188</td></tr>\n    <tr><td headers=\"term\" class=\"gt_row gt_left\">four_regionsAmericas</td>\n<td headers=\"estimate\" class=\"gt_row gt_right\">9.8963</td>\n<td headers=\"std.error\" class=\"gt_row gt_right\">2.0031</td>\n<td headers=\"statistic\" class=\"gt_row gt_right\">4.9405</td>\n<td headers=\"p.value\" class=\"gt_row gt_right\">0.0000</td></tr>\n    <tr><td headers=\"term\" class=\"gt_row gt_left\">four_regionsAsia</td>\n<td headers=\"estimate\" class=\"gt_row gt_right\">5.7849</td>\n<td headers=\"std.error\" class=\"gt_row gt_right\">1.5993</td>\n<td headers=\"statistic\" class=\"gt_row gt_right\">3.6172</td>\n<td headers=\"p.value\" class=\"gt_row gt_right\">0.0006</td></tr>\n    <tr><td headers=\"term\" class=\"gt_row gt_left\">four_regionsEurope</td>\n<td headers=\"estimate\" class=\"gt_row gt_right\">7.1421</td>\n<td headers=\"std.error\" class=\"gt_row gt_right\">2.6994</td>\n<td headers=\"statistic\" class=\"gt_row gt_right\">2.6458</td>\n<td headers=\"p.value\" class=\"gt_row gt_right\">0.0104</td></tr>\n    <tr><td headers=\"term\" class=\"gt_row gt_left\">WaterSourcePrct</td>\n<td headers=\"estimate\" class=\"gt_row gt_right\">0.1377</td>\n<td headers=\"std.error\" class=\"gt_row gt_right\">0.0658</td>\n<td headers=\"statistic\" class=\"gt_row gt_right\">2.0928</td>\n<td headers=\"p.value\" class=\"gt_row gt_right\">0.0405</td></tr>\n    <tr><td headers=\"term\" class=\"gt_row gt_left\">FoodSupplykcPPD</td>\n<td headers=\"estimate\" class=\"gt_row gt_right\">0.0052</td>\n<td headers=\"std.error\" class=\"gt_row gt_right\">0.0021</td>\n<td headers=\"statistic\" class=\"gt_row gt_right\">2.4961</td>\n<td headers=\"p.value\" class=\"gt_row gt_right\">0.0153</td></tr>\n    <tr><td headers=\"term\" class=\"gt_row gt_left\">members_oecd_g77oecd</td>\n<td headers=\"estimate\" class=\"gt_row gt_right\">−0.3317</td>\n<td headers=\"std.error\" class=\"gt_row gt_right\">2.5476</td>\n<td headers=\"statistic\" class=\"gt_row gt_right\">−0.1302</td>\n<td headers=\"p.value\" class=\"gt_row gt_right\">0.8968</td></tr>\n    <tr><td headers=\"term\" class=\"gt_row gt_left\">members_oecd_g77others</td>\n<td headers=\"estimate\" class=\"gt_row gt_right\">0.3341</td>\n<td headers=\"std.error\" class=\"gt_row gt_right\">2.2986</td>\n<td headers=\"statistic\" class=\"gt_row gt_right\">0.1453</td>\n<td headers=\"p.value\" class=\"gt_row gt_right\">0.8849</td></tr>\n  </tbody>\n  \n  \n</table>\n</div>\n```\n:::\n:::\n\n:::\n:::\n\n## Step 3: Assess change in coefficient\n\n-   Very similar to the process we used when looking at confounders\n\n \n\n-   One variable at a time, we run the multivariable model with and without the variable\n\n    -   We look at the p-value of the F-test for the coefficients of said variable\n    -   We look at the percent change for the coefficient ($\\Delta\\%$) of our explanatory variable\n\n \n\n-   General rule: We can remove a variable if...\n\n    -   p-value \\> 0.05 for the F-test of its own coefficients\n    -   AND change in coefficient ($\\Delta\\%$) of our explanatory variable is \\< 10%\n\n## Step 3: Assess change in coefficient\n\n-   Let's try this out on `members_oecd_g77`\n\n\n::: {.cell}\n\n```{.r .cell-code  code-fold=\"true\" code-summary=\"Display the ANOVA table with F-statistic and p-value\"}\nmodel_full = init_model\nmodel_red = lm(LifeExpectancyYrs ~ FemaleLiteracyRate + CO2emissions + IncomePP +\n               four_regions + WaterSourcePrct + FoodSupplykcPPD, \n                 data = gapm2)\nanova(model_full, model_red) %>% tidy() %>% \n  gt() %>% tab_options(table.font.size = 35) %>% fmt_number(decimals = 3)\n```\n\n::: {.cell-output-display}\n```{=html}\n<div id=\"nlykdttijl\" style=\"padding-left:0px;padding-right:0px;padding-top:10px;padding-bottom:10px;overflow-x:auto;overflow-y:auto;width:auto;height:auto;\">\n<style>#nlykdttijl table {\n  font-family: system-ui, 'Segoe UI', Roboto, Helvetica, Arial, sans-serif, 'Apple Color Emoji', 'Segoe UI Emoji', 'Segoe UI Symbol', 'Noto Color Emoji';\n  -webkit-font-smoothing: antialiased;\n  -moz-osx-font-smoothing: grayscale;\n}\n\n#nlykdttijl thead, #nlykdttijl tbody, #nlykdttijl tfoot, #nlykdttijl tr, #nlykdttijl td, #nlykdttijl th {\n  border-style: none;\n}\n\n#nlykdttijl p {\n  margin: 0;\n  padding: 0;\n}\n\n#nlykdttijl .gt_table {\n  display: table;\n  border-collapse: collapse;\n  line-height: normal;\n  margin-left: auto;\n  margin-right: auto;\n  color: #333333;\n  font-size: 35px;\n  font-weight: normal;\n  font-style: normal;\n  background-color: #FFFFFF;\n  width: auto;\n  border-top-style: solid;\n  border-top-width: 2px;\n  border-top-color: #A8A8A8;\n  border-right-style: none;\n  border-right-width: 2px;\n  border-right-color: #D3D3D3;\n  border-bottom-style: solid;\n  border-bottom-width: 2px;\n  border-bottom-color: #A8A8A8;\n  border-left-style: none;\n  border-left-width: 2px;\n  border-left-color: #D3D3D3;\n}\n\n#nlykdttijl .gt_caption {\n  padding-top: 4px;\n  padding-bottom: 4px;\n}\n\n#nlykdttijl .gt_title {\n  color: #333333;\n  font-size: 125%;\n  font-weight: initial;\n  padding-top: 4px;\n  padding-bottom: 4px;\n  padding-left: 5px;\n  padding-right: 5px;\n  border-bottom-color: #FFFFFF;\n  border-bottom-width: 0;\n}\n\n#nlykdttijl .gt_subtitle {\n  color: #333333;\n  font-size: 85%;\n  font-weight: initial;\n  padding-top: 3px;\n  padding-bottom: 5px;\n  padding-left: 5px;\n  padding-right: 5px;\n  border-top-color: #FFFFFF;\n  border-top-width: 0;\n}\n\n#nlykdttijl .gt_heading {\n  background-color: #FFFFFF;\n  text-align: center;\n  border-bottom-color: #FFFFFF;\n  border-left-style: none;\n  border-left-width: 1px;\n  border-left-color: #D3D3D3;\n  border-right-style: none;\n  border-right-width: 1px;\n  border-right-color: #D3D3D3;\n}\n\n#nlykdttijl .gt_bottom_border {\n  border-bottom-style: solid;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n}\n\n#nlykdttijl .gt_col_headings {\n  border-top-style: solid;\n  border-top-width: 2px;\n  border-top-color: #D3D3D3;\n  border-bottom-style: solid;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n  border-left-style: none;\n  border-left-width: 1px;\n  border-left-color: #D3D3D3;\n  border-right-style: none;\n  border-right-width: 1px;\n  border-right-color: #D3D3D3;\n}\n\n#nlykdttijl .gt_col_heading {\n  color: #333333;\n  background-color: #FFFFFF;\n  font-size: 100%;\n  font-weight: normal;\n  text-transform: inherit;\n  border-left-style: none;\n  border-left-width: 1px;\n  border-left-color: #D3D3D3;\n  border-right-style: none;\n  border-right-width: 1px;\n  border-right-color: #D3D3D3;\n  vertical-align: bottom;\n  padding-top: 5px;\n  padding-bottom: 6px;\n  padding-left: 5px;\n  padding-right: 5px;\n  overflow-x: hidden;\n}\n\n#nlykdttijl .gt_column_spanner_outer {\n  color: #333333;\n  background-color: #FFFFFF;\n  font-size: 100%;\n  font-weight: normal;\n  text-transform: inherit;\n  padding-top: 0;\n  padding-bottom: 0;\n  padding-left: 4px;\n  padding-right: 4px;\n}\n\n#nlykdttijl .gt_column_spanner_outer:first-child {\n  padding-left: 0;\n}\n\n#nlykdttijl .gt_column_spanner_outer:last-child {\n  padding-right: 0;\n}\n\n#nlykdttijl .gt_column_spanner {\n  border-bottom-style: solid;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n  vertical-align: bottom;\n  padding-top: 5px;\n  padding-bottom: 5px;\n  overflow-x: hidden;\n  display: inline-block;\n  width: 100%;\n}\n\n#nlykdttijl .gt_spanner_row {\n  border-bottom-style: hidden;\n}\n\n#nlykdttijl .gt_group_heading {\n  padding-top: 8px;\n  padding-bottom: 8px;\n  padding-left: 5px;\n  padding-right: 5px;\n  color: #333333;\n  background-color: #FFFFFF;\n  font-size: 100%;\n  font-weight: initial;\n  text-transform: inherit;\n  border-top-style: solid;\n  border-top-width: 2px;\n  border-top-color: #D3D3D3;\n  border-bottom-style: solid;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n  border-left-style: none;\n  border-left-width: 1px;\n  border-left-color: #D3D3D3;\n  border-right-style: none;\n  border-right-width: 1px;\n  border-right-color: #D3D3D3;\n  vertical-align: middle;\n  text-align: left;\n}\n\n#nlykdttijl .gt_empty_group_heading {\n  padding: 0.5px;\n  color: #333333;\n  background-color: #FFFFFF;\n  font-size: 100%;\n  font-weight: initial;\n  border-top-style: solid;\n  border-top-width: 2px;\n  border-top-color: #D3D3D3;\n  border-bottom-style: solid;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n  vertical-align: middle;\n}\n\n#nlykdttijl .gt_from_md > :first-child {\n  margin-top: 0;\n}\n\n#nlykdttijl .gt_from_md > :last-child {\n  margin-bottom: 0;\n}\n\n#nlykdttijl .gt_row {\n  padding-top: 8px;\n  padding-bottom: 8px;\n  padding-left: 5px;\n  padding-right: 5px;\n  margin: 10px;\n  border-top-style: solid;\n  border-top-width: 1px;\n  border-top-color: #D3D3D3;\n  border-left-style: none;\n  border-left-width: 1px;\n  border-left-color: #D3D3D3;\n  border-right-style: none;\n  border-right-width: 1px;\n  border-right-color: #D3D3D3;\n  vertical-align: middle;\n  overflow-x: hidden;\n}\n\n#nlykdttijl .gt_stub {\n  color: #333333;\n  background-color: #FFFFFF;\n  font-size: 100%;\n  font-weight: initial;\n  text-transform: inherit;\n  border-right-style: solid;\n  border-right-width: 2px;\n  border-right-color: #D3D3D3;\n  padding-left: 5px;\n  padding-right: 5px;\n}\n\n#nlykdttijl .gt_stub_row_group {\n  color: #333333;\n  background-color: #FFFFFF;\n  font-size: 100%;\n  font-weight: initial;\n  text-transform: inherit;\n  border-right-style: solid;\n  border-right-width: 2px;\n  border-right-color: #D3D3D3;\n  padding-left: 5px;\n  padding-right: 5px;\n  vertical-align: top;\n}\n\n#nlykdttijl .gt_row_group_first td {\n  border-top-width: 2px;\n}\n\n#nlykdttijl .gt_row_group_first th {\n  border-top-width: 2px;\n}\n\n#nlykdttijl .gt_summary_row {\n  color: #333333;\n  background-color: #FFFFFF;\n  text-transform: inherit;\n  padding-top: 8px;\n  padding-bottom: 8px;\n  padding-left: 5px;\n  padding-right: 5px;\n}\n\n#nlykdttijl .gt_first_summary_row {\n  border-top-style: solid;\n  border-top-color: #D3D3D3;\n}\n\n#nlykdttijl .gt_first_summary_row.thick {\n  border-top-width: 2px;\n}\n\n#nlykdttijl .gt_last_summary_row {\n  padding-top: 8px;\n  padding-bottom: 8px;\n  padding-left: 5px;\n  padding-right: 5px;\n  border-bottom-style: solid;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n}\n\n#nlykdttijl .gt_grand_summary_row {\n  color: #333333;\n  background-color: #FFFFFF;\n  text-transform: inherit;\n  padding-top: 8px;\n  padding-bottom: 8px;\n  padding-left: 5px;\n  padding-right: 5px;\n}\n\n#nlykdttijl .gt_first_grand_summary_row {\n  padding-top: 8px;\n  padding-bottom: 8px;\n  padding-left: 5px;\n  padding-right: 5px;\n  border-top-style: double;\n  border-top-width: 6px;\n  border-top-color: #D3D3D3;\n}\n\n#nlykdttijl .gt_last_grand_summary_row_top {\n  padding-top: 8px;\n  padding-bottom: 8px;\n  padding-left: 5px;\n  padding-right: 5px;\n  border-bottom-style: double;\n  border-bottom-width: 6px;\n  border-bottom-color: #D3D3D3;\n}\n\n#nlykdttijl .gt_striped {\n  background-color: rgba(128, 128, 128, 0.05);\n}\n\n#nlykdttijl .gt_table_body {\n  border-top-style: solid;\n  border-top-width: 2px;\n  border-top-color: #D3D3D3;\n  border-bottom-style: solid;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n}\n\n#nlykdttijl .gt_footnotes {\n  color: #333333;\n  background-color: #FFFFFF;\n  border-bottom-style: none;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n  border-left-style: none;\n  border-left-width: 2px;\n  border-left-color: #D3D3D3;\n  border-right-style: none;\n  border-right-width: 2px;\n  border-right-color: #D3D3D3;\n}\n\n#nlykdttijl .gt_footnote {\n  margin: 0px;\n  font-size: 90%;\n  padding-top: 4px;\n  padding-bottom: 4px;\n  padding-left: 5px;\n  padding-right: 5px;\n}\n\n#nlykdttijl .gt_sourcenotes {\n  color: #333333;\n  background-color: #FFFFFF;\n  border-bottom-style: none;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n  border-left-style: none;\n  border-left-width: 2px;\n  border-left-color: #D3D3D3;\n  border-right-style: none;\n  border-right-width: 2px;\n  border-right-color: #D3D3D3;\n}\n\n#nlykdttijl .gt_sourcenote {\n  font-size: 90%;\n  padding-top: 4px;\n  padding-bottom: 4px;\n  padding-left: 5px;\n  padding-right: 5px;\n}\n\n#nlykdttijl .gt_left {\n  text-align: left;\n}\n\n#nlykdttijl .gt_center {\n  text-align: center;\n}\n\n#nlykdttijl .gt_right {\n  text-align: right;\n  font-variant-numeric: tabular-nums;\n}\n\n#nlykdttijl .gt_font_normal {\n  font-weight: normal;\n}\n\n#nlykdttijl .gt_font_bold {\n  font-weight: bold;\n}\n\n#nlykdttijl .gt_font_italic {\n  font-style: italic;\n}\n\n#nlykdttijl .gt_super {\n  font-size: 65%;\n}\n\n#nlykdttijl .gt_footnote_marks {\n  font-size: 75%;\n  vertical-align: 0.4em;\n  position: initial;\n}\n\n#nlykdttijl .gt_asterisk {\n  font-size: 100%;\n  vertical-align: 0;\n}\n\n#nlykdttijl .gt_indent_1 {\n  text-indent: 5px;\n}\n\n#nlykdttijl .gt_indent_2 {\n  text-indent: 10px;\n}\n\n#nlykdttijl .gt_indent_3 {\n  text-indent: 15px;\n}\n\n#nlykdttijl .gt_indent_4 {\n  text-indent: 20px;\n}\n\n#nlykdttijl .gt_indent_5 {\n  text-indent: 25px;\n}\n</style>\n<table class=\"gt_table\" data-quarto-disable-processing=\"false\" data-quarto-bootstrap=\"false\">\n  <thead>\n    \n    <tr class=\"gt_col_headings\">\n      <th class=\"gt_col_heading gt_columns_bottom_border gt_left\" rowspan=\"1\" colspan=\"1\" scope=\"col\" id=\"term\">term</th>\n      <th class=\"gt_col_heading gt_columns_bottom_border gt_right\" rowspan=\"1\" colspan=\"1\" scope=\"col\" id=\"df.residual\">df.residual</th>\n      <th class=\"gt_col_heading gt_columns_bottom_border gt_right\" rowspan=\"1\" colspan=\"1\" scope=\"col\" id=\"rss\">rss</th>\n      <th class=\"gt_col_heading gt_columns_bottom_border gt_right\" rowspan=\"1\" colspan=\"1\" scope=\"col\" id=\"df\">df</th>\n      <th class=\"gt_col_heading gt_columns_bottom_border gt_right\" rowspan=\"1\" colspan=\"1\" scope=\"col\" id=\"sumsq\">sumsq</th>\n      <th class=\"gt_col_heading gt_columns_bottom_border gt_right\" rowspan=\"1\" colspan=\"1\" scope=\"col\" id=\"statistic\">statistic</th>\n      <th class=\"gt_col_heading gt_columns_bottom_border gt_right\" rowspan=\"1\" colspan=\"1\" scope=\"col\" id=\"p.value\">p.value</th>\n    </tr>\n  </thead>\n  <tbody class=\"gt_table_body\">\n    <tr><td headers=\"term\" class=\"gt_row gt_left\">LifeExpectancyYrs ~ FemaleLiteracyRate + CO2emissions + IncomePP + four_regions + WaterSourcePrct + FoodSupplykcPPD + members_oecd_g77</td>\n<td headers=\"df.residual\" class=\"gt_row gt_right\">61.000</td>\n<td headers=\"rss\" class=\"gt_row gt_right\">999.201</td>\n<td headers=\"df\" class=\"gt_row gt_right\">NA</td>\n<td headers=\"sumsq\" class=\"gt_row gt_right\">NA</td>\n<td headers=\"statistic\" class=\"gt_row gt_right\">NA</td>\n<td headers=\"p.value\" class=\"gt_row gt_right\">NA</td></tr>\n    <tr><td headers=\"term\" class=\"gt_row gt_left\">LifeExpectancyYrs ~ FemaleLiteracyRate + CO2emissions + IncomePP + four_regions + WaterSourcePrct + FoodSupplykcPPD</td>\n<td headers=\"df.residual\" class=\"gt_row gt_right\">63.000</td>\n<td headers=\"rss\" class=\"gt_row gt_right\">1,000.988</td>\n<td headers=\"df\" class=\"gt_row gt_right\">−2.000</td>\n<td headers=\"sumsq\" class=\"gt_row gt_right\">−1.787</td>\n<td headers=\"statistic\" class=\"gt_row gt_right\">0.055</td>\n<td headers=\"p.value\" class=\"gt_row gt_right\">0.947</td></tr>\n  </tbody>\n  \n  \n</table>\n</div>\n```\n:::\n:::\n\n\n\n\n-   $\\widehat\\beta_{FLR, full} = 0.002$, $\\widehat\\beta_{FLR, red} = 0.0036$\n\n$$\n\\Delta\\% = 100\\% \\cdot \\frac{\\widehat\\beta_{FLR, full} - \\widehat\\beta_{FLR, red}}{\\widehat\\beta_{FLR, full}} = 100\\% \\cdot \\frac{0.002 - 0.0036}{0.002} = -74.41\\%\n$$\n\n-   Based off the percent change, I would keep this in the model\n\n## Step 3: Assess change in coefficient\n\n-   Let's try this out on water source percent (even though the p-value was \\< 0.05)\n\n\n::: {.cell}\n\n```{.r .cell-code  code-fold=\"true\" code-summary=\"Display the ANOVA table with F-statistic and p-value\"}\nmodel_full = init_model\nmodel_red = lm(LifeExpectancyYrs ~ FemaleLiteracyRate + CO2emissions + IncomePP +\n               four_regions + members_oecd_g77 + FoodSupplykcPPD, \n                 data = gapm2)\nanova(model_full, model_red) %>% tidy() %>% \n  gt() %>% tab_options(table.font.size = 35) %>% fmt_number(decimals = 3)\n```\n\n::: {.cell-output-display}\n```{=html}\n<div id=\"qcdiphbbfu\" style=\"padding-left:0px;padding-right:0px;padding-top:10px;padding-bottom:10px;overflow-x:auto;overflow-y:auto;width:auto;height:auto;\">\n<style>#qcdiphbbfu table {\n  font-family: system-ui, 'Segoe UI', Roboto, Helvetica, Arial, sans-serif, 'Apple Color Emoji', 'Segoe UI Emoji', 'Segoe UI Symbol', 'Noto Color Emoji';\n  -webkit-font-smoothing: antialiased;\n  -moz-osx-font-smoothing: grayscale;\n}\n\n#qcdiphbbfu thead, #qcdiphbbfu tbody, #qcdiphbbfu tfoot, #qcdiphbbfu tr, #qcdiphbbfu td, #qcdiphbbfu th {\n  border-style: none;\n}\n\n#qcdiphbbfu p {\n  margin: 0;\n  padding: 0;\n}\n\n#qcdiphbbfu .gt_table {\n  display: table;\n  border-collapse: collapse;\n  line-height: normal;\n  margin-left: auto;\n  margin-right: auto;\n  color: #333333;\n  font-size: 35px;\n  font-weight: normal;\n  font-style: normal;\n  background-color: #FFFFFF;\n  width: auto;\n  border-top-style: solid;\n  border-top-width: 2px;\n  border-top-color: #A8A8A8;\n  border-right-style: none;\n  border-right-width: 2px;\n  border-right-color: #D3D3D3;\n  border-bottom-style: solid;\n  border-bottom-width: 2px;\n  border-bottom-color: #A8A8A8;\n  border-left-style: none;\n  border-left-width: 2px;\n  border-left-color: #D3D3D3;\n}\n\n#qcdiphbbfu .gt_caption {\n  padding-top: 4px;\n  padding-bottom: 4px;\n}\n\n#qcdiphbbfu .gt_title {\n  color: #333333;\n  font-size: 125%;\n  font-weight: initial;\n  padding-top: 4px;\n  padding-bottom: 4px;\n  padding-left: 5px;\n  padding-right: 5px;\n  border-bottom-color: #FFFFFF;\n  border-bottom-width: 0;\n}\n\n#qcdiphbbfu .gt_subtitle {\n  color: #333333;\n  font-size: 85%;\n  font-weight: initial;\n  padding-top: 3px;\n  padding-bottom: 5px;\n  padding-left: 5px;\n  padding-right: 5px;\n  border-top-color: #FFFFFF;\n  border-top-width: 0;\n}\n\n#qcdiphbbfu .gt_heading {\n  background-color: #FFFFFF;\n  text-align: center;\n  border-bottom-color: #FFFFFF;\n  border-left-style: none;\n  border-left-width: 1px;\n  border-left-color: #D3D3D3;\n  border-right-style: none;\n  border-right-width: 1px;\n  border-right-color: #D3D3D3;\n}\n\n#qcdiphbbfu .gt_bottom_border {\n  border-bottom-style: solid;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n}\n\n#qcdiphbbfu .gt_col_headings {\n  border-top-style: solid;\n  border-top-width: 2px;\n  border-top-color: #D3D3D3;\n  border-bottom-style: solid;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n  border-left-style: none;\n  border-left-width: 1px;\n  border-left-color: #D3D3D3;\n  border-right-style: none;\n  border-right-width: 1px;\n  border-right-color: #D3D3D3;\n}\n\n#qcdiphbbfu .gt_col_heading {\n  color: #333333;\n  background-color: #FFFFFF;\n  font-size: 100%;\n  font-weight: normal;\n  text-transform: inherit;\n  border-left-style: none;\n  border-left-width: 1px;\n  border-left-color: #D3D3D3;\n  border-right-style: none;\n  border-right-width: 1px;\n  border-right-color: #D3D3D3;\n  vertical-align: bottom;\n  padding-top: 5px;\n  padding-bottom: 6px;\n  padding-left: 5px;\n  padding-right: 5px;\n  overflow-x: hidden;\n}\n\n#qcdiphbbfu .gt_column_spanner_outer {\n  color: #333333;\n  background-color: #FFFFFF;\n  font-size: 100%;\n  font-weight: normal;\n  text-transform: inherit;\n  padding-top: 0;\n  padding-bottom: 0;\n  padding-left: 4px;\n  padding-right: 4px;\n}\n\n#qcdiphbbfu .gt_column_spanner_outer:first-child {\n  padding-left: 0;\n}\n\n#qcdiphbbfu .gt_column_spanner_outer:last-child {\n  padding-right: 0;\n}\n\n#qcdiphbbfu .gt_column_spanner {\n  border-bottom-style: solid;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n  vertical-align: bottom;\n  padding-top: 5px;\n  padding-bottom: 5px;\n  overflow-x: hidden;\n  display: inline-block;\n  width: 100%;\n}\n\n#qcdiphbbfu .gt_spanner_row {\n  border-bottom-style: hidden;\n}\n\n#qcdiphbbfu .gt_group_heading {\n  padding-top: 8px;\n  padding-bottom: 8px;\n  padding-left: 5px;\n  padding-right: 5px;\n  color: #333333;\n  background-color: #FFFFFF;\n  font-size: 100%;\n  font-weight: initial;\n  text-transform: inherit;\n  border-top-style: solid;\n  border-top-width: 2px;\n  border-top-color: #D3D3D3;\n  border-bottom-style: solid;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n  border-left-style: none;\n  border-left-width: 1px;\n  border-left-color: #D3D3D3;\n  border-right-style: none;\n  border-right-width: 1px;\n  border-right-color: #D3D3D3;\n  vertical-align: middle;\n  text-align: left;\n}\n\n#qcdiphbbfu .gt_empty_group_heading {\n  padding: 0.5px;\n  color: #333333;\n  background-color: #FFFFFF;\n  font-size: 100%;\n  font-weight: initial;\n  border-top-style: solid;\n  border-top-width: 2px;\n  border-top-color: #D3D3D3;\n  border-bottom-style: solid;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n  vertical-align: middle;\n}\n\n#qcdiphbbfu .gt_from_md > :first-child {\n  margin-top: 0;\n}\n\n#qcdiphbbfu .gt_from_md > :last-child {\n  margin-bottom: 0;\n}\n\n#qcdiphbbfu .gt_row {\n  padding-top: 8px;\n  padding-bottom: 8px;\n  padding-left: 5px;\n  padding-right: 5px;\n  margin: 10px;\n  border-top-style: solid;\n  border-top-width: 1px;\n  border-top-color: #D3D3D3;\n  border-left-style: none;\n  border-left-width: 1px;\n  border-left-color: #D3D3D3;\n  border-right-style: none;\n  border-right-width: 1px;\n  border-right-color: #D3D3D3;\n  vertical-align: middle;\n  overflow-x: hidden;\n}\n\n#qcdiphbbfu .gt_stub {\n  color: #333333;\n  background-color: #FFFFFF;\n  font-size: 100%;\n  font-weight: initial;\n  text-transform: inherit;\n  border-right-style: solid;\n  border-right-width: 2px;\n  border-right-color: #D3D3D3;\n  padding-left: 5px;\n  padding-right: 5px;\n}\n\n#qcdiphbbfu .gt_stub_row_group {\n  color: #333333;\n  background-color: #FFFFFF;\n  font-size: 100%;\n  font-weight: initial;\n  text-transform: inherit;\n  border-right-style: solid;\n  border-right-width: 2px;\n  border-right-color: #D3D3D3;\n  padding-left: 5px;\n  padding-right: 5px;\n  vertical-align: top;\n}\n\n#qcdiphbbfu .gt_row_group_first td {\n  border-top-width: 2px;\n}\n\n#qcdiphbbfu .gt_row_group_first th {\n  border-top-width: 2px;\n}\n\n#qcdiphbbfu .gt_summary_row {\n  color: #333333;\n  background-color: #FFFFFF;\n  text-transform: inherit;\n  padding-top: 8px;\n  padding-bottom: 8px;\n  padding-left: 5px;\n  padding-right: 5px;\n}\n\n#qcdiphbbfu .gt_first_summary_row {\n  border-top-style: solid;\n  border-top-color: #D3D3D3;\n}\n\n#qcdiphbbfu .gt_first_summary_row.thick {\n  border-top-width: 2px;\n}\n\n#qcdiphbbfu .gt_last_summary_row {\n  padding-top: 8px;\n  padding-bottom: 8px;\n  padding-left: 5px;\n  padding-right: 5px;\n  border-bottom-style: solid;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n}\n\n#qcdiphbbfu .gt_grand_summary_row {\n  color: #333333;\n  background-color: #FFFFFF;\n  text-transform: inherit;\n  padding-top: 8px;\n  padding-bottom: 8px;\n  padding-left: 5px;\n  padding-right: 5px;\n}\n\n#qcdiphbbfu .gt_first_grand_summary_row {\n  padding-top: 8px;\n  padding-bottom: 8px;\n  padding-left: 5px;\n  padding-right: 5px;\n  border-top-style: double;\n  border-top-width: 6px;\n  border-top-color: #D3D3D3;\n}\n\n#qcdiphbbfu .gt_last_grand_summary_row_top {\n  padding-top: 8px;\n  padding-bottom: 8px;\n  padding-left: 5px;\n  padding-right: 5px;\n  border-bottom-style: double;\n  border-bottom-width: 6px;\n  border-bottom-color: #D3D3D3;\n}\n\n#qcdiphbbfu .gt_striped {\n  background-color: rgba(128, 128, 128, 0.05);\n}\n\n#qcdiphbbfu .gt_table_body {\n  border-top-style: solid;\n  border-top-width: 2px;\n  border-top-color: #D3D3D3;\n  border-bottom-style: solid;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n}\n\n#qcdiphbbfu .gt_footnotes {\n  color: #333333;\n  background-color: #FFFFFF;\n  border-bottom-style: none;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n  border-left-style: none;\n  border-left-width: 2px;\n  border-left-color: #D3D3D3;\n  border-right-style: none;\n  border-right-width: 2px;\n  border-right-color: #D3D3D3;\n}\n\n#qcdiphbbfu .gt_footnote {\n  margin: 0px;\n  font-size: 90%;\n  padding-top: 4px;\n  padding-bottom: 4px;\n  padding-left: 5px;\n  padding-right: 5px;\n}\n\n#qcdiphbbfu .gt_sourcenotes {\n  color: #333333;\n  background-color: #FFFFFF;\n  border-bottom-style: none;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n  border-left-style: none;\n  border-left-width: 2px;\n  border-left-color: #D3D3D3;\n  border-right-style: none;\n  border-right-width: 2px;\n  border-right-color: #D3D3D3;\n}\n\n#qcdiphbbfu .gt_sourcenote {\n  font-size: 90%;\n  padding-top: 4px;\n  padding-bottom: 4px;\n  padding-left: 5px;\n  padding-right: 5px;\n}\n\n#qcdiphbbfu .gt_left {\n  text-align: left;\n}\n\n#qcdiphbbfu .gt_center {\n  text-align: center;\n}\n\n#qcdiphbbfu .gt_right {\n  text-align: right;\n  font-variant-numeric: tabular-nums;\n}\n\n#qcdiphbbfu .gt_font_normal {\n  font-weight: normal;\n}\n\n#qcdiphbbfu .gt_font_bold {\n  font-weight: bold;\n}\n\n#qcdiphbbfu .gt_font_italic {\n  font-style: italic;\n}\n\n#qcdiphbbfu .gt_super {\n  font-size: 65%;\n}\n\n#qcdiphbbfu .gt_footnote_marks {\n  font-size: 75%;\n  vertical-align: 0.4em;\n  position: initial;\n}\n\n#qcdiphbbfu .gt_asterisk {\n  font-size: 100%;\n  vertical-align: 0;\n}\n\n#qcdiphbbfu .gt_indent_1 {\n  text-indent: 5px;\n}\n\n#qcdiphbbfu .gt_indent_2 {\n  text-indent: 10px;\n}\n\n#qcdiphbbfu .gt_indent_3 {\n  text-indent: 15px;\n}\n\n#qcdiphbbfu .gt_indent_4 {\n  text-indent: 20px;\n}\n\n#qcdiphbbfu .gt_indent_5 {\n  text-indent: 25px;\n}\n</style>\n<table class=\"gt_table\" data-quarto-disable-processing=\"false\" data-quarto-bootstrap=\"false\">\n  <thead>\n    \n    <tr class=\"gt_col_headings\">\n      <th class=\"gt_col_heading gt_columns_bottom_border gt_left\" rowspan=\"1\" colspan=\"1\" scope=\"col\" id=\"term\">term</th>\n      <th class=\"gt_col_heading gt_columns_bottom_border gt_right\" rowspan=\"1\" colspan=\"1\" scope=\"col\" id=\"df.residual\">df.residual</th>\n      <th class=\"gt_col_heading gt_columns_bottom_border gt_right\" rowspan=\"1\" colspan=\"1\" scope=\"col\" id=\"rss\">rss</th>\n      <th class=\"gt_col_heading gt_columns_bottom_border gt_right\" rowspan=\"1\" colspan=\"1\" scope=\"col\" id=\"df\">df</th>\n      <th class=\"gt_col_heading gt_columns_bottom_border gt_right\" rowspan=\"1\" colspan=\"1\" scope=\"col\" id=\"sumsq\">sumsq</th>\n      <th class=\"gt_col_heading gt_columns_bottom_border gt_right\" rowspan=\"1\" colspan=\"1\" scope=\"col\" id=\"statistic\">statistic</th>\n      <th class=\"gt_col_heading gt_columns_bottom_border gt_right\" rowspan=\"1\" colspan=\"1\" scope=\"col\" id=\"p.value\">p.value</th>\n    </tr>\n  </thead>\n  <tbody class=\"gt_table_body\">\n    <tr><td headers=\"term\" class=\"gt_row gt_left\">LifeExpectancyYrs ~ FemaleLiteracyRate + CO2emissions + IncomePP + four_regions + WaterSourcePrct + FoodSupplykcPPD + members_oecd_g77</td>\n<td headers=\"df.residual\" class=\"gt_row gt_right\">61.000</td>\n<td headers=\"rss\" class=\"gt_row gt_right\">999.201</td>\n<td headers=\"df\" class=\"gt_row gt_right\">NA</td>\n<td headers=\"sumsq\" class=\"gt_row gt_right\">NA</td>\n<td headers=\"statistic\" class=\"gt_row gt_right\">NA</td>\n<td headers=\"p.value\" class=\"gt_row gt_right\">NA</td></tr>\n    <tr><td headers=\"term\" class=\"gt_row gt_left\">LifeExpectancyYrs ~ FemaleLiteracyRate + CO2emissions + IncomePP + four_regions + members_oecd_g77 + FoodSupplykcPPD</td>\n<td headers=\"df.residual\" class=\"gt_row gt_right\">62.000</td>\n<td headers=\"rss\" class=\"gt_row gt_right\">1,070.944</td>\n<td headers=\"df\" class=\"gt_row gt_right\">−1.000</td>\n<td headers=\"sumsq\" class=\"gt_row gt_right\">−71.744</td>\n<td headers=\"statistic\" class=\"gt_row gt_right\">4.380</td>\n<td headers=\"p.value\" class=\"gt_row gt_right\">0.041</td></tr>\n  </tbody>\n  \n  \n</table>\n</div>\n```\n:::\n:::\n\n\n\n\n-   $\\widehat\\beta_{FLR, full} = 0.002$, $\\widehat\\beta_{FLR, red} = 0.034$\n\n$$\n\\Delta\\% = 100\\% \\cdot \\frac{\\widehat\\beta_{FLR, full} - \\widehat\\beta_{FLR, red}}{\\widehat\\beta_{FLR, full}} = 100\\% \\cdot \\frac{0.002 - 0.034}{0.002} = -1561.06\\%\n$$\n\n-   Based off the percent change (and p-value), I would keep this in the model\n\n## Poll Everywhere Question 5\n\n## Step 3: Assess change in coefficient\n\n-   At the end of this step, we have a **preliminary main effects model**\n\n-   Where the variables are excluded that met the following criteria:\n\n    -   P-value \\> 0.05 for the F-test of its own coefficients\n    -   Change in coefficient ($\\Delta\\%$) of our explanatory variable is \\< 10%\n\n-   In our example, the **preliminary main effects model** (end of Step 3) was the same as the **intiial model** (end of Step 2)\n\n## Recap of Steps 1-3\n\n-   Pre-step: Exploratory data analysis\n\n-   Step 1: Simple linear regressions / analysis\n\n    -   Look at each covariate with outcome\n\n    -   Perform SLR for each covariate\n\n-   Step 2: Preliminary variable selection\n\n    -   From SLR, decide which variables go into the initial model\n\n    -   Use F-test to see if each covariate (on its own) explains enough variation in outcome\n\n-   Step 3: Assess change in coefficients\n\n    -   From the initial model at end of step 2, we take a variable out of the model if:\n\n        -   P-value \\> 0.05 for the F-test of its own coefficients\n\n        -   Change in coefficient ($\\Delta\\%$) of our explanatory variable is \\< 10%\n\n# Learning Objectives\n\n1.  Understand the overall steps for purposeful selection as a model building strategy\n\n2.  Apply purposeful selection to a dataset using R\n\n::: lob\n3.  Use different approaches to assess the linear scale of continuous variables in logistic regression\n:::\n\n## Step 4: Assess scale for continuous variables\n\n-   We assume the linear regression model is linear for **each continuous variable**\n\n-   We need to assess linearity for continuous variables in the model\n\n    -   Do this through smoothed scatterplots that we introduced in Lesson 6 (SLR Diagnostics)\n    -   Residual plots (can be used in SLR) does not help us in MLR\n    -   Each term in MLR model needs to have linearity with outcome\n\n-   Three methods/approaches to address the violation of linearity assumption:\n\n    -   Approach 1: Quantile method/Indicator variables\n    -   Approach 2: Fractional Polynomials\n    -   Approach 3: Spline functions\n\n-   For our class, only implement **Approach 2 or 3**\n\n-   Model at the end of Step 4 is the **main effects model**\n\n## Step 4: Assess scale for continuous variables\n\n\n::: {.cell layout-align=\"center\"}\n\n```{.r .cell-code  code-fold=\"true\" code-summary=\"Residual plot does not help us with linearity in MLR\"}\nlibrary(ggfortify)\nautoplot(model_full) + theme(text=element_text(size=14))\n```\n\n::: {.cell-output-display}\n![](13_Purposeful_Selection_files/figure-revealjs/unnamed-chunk-25-1.png){fig-align='center' width=960}\n:::\n:::\n\n\n## Step 4: Assess scale for continuous variables: Smoothed scatterplots\n\n-   **Only checking linearity**, not addressing linearity issues\n\n-   Can also identify extreme observations\n\n    -   Which can influence the assessment of linearity when using fractional polynomials or spline functions\n\n-   Plot the observed and smoothed values of outcome vs. continuous variable\n\n-   Helps us decide if the continuous variable can stay **as is** in the model\n\n    -   Problem: if not linear, then we need to represent the variable in a new way (Approaches 2-4)\n\n## Step 4: Assess scale for continuous variables: Smoothed scatterplots\n\n-   In Gapminder dataset, we have 5 continuous variables:\n\n    -   CO2 Emissions\n    -   Food Supply\n    -   Income\n    -   Female Literacy Rate\n    -   Water source percent\n\n-   Plot each of these agains the outcome, life expectancy\n\n## Step 4: Assess scale for continuous variables: Smoothed scatterplots\n\n\n::: {.cell layout-align=\"center\"}\n\n```{.r .cell-code  code-fold=\"true\" code-summary=\"We can quickly look at ggpairs() to identify variables\"}\ngapm2 %>% select(where(is.numeric)) %>% \n  relocate(LifeExpectancyYrs, .after = last_col()) %>% ggpairs()\n```\n\n::: {.cell-output-display}\n![](13_Purposeful_Selection_files/figure-revealjs/unnamed-chunk-26-1.png){fig-align='center' width=1056}\n:::\n:::\n\n\n## Step 4: Assess scale for continuous variables: Smoothed scatterplots\n\n\n::: {.cell layout-align=\"center\"}\n\n```{.r .cell-code  code-fold=\"true\" code-summary=\"Take a look at C02, Food Supply, and Income\"}\nCO2 = ggplot(data = gapm2, aes(y = LifeExpectancyYrs, x = CO2emissions)) + \n  geom_point() +\n  geom_smooth(se=F) + labs(x = \"CO2 Emissions (kt)\", y = \"Life Expectancy (yrs)\")\n\nFS = ggplot(data = gapm2, aes(y = LifeExpectancyYrs, x = FoodSupplykcPPD)) + \n  geom_point() +\n  geom_smooth(se=F) + labs(x = \"Food Supply (kcal PPD)\", y = \"Life Expectancy (yrs)\")\n\nIncome = ggplot(data = gapm2, aes(y = LifeExpectancyYrs, x = IncomePP)) + \n  geom_point() +\n  geom_smooth(se=F) + labs(x = \"Income (GDP per capita)\", y = \"Life Expectancy (yrs)\")\n\ngrid.arrange(CO2, FS, Income, nrow=1)\n```\n\n::: {.cell-output-display}\n![](13_Purposeful_Selection_files/figure-revealjs/unnamed-chunk-27-1.png){fig-align='center' width=960}\n:::\n:::\n\n\n-   Food Supply looks admissible\n-   CO2 Emissions and Income do not look very linear, but I want to zoom into the area of the plots that have most of the data\n\n## Step 4: Assess scale for continuous variables: Smoothed scatterplots\n\n\n::: {.cell layout-align=\"center\"}\n\n```{.r .cell-code  code-fold=\"true\" code-summary=\"Zoom into areas on plots with more data\"}\nCO2 = ggplot(data = gapm2, aes(y = LifeExpectancyYrs, x = CO2emissions)) + \n  geom_point() + xlim(0,10) +\n  geom_smooth(se=F) + labs(x = \"CO2 Emissions (kt)\", y = \"Life Expectancy (yrs)\")\n\nFS = ggplot(data = gapm2, aes(y = LifeExpectancyYrs, x = FoodSupplykcPPD)) + \n  geom_point() +\n  geom_smooth(se=F) + labs(x = \"Food Supply (kcal PPD)\", y = \"Life Expectancy (yrs)\")\n\nIncome = ggplot(data = gapm2, aes(y = LifeExpectancyYrs, x = IncomePP)) + \n  geom_point() + xlim(0,40000) +\n  geom_smooth(se=F) + labs(x = \"Income (GDP per capita)\", y = \"Life Expectancy (yrs)\")\n\ngrid.arrange(CO2, FS, Income, nrow=1)\n```\n\n::: {.cell-output-display}\n![](13_Purposeful_Selection_files/figure-revealjs/unnamed-chunk-28-1.png){fig-align='center' width=960}\n:::\n:::\n\n\n-   Food Supply still looks admissible\n-   CO2 Emissions and Income not linear: will address this!!\n\n## Step 4: Assess scale for continuous variables\n\n-   Three methods/approaches to address the violation of linearity assumption:\n\n    -   Approach 1: Quantile method/Indicator variables\n    -   Approach 2: Fractional Polynomials\n    -   Approach 3: Spline functions\n\n## Step 4: Approach 1: Quantile method/Indicator variables\n\n-   Split a continuous variable into its quartiles\n\n    -   Create dummy variables corresponding to each quartile\n    -   Fit logistic regression with the dummy variables\n    -   Plot quartile midpoints vs. coefficient estimates for the respective dummy variables\n\n-   Disadvantages:\n\n    -   Takes some time to create new variables, especially with multiple continuous covariates\n\n    -   Start with quartiles, but might be more appropriate to use different splits\n\n        -   No set rules on this\n\n-   Advantage: graphical and visually helps\n\n## Step 4: Approach 1: Quantile method/Indicator variables\n\n\n::: {.cell layout-align=\"center\"}\n\n```{.r .cell-code  code-fold=\"true\" code-summary=\"Take a look at the quartiles within the scatterplot\"}\nvline_coordinates= data.frame(Quantile_Name=names(quantile(gapm2$CO2emissions)),\n                          quantile_values=as.numeric(quantile(gapm2$CO2emissions)))\n\nCO2 = ggplot(data = gapm2, aes(y = LifeExpectancyYrs, x = CO2emissions)) + \n  geom_point(size = 1) +\n  #geom_smooth(se=F) + \n  labs(x = \"CO2 Emissions (kt)\", y = \"Life Expectancy (yrs)\") +\n  geom_vline(data = vline_coordinates, aes(xintercept = quantile_values), \n             color = \"red\", linetype = \"dashed\", size = .9)\n\nvline_coordinates= data.frame(Quantile_Name=names(quantile(gapm2$IncomePP)),\n                          quantile_values=as.numeric(quantile(gapm2$IncomePP)))\n\nIncome = ggplot(data = gapm2, aes(y = LifeExpectancyYrs, x = IncomePP)) + \n  geom_point(size = 1) +\n  #geom_smooth(se=F) + \n  labs(x = \"Income (GDP per capita)\", y = \"Life Expectancy (yrs)\")  +\n  geom_vline(data = vline_coordinates, aes(xintercept = quantile_values), \n             color = \"red\", linetype = \"dashed\", size = .9)\n\ngrid.arrange(CO2, Income, nrow=1)\n```\n\n::: {.cell-output-display}\n![](13_Purposeful_Selection_files/figure-revealjs/unnamed-chunk-29-1.png){fig-align='center' width=960}\n:::\n:::\n\n\n## Step 4: Approach 2: Fractional Polynomials\n\n## Step 4: Approach 3: Spline functions\n\n# Learning Objectives\n\n1.  Understand the overall steps for purposeful selection as a model building strategy\n\n::: lob\n2.  Apply purposeful selection to a dataset using R\n:::\n\n3.  Use different approaches to assess the linear scale of continuous variables in logistic regression\n\n## Step 5: Check for interactions\n\n-   Create a list of interaction terms from variables in the \"main effects model\" that has clinical plausibility\n\n-   Add the interaction variables, one at a time, to the main effects model, and assess the significance using a likelihood ratio test or Wald test\n\n    -   May keep interaction terms with p-value \\< 0.05\n\n-   Keep the main effects untouched, only simplify the interaction terms – locked!\n\n-   Use methods from Step 2 (comparing model with all interactions to a smaller model with interactions) to determine which interactions to keep\n\n-   The model by the end of Step 6 is called the preliminary final model\n\n## Step 6: Assess model fit\n\n-   Assess the adequacy of the model and check its fit\n\n-   Methods will be discussed later class\n\n-   If the model is adequate and fits well, then it is the Final model\n\n## Next time\n\n-   More details on steps 4-6 on Monday before quiz!\n",
    "supporting": [
      "13_Purposeful_Selection_files"
    ],
    "filters": [
      "rmarkdown/pagebreak.lua"
    ],
    "includes": {
      "include-after-body": [
        "\n<script>\n  // htmlwidgets need to know to resize themselves when slides are shown/hidden.\n  // Fire the \"slideenter\" event (handled by htmlwidgets.js) when the current\n  // slide changes (different for each slide format).\n  (function () {\n    // dispatch for htmlwidgets\n    function fireSlideEnter() {\n      const event = window.document.createEvent(\"Event\");\n      event.initEvent(\"slideenter\", true, true);\n      window.document.dispatchEvent(event);\n    }\n\n    function fireSlideChanged(previousSlide, currentSlide) {\n      fireSlideEnter();\n\n      // dispatch for shiny\n      if (window.jQuery) {\n        if (previousSlide) {\n          window.jQuery(previousSlide).trigger(\"hidden\");\n        }\n        if (currentSlide) {\n          window.jQuery(currentSlide).trigger(\"shown\");\n        }\n      }\n    }\n\n    // hookup for slidy\n    if (window.w3c_slidy) {\n      window.w3c_slidy.add_observer(function (slide_num) {\n        // slide_num starts at position 1\n        fireSlideChanged(null, w3c_slidy.slides[slide_num - 1]);\n      });\n    }\n\n  })();\n</script>\n\n"
      ]
    },
    "engineDependencies": {},
    "preserve": {},
    "postProcess": true
  }
}