<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.3.450">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">

<meta name="author" content="Nicky Wakim">
<meta name="dcterms.date" content="2024-04-10">

<title>Categorical Data Analysis - Lesson 4: Measurements of Association and Agreement</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
/* CSS for syntax highlighting */
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
  }
pre.numberSource { margin-left: 3em;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
</style>


<script src="../../site_libs/quarto-nav/quarto-nav.js"></script>
<script src="../../site_libs/quarto-nav/headroom.min.js"></script>
<script src="../../site_libs/clipboard/clipboard.min.js"></script>
<script src="../../site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="../../site_libs/quarto-search/fuse.min.js"></script>
<script src="../../site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="../../">
<script src="../../site_libs/quarto-html/quarto.js"></script>
<script src="../../site_libs/quarto-html/popper.min.js"></script>
<script src="../../site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="../../site_libs/quarto-html/anchor.min.js"></script>
<link href="../../site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="../../site_libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="../../site_libs/bootstrap/bootstrap.min.js"></script>
<link href="../../site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="../../site_libs/bootstrap/bootstrap.min.css" rel="stylesheet" id="quarto-bootstrap" data-mode="light">
<script id="quarto-search-options" type="application/json">{
  "location": "navbar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "end",
  "type": "overlay",
  "limit": 20,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit",
    "search-label": "Search"
  }
}</script>

  <script src="https://polyfill.io/v3/polyfill.min.js?features=es6"></script>
  <script src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-chtml-full.js" type="text/javascript"></script>

</head>

<body class="nav-sidebar docked nav-fixed">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top">
    <nav class="navbar navbar-expand-sm navbar-dark ">
      <div class="navbar-container container-fluid">
      <div class="navbar-brand-container">
    <a href="../../index.html" class="navbar-brand navbar-brand-logo">
    <img src="../../images/Bsta513.png" alt="" class="navbar-logo">
    </a>
    <a class="navbar-brand" href="../../index.html">
    <span class="navbar-title">Categorical Data Analysis</span>
    </a>
  </div>
            <div id="quarto-search" class="" title="Search"></div>
          <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarCollapse" aria-controls="navbarCollapse" aria-expanded="false" aria-label="Toggle navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
  <span class="navbar-toggler-icon"></span>
</button>
          <div class="collapse navbar-collapse" id="navbarCollapse">
            <ul class="navbar-nav navbar-nav-scroll ms-auto">
  <li class="nav-item">
    <a class="nav-link active" href="../../syllabus.html" rel="" target="" aria-current="page">
 <span class="menu-text">Syllabus</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="../../schedule.html" rel="" target="">
 <span class="menu-text">Schedule</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="../../homeworks.html" rel="" target="">
 <span class="menu-text">Homework</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="../../project.html" rel="" target="">
 <span class="menu-text">Projects</span></a>
  </li>  
</ul>
            <div class="quarto-navbar-tools">
</div>
          </div> <!-- /navcollapse -->
      </div> <!-- /container-fluid -->
    </nav>
  <nav class="quarto-secondary-nav">
    <div class="container-fluid d-flex">
      <button type="button" class="quarto-btn-toggle btn" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar,#quarto-sidebar-glass" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Toggle sidebar navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
        <i class="bi bi-layout-text-sidebar-reverse"></i>
      </button>
      <nav class="quarto-page-breadcrumbs" aria-label="breadcrumb"><ol class="breadcrumb"><li class="breadcrumb-item">Lesson 4: Measurements of Association and Agreement</li></ol></nav>
      <a class="flex-grow-1" role="button" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar,#quarto-sidebar-glass" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Toggle sidebar navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">      
      </a>
      <button type="button" class="btn quarto-search-button" aria-label="" onclick="window.quartoOpenSearch();">
        <i class="bi bi-search"></i>
      </button>
    </div>
  </nav>
</header>
<!-- content -->
<div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article page-navbar">
<!-- sidebar -->
  <nav id="quarto-sidebar" class="sidebar collapse collapse-horizontal sidebar-navigation docked overflow-auto">
        <div class="mt-2 flex-shrink-0 align-items-center">
        <div class="sidebar-search">
        <div id="quarto-search" class="" title="Search"></div>
        </div>
        </div>
    <div class="sidebar-menu-container"> 
    <ul class="list-unstyled mt-1">
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../index.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Home</span></a>
  </div>
</li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-1" aria-expanded="true">
 <span class="menu-text">Course Info</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-1" aria-expanded="true" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-1" class="collapse list-unstyled sidebar-section depth1 show">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../instructors.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Instructors</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../syllabus.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Syllabus</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../schedule.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Schedule</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../resources.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Resources</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../quizzes.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Quizzes</span></a>
  </div>
</li>
      </ul>
  </li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-2" aria-expanded="true">
 <span class="menu-text">Course Materials</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-2" aria-expanded="true" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-2" class="collapse list-unstyled sidebar-section depth1 show">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../weeks.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Weekly Pages</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../lessons.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Lessons</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../homeworks.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Homework</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../project.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Project</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../readings.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">613 Readings</span></a>
  </div>
</li>
      </ul>
  </li>
    </ul>
    </div>
</nav>
<div id="quarto-sidebar-glass" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar,#quarto-sidebar-glass"></div>
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
        <nav id="TOC" role="doc-toc" class="toc-active">
    <h2 id="toc-title">On this page</h2>
   
  <ul>
  <li><a href="#poll-everywhere-question-1" id="toc-poll-everywhere-question-1" class="nav-link active" data-scroll-target="#poll-everywhere-question-1">Poll Everywhere Question 1</a></li>
  <li><a href="#learning-objectives" id="toc-learning-objectives" class="nav-link" data-scroll-target="#learning-objectives">Learning Objectives</a>
  <ul class="collapse">
  <li><a href="#last-class" id="toc-last-class" class="nav-link" data-scroll-target="#last-class">Last class</a></li>
  <li><a href="#a-taste-of-regression-for-a-binary-outcome-we-will-come-back-to-this" id="toc-a-taste-of-regression-for-a-binary-outcome-we-will-come-back-to-this" class="nav-link" data-scroll-target="#a-taste-of-regression-for-a-binary-outcome-we-will-come-back-to-this">A taste of regression for a binary outcome (we will come back to this!!)</a></li>
  </ul></li>
  <li><a href="#learning-objectives-1" id="toc-learning-objectives-1" class="nav-link" data-scroll-target="#learning-objectives-1">Learning Objectives</a>
  <ul class="collapse">
  <li><a href="#relationship-between-rr-and-or-12" id="toc-relationship-between-rr-and-or-12" class="nav-link" data-scroll-target="#relationship-between-rr-and-or-12">Relationship Between RR and OR (1/2)</a></li>
  <li><a href="#relationship-between-rr-and-or-22" id="toc-relationship-between-rr-and-or-22" class="nav-link" data-scroll-target="#relationship-between-rr-and-or-22">Relationship Between RR and OR (2/2)</a></li>
  <li><a href="#poll-everywhere-question-2" id="toc-poll-everywhere-question-2" class="nav-link" data-scroll-target="#poll-everywhere-question-2">Poll Everywhere Question 2</a></li>
  <li><a href="#rr-in-retrospective-case-control-study-13" id="toc-rr-in-retrospective-case-control-study-13" class="nav-link" data-scroll-target="#rr-in-retrospective-case-control-study-13">RR in retrospective case-control study (1/3)</a></li>
  <li><a href="#rr-in-retrospective-case-control-study-23" id="toc-rr-in-retrospective-case-control-study-23" class="nav-link" data-scroll-target="#rr-in-retrospective-case-control-study-23">RR in retrospective case-control study (2/3)</a></li>
  <li><a href="#rr-in-retrospective-case-control-study-33" id="toc-rr-in-retrospective-case-control-study-33" class="nav-link" data-scroll-target="#rr-in-retrospective-case-control-study-33">RR in retrospective case-control study (3/3)</a></li>
  <li><a href="#notes-for-odds-ratios" id="toc-notes-for-odds-ratios" class="nav-link" data-scroll-target="#notes-for-odds-ratios">Notes for Odds Ratios</a></li>
  <li><a href="#or-in-retrospective-case-control-study" id="toc-or-in-retrospective-case-control-study" class="nav-link" data-scroll-target="#or-in-retrospective-case-control-study">OR in retrospective case-control study</a></li>
  <li><a href="#which-measurement-should-one-use" id="toc-which-measurement-should-one-use" class="nav-link" data-scroll-target="#which-measurement-should-one-use">Which measurement should one use?</a></li>
  </ul></li>
  <li><a href="#learning-objectives-2" id="toc-learning-objectives-2" class="nav-link" data-scroll-target="#learning-objectives-2">Learning Objectives</a>
  <ul class="collapse">
  <li><a href="#measuring-agreement" id="toc-measuring-agreement" class="nav-link" data-scroll-target="#measuring-agreement">Measuring Agreement</a></li>
  <li><a href="#poll-everywhere-question-3" id="toc-poll-everywhere-question-3" class="nav-link" data-scroll-target="#poll-everywhere-question-3">Poll Everywhere Question 3</a></li>
  <li><a href="#lets-get-our-mood-data-down" id="toc-lets-get-our-mood-data-down" class="nav-link" data-scroll-target="#lets-get-our-mood-data-down">Let’s get our mood data down!</a></li>
  <li><a href="#measuring-agreement-1" id="toc-measuring-agreement-1" class="nav-link" data-scroll-target="#measuring-agreement-1">Measuring Agreement</a></li>
  <li><a href="#measuring-agreement-cohens-kappa" id="toc-measuring-agreement-cohens-kappa" class="nav-link" data-scroll-target="#measuring-agreement-cohens-kappa">Measuring Agreement: Cohen’s Kappa</a></li>
  <li><a href="#example-our-moods-13" id="toc-example-our-moods-13" class="nav-link" data-scroll-target="#example-our-moods-13">Example: Our moods (1/3)</a></li>
  <li><a href="#example-our-moods-23" id="toc-example-our-moods-23" class="nav-link" data-scroll-target="#example-our-moods-23">Example: Our moods (2/3)</a></li>
  <li><a href="#example-our-moods-33" id="toc-example-our-moods-33" class="nav-link" data-scroll-target="#example-our-moods-33">Example: Our moods (3/3)</a></li>
  <li><a href="#measuring-agreement-oberved-kappas" id="toc-measuring-agreement-oberved-kappas" class="nav-link" data-scroll-target="#measuring-agreement-oberved-kappas">Measuring Agreement: Oberved Kappas</a></li>
  </ul></li>
  <li><a href="#learning-objectives-3" id="toc-learning-objectives-3" class="nav-link" data-scroll-target="#learning-objectives-3">Learning Objectives</a>
  <ul class="collapse">
  <li><a href="#measurement-of-association-so-far" id="toc-measurement-of-association-so-far" class="nav-link" data-scroll-target="#measurement-of-association-so-far">Measurement of Association So Far</a></li>
  </ul></li>
  <li><a href="#extra-example-in-case-the-mood-example-fails-beautifully" id="toc-extra-example-in-case-the-mood-example-fails-beautifully" class="nav-link" data-scroll-target="#extra-example-in-case-the-mood-example-fails-beautifully">Extra example in case the mood example fails beautifully</a>
  <ul class="collapse">
  <li><a href="#just-in-case-our-data-doesnt-work-out-beef-consumption-in-survey" id="toc-just-in-case-our-data-doesnt-work-out-beef-consumption-in-survey" class="nav-link" data-scroll-target="#just-in-case-our-data-doesnt-work-out-beef-consumption-in-survey">Just in case our data doesn’t work out: Beef Consumption in Survey</a></li>
  <li><a href="#example-beef-consumption-in-survey-13" id="toc-example-beef-consumption-in-survey-13" class="nav-link" data-scroll-target="#example-beef-consumption-in-survey-13">Example: Beef Consumption in Survey (1/3)</a></li>
  <li><a href="#example-beef-consumption-in-survey-23" id="toc-example-beef-consumption-in-survey-23" class="nav-link" data-scroll-target="#example-beef-consumption-in-survey-23">Example: Beef Consumption in Survey (2/3)</a></li>
  <li><a href="#example-beef-consumption-in-survey-33" id="toc-example-beef-consumption-in-survey-33" class="nav-link" data-scroll-target="#example-beef-consumption-in-survey-33">Example: Beef Consumption in Survey (3/3)</a></li>
  </ul></li>
  </ul>
<div class="quarto-alternate-formats"><h2>Other Formats</h2><ul><li><a href="04_Meas_Assoc_Agree.html"><i class="bi bi-file-slides"></i>RevealJS</a></li></ul></div></nav>
    </div>
<!-- main -->
<main class="content" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default">
<div class="quarto-title">
<h1 class="title">Lesson 4: Measurements of Association and Agreement</h1>
</div>



<div class="quarto-title-meta">

    <div>
    <div class="quarto-title-meta-heading">Author</div>
    <div class="quarto-title-meta-contents">
             <p>Nicky Wakim </p>
          </div>
  </div>
    
    <div>
    <div class="quarto-title-meta-heading">Published</div>
    <div class="quarto-title-meta-contents">
      <p class="date">April 10, 2024</p>
    </div>
  </div>
  
    
  </div>
  

</header>

<section id="poll-everywhere-question-1" class="level2">
<h2 class="anchored" data-anchor-id="poll-everywhere-question-1">Poll Everywhere Question 1</h2>
</section>
<section id="learning-objectives" class="level1">
<h1>Learning Objectives</h1>
<ol type="1">
<li>Identify cases when it is appropriate to use risk difference, relative risk, or odds ratios</li>
<li>Expand work on contingency tables to evaluate the agreement or reproducibility using Cohen’s Kappa</li>
</ol>
<div class="cell">
<style type="text/css">
.reveal code {
  max-height: 80% !important;
}
</style>
</div>
<div class="cell">
<div class="cell-output cell-output-stderr">
<pre><code>── Attaching core tidyverse packages ──────────────────────── tidyverse 2.0.0 ──
✔ dplyr     1.1.2     ✔ readr     2.1.4
✔ forcats   1.0.0     ✔ stringr   1.5.0
✔ ggplot2   3.4.4     ✔ tibble    3.2.1
✔ lubridate 1.9.2     ✔ tidyr     1.3.0
✔ purrr     1.0.2     
── Conflicts ────────────────────────────────────────── tidyverse_conflicts() ──
✖ dplyr::filter() masks stats::filter()
✖ dplyr::lag()    masks stats::lag()
ℹ Use the conflicted package (&lt;http://conflicted.r-lib.org/&gt;) to force all conflicts to become errors

Attaching package: 'janitor'


The following objects are masked from 'package:stats':

    chisq.test, fisher.test



Attaching package: 'rstatix'


The following object is masked from 'package:janitor':

    make_clean_names


The following object is masked from 'package:stats':

    filter


here() starts at /Users/wakim/Library/CloudStorage/OneDrive-OregonHealth&amp;ScienceUniversity/Teaching/Classes/S2024_BSTA_513_613/S2024_BSTA_513</code></pre>
</div>
</div>
<section id="last-class" class="level2">
<h2 class="anchored" data-anchor-id="last-class">Last class</h2>
<ul>
<li><p>Used contingency tables to test and measure association between two variables</p>
<ul>
<li>Categorical outcome variable (Y)</li>
<li>One categorical explanatory variable (X)</li>
</ul></li>
<li><p>We looked at risk difference, risk ratio, and odds ratio to measure association</p></li>
</ul>
<table class="table">
<colgroup>
<col style="width: 23%">
<col style="width: 76%">
</colgroup>
<thead>
<tr class="header">
<th>Measure</th>
<th>Estimate</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>Risk difference</td>
<td><span class="math display">\[\widehat{RD} = \widehat{p}_1 - \widehat{p}_1 = \dfrac{n_{11}}{n_1} - \dfrac{n_{21}}{n_2}\]</span></td>
</tr>
<tr class="even">
<td>Relative risk / risk ratio</td>
<td><span class="math display">\[\widehat{RR}=\dfrac{\hat{p}_1}{\hat{p}_2} = \dfrac{n_{11}/n_1}{n_{21}/n_2}\]</span></td>
</tr>
<tr class="odd">
<td>Odds ratio</td>
<td><span class="math display">\[\widehat{OR}=\frac{odds_1}{odds_2}=\frac{{\hat{p}}_1/(1-{\hat{p}}_1)}{{\hat{p}}_2/(1-{\hat{p}}_2)}\]</span></td>
</tr>
</tbody>
</table>
<ul>
<li>Discussed how OR will be an important measurement in logistic regression</li>
</ul>
</section>
<section id="a-taste-of-regression-for-a-binary-outcome-we-will-come-back-to-this" class="level2">
<h2 class="anchored" data-anchor-id="a-taste-of-regression-for-a-binary-outcome-we-will-come-back-to-this">A taste of regression for a binary outcome (we will come back to this!!)</h2>
<div class="cell">
<div class="sourceCode cell-code" id="cb2"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb2-1"><a href="#cb2-1" aria-hidden="true" tabindex="-1"></a>logreg <span class="ot">=</span> <span class="fu">glm</span>(case <span class="sc">~</span> glucimp, <span class="at">data =</span> SHS, <span class="at">family =</span> binomial)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="columns">
<div class="column" style="width:60%;">
<div class="cell">
<div class="sourceCode cell-code" id="cb3"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb3-1"><a href="#cb3-1" aria-hidden="true" tabindex="-1"></a><span class="fu">summary</span>(logreg)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>
Call:
glm(formula = case ~ glucimp, family = binomial, data = SHS)

Coefficients:
              Estimate Std. Error z value Pr(&gt;|z|)    
(Intercept)   -0.52287    0.08969   -5.83 5.55e-09 ***
glucimpNormal -1.53684    0.12982  -11.84  &lt; 2e-16 ***
---
Signif. codes:  0 '***' 0.001 '**' 0.01 '*' 0.05 '.' 0.1 ' ' 1

(Dispersion parameter for binomial family taken to be 1)

    Null deviance: 1646.3  on 1663  degrees of freedom
Residual deviance: 1501.3  on 1662  degrees of freedom
AIC: 1505.3

Number of Fisher Scoring iterations: 4</code></pre>
</div>
</div>
</div><div class="column" style="width:40%;">
<div class="cell">
<div class="sourceCode cell-code" id="cb5"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb5-1"><a href="#cb5-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(epiDisplay)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>Loading required package: foreign</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Loading required package: survival</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Loading required package: MASS</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>
Attaching package: 'MASS'</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>The following object is masked from 'package:gtsummary':

    select</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>The following object is masked from 'package:rstatix':

    select</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>The following object is masked from 'package:dplyr':

    select</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Loading required package: nnet</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>
Attaching package: 'epiDisplay'</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>The following object is masked from 'package:ggplot2':

    alpha</code></pre>
</div>
<div class="sourceCode cell-code" id="cb16"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb16-1"><a href="#cb16-1" aria-hidden="true" tabindex="-1"></a><span class="fu">logistic.display</span>(logreg)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>
Logistic regression predicting case 
 
                     OR(95%CI)         P(Wald's test) P(LR-test)
glucimp (cont. var.) 0.22 (0.17,0.28)  &lt; 0.001        &lt; 0.001   
                                                                
Log-likelihood = -750.6533
No. of observations = 1664
AIC value = 1505.3066</code></pre>
</div>
</div>
</div>
</div>
</section>
</section>
<section id="learning-objectives-1" class="level1">
<h1>Learning Objectives</h1>
<div class="lob">
<ol type="1">
<li>Identify cases when it is appropriate to use risk difference, relative risk, or odds ratios</li>
</ol>
</div>
<ol start="2" type="1">
<li>Expand work on contingency tables to evaluate the agreement or reproducibility using Cohen’s Kappa</li>
</ol>
<section id="relationship-between-rr-and-or-12" class="level2">
<h2 class="anchored" data-anchor-id="relationship-between-rr-and-or-12">Relationship Between RR and OR (1/2)</h2>
<ul>
<li>Notice that odds ratio is <strong>not equivalent</strong> to relative risk (or risk ratio)</li>
</ul>
<p>&nbsp;</p>
<ul>
<li><p>However, when the <strong>probability of “success” is small</strong> (e.g., rare disease), <span class="math inline">\(\widehat{OR}\)</span> is a nice approximation of <span class="math inline">\(\widehat{RR}\)</span> <span class="math display">\[\widehat{OR}=\frac{{\hat{p}}_1/(1-{\hat{p}}_1)}{{\hat{p}}_2/(1-{\hat{p}}_2)}=\widehat{RR}\cdot \frac{1-\widehat{p_2}}{1-\widehat{p_1}}\]</span></p>
<ul>
<li>The fraction in the last term of the above expression approximately equals to 1.0 if <span class="math inline">\(\widehat{p}_1\)</span> and <span class="math inline">\(\widehat{p}_2\)</span> BOTH quite small (&lt; 0.1)</li>
</ul></li>
</ul>
<p>&nbsp;</p>
<ul>
<li><p>The <span class="math inline">\(\widehat{OR}\)</span> and <span class="math inline">\(\widehat{RR}\)</span> are not very close to each other in SHS: diabetes not a rare disease</p>
<ul>
<li><span class="math inline">\(\widehat{OR} = 4.65\)</span></li>
<li><span class="math inline">\(\widehat{RR} = 3.29\)</span></li>
</ul></li>
</ul>
</section>
<section id="relationship-between-rr-and-or-22" class="level2">
<h2 class="anchored" data-anchor-id="relationship-between-rr-and-or-22">Relationship Between RR and OR (2/2)</h2>
<ul>
<li><p>An example where a disease rare over the whole sample (~1%), but …</p>
<ul>
<li><span class="math inline">\(\widehat{OR}\)</span> is not a good estimate of <span class="math inline">\(\widehat{RR}\)</span> in “rare” disease</li>
</ul></li>
</ul>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="./images/rare_dis.png" class="img-fluid figure-img"></p>
</figure>
</div>
<ul>
<li><span class="math inline">\(\widehat{p}_1\)</span> is 0.5: thus <span class="math inline">\(\widehat{OR}\)</span> and <span class="math inline">\(\widehat{RR}\)</span> are very different</li>
</ul>
<p><span class="math display">\[\widehat{RR}=\frac{0.5}{0.00102}=490 \text{ and } \widehat{OR} = \frac{0.5(1-0.5)}{0.00102(1-0.00102)}=981\]</span></p>
</section>
<section id="poll-everywhere-question-2" class="level2">
<h2 class="anchored" data-anchor-id="poll-everywhere-question-2">Poll Everywhere Question 2</h2>
</section>
<section id="rr-in-retrospective-case-control-study-13" class="level2">
<h2 class="anchored" data-anchor-id="rr-in-retrospective-case-control-study-13">RR in retrospective case-control study (1/3)</h2>
<ul>
<li><p>In retrospective case-control studies: we <strong>identify cases</strong> (patients with the outcome), then select a number of controls (patients without the outcome)</p>
<ul>
<li><p>Case-control study to require <strong>much smaller sample size</strong> than equivalent cohort studies</p></li>
<li><p>So we pick out the cases and controls first, <strong>then see if there is exposure</strong></p></li>
</ul></li>
</ul>
<p>&nbsp;</p>
<ul>
<li><p>However, the <span style="color:#70AD47; font-weight: bold;">proportion of cases in the sample</span> <strong>does not</strong> represent the <span style="color:#4472C4; font-weight: bold;">proportion of cases in the population</span></p>
<ul>
<li>RR compares probability of the outcome (case) for exposed and unexposed groups</li>
<li>Number of outcomes has been artificially inflated for case-control study</li>
</ul></li>
</ul>
</section>
<section id="rr-in-retrospective-case-control-study-23" class="level2">
<h2 class="anchored" data-anchor-id="rr-in-retrospective-case-control-study-23">RR in retrospective case-control study (2/3)</h2>
<ul>
<li>Assume a 1:2 case-control study summarized in below table:</li>
</ul>
<div class="columns">
<div class="column" style="width:15%;">

</div><div class="column" style="width:70%;">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="./images/retro_RR_tab1.png" class="img-fluid figure-img"></p>
</figure>
</div>
</div><div class="column" style="width:15%;">

</div>
</div>
<ul>
<li>Assume we compute the RR as if it is from a cohort study:</li>
</ul>
<p><span class="math display">\[\widehat{RR}=\frac{\widehat{p_1}}{\widehat{p_2}}=\frac{n_{11}/n_{1+}}{n_{21}/n_{2+}}=\frac{40/80}{60/220}=1.8333\]</span></p>
</section>
<section id="rr-in-retrospective-case-control-study-33" class="level2">
<h2 class="anchored" data-anchor-id="rr-in-retrospective-case-control-study-33">RR in retrospective case-control study (3/3)</h2>
<ul>
<li>In real world, the proportion of controls (not diseased) is typically much higher. Assume the table below shows the <strong>proportion in the population in a cohort study</strong></li>
</ul>
<div class="columns">
<div class="column" style="width:15%;">

</div><div class="column" style="width:70%;">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="./images/retro_RR_tab2.png" class="img-fluid figure-img"></p>
</figure>
</div>
</div><div class="column" style="width:15%;">

</div>
</div>
<ul>
<li>The estimated RR for the patient population is:</li>
</ul>
<p><span class="math display">\[\widehat{RR}=\frac{\widehat{p_1}}{\widehat{p_2}}=\frac{400/4400}{600/16600}=2.5152\]</span></p>
</section>
<section id="notes-for-odds-ratios" class="level2">
<h2 class="anchored" data-anchor-id="notes-for-odds-ratios">Notes for Odds Ratios</h2>
<ul>
<li><p>The OR is valid for</p>
<ul>
<li>Case-control studies (where the RR is not appropriate)</li>
<li>Prospective cohort studies</li>
<li>Cross-sectional studies</li>
</ul></li>
</ul>
<p>&nbsp;</p>
<ul>
<li><p>It can be interpreted either as…</p>
<ul>
<li>Odds of <strong>event</strong> for exposed vs.&nbsp;unexposed individuals, or</li>
<li>Odds of <strong>exposure</strong> for individuals with vs.&nbsp;without the event of interest</li>
</ul></li>
</ul>
<p>&nbsp;</p>
<ul>
<li>Pay attention to the numerator and denominator for the OR</li>
</ul>
</section>
<section id="or-in-retrospective-case-control-study" class="level2">
<h2 class="anchored" data-anchor-id="or-in-retrospective-case-control-study">OR in retrospective case-control study</h2>
<ul>
<li><p>While we cannot estimate RR from a case-control study, we can still estimate OR for case-control study</p>
<ul>
<li><p>OR does not require us to distinguish between the outcome variable and explanatory variable in the contingency table</p>
<ul>
<li>AKA: Odds ratio of disease comparing exposed to not exposed is same as odds ratio of being exposed comparing diseased and not diseased</li>
</ul></li>
</ul></li>
</ul>
<p>&nbsp;</p>
<div class="columns">
<div class="column">
<ul>
<li><p>For case-control study where the probability of having outcome is small, the <span class="math inline">\(\widehat{OR}\)</span> is a nice approximation to <span class="math inline">\(\widehat{RR}\)</span></p>
<ul>
<li><p>For the 1:2 case-control table: <span class="math inline">\(\widehat{OR}=\frac{40\cdot160}{40\cdot60} = 2.667\)</span></p></li>
<li><p>Population cohort study: <span class="math inline">\(\widehat{RR}=2.5152\)</span></p></li>
</ul></li>
</ul>
</div><div class="column">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="./images/retro_RR_tab1.png" class="img-fluid figure-img"></p>
</figure>
</div>
</div>
</div>
</section>
<section id="which-measurement-should-one-use" class="level2">
<h2 class="anchored" data-anchor-id="which-measurement-should-one-use">Which measurement should one use?</h2>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="./images/meas_t.png" class="img-fluid figure-img"></p>
</figure>
</div>
</section>
</section>
<section id="learning-objectives-2" class="level1">
<h1>Learning Objectives</h1>
<ol type="1">
<li>Identify cases when it is appropriate to use risk difference, relative risk, or odds ratios</li>
</ol>
<div class="lob">
<ol start="2" type="1">
<li>Expand work on contingency tables to evaluate the agreement or reproducibility using Cohen’s Kappa</li>
</ol>
</div>
<section id="measuring-agreement" class="level2">
<h2 class="anchored" data-anchor-id="measuring-agreement">Measuring Agreement</h2>
<ul>
<li><p>Still within the realm of contingency tables</p></li>
<li><p>What if we are NOT looking at the association between two variables?</p></li>
</ul>
<p>&nbsp;</p>
<ul>
<li><p>What if we want to look at the agreement between two things?</p>
<ul>
<li>Answers of same subjects for same survey taken at different times</li>
<li>Two different radiologists’ assessment of the same X-ray</li>
</ul></li>
</ul>
<p>&nbsp;</p>
<ul>
<li><p>Cohen’s Kappa statistics: widely used as a measure of agreement</p>
<ul>
<li>Example: Reliability studies, interobserver agreement</li>
</ul></li>
</ul>
</section>
<section id="poll-everywhere-question-3" class="level2">
<h2 class="anchored" data-anchor-id="poll-everywhere-question-3">Poll Everywhere Question 3</h2>
</section>
<section id="lets-get-our-mood-data-down" class="level2">
<h2 class="anchored" data-anchor-id="lets-get-our-mood-data-down">Let’s get our mood data down!</h2>
<div class="columns">
<div class="column" style="width:10%;">

</div><div class="column" style="width:80%;">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="./images/mood_ct.png" class="img-fluid figure-img"></p>
</figure>
</div>
</div><div class="column" style="width:10%;">

</div>
</div>
</section>
<section id="measuring-agreement-1" class="level2">
<h2 class="anchored" data-anchor-id="measuring-agreement-1">Measuring Agreement</h2>
<ul>
<li><p>If <strong>perfect agreement</strong> among the two raters/surveys:</p>
<ul>
<li>We would expect nonzero entries only in the diagonal cells of the table</li>
</ul></li>
</ul>
<p>&nbsp;</p>
<ul>
<li><p><span class="math inline">\(p_o\)</span> is the observed proportion of complete agreement (concordance)</p></li>
<li><p><span class="math inline">\(p_E\)</span> is the expected proportion of complete agreement if the agreement is just due to chance</p></li>
<li><p>If the <span class="math inline">\(p_o\)</span> is much greater than <span class="math inline">\(p_E\)</span>, then the agreement level is high.</p>
<ul>
<li>Otherwise, the agreement level is low</li>
</ul></li>
</ul>
<p>&nbsp;</p>
<div class="columns">
<div class="column" style="width:48%;">
<ul>
<li><strong>Cohen’s Kappa</strong> is based on the difference between <span class="math inline">\(p_o\)</span> and <span class="math inline">\(p_E\)</span>: <span class="math display">\[\hat{\kappa}=\frac{p_o-p_E}{1-p_E}\]</span></li>
</ul>
</div><div class="column" style="width:4%;">

</div><div class="column" style="width:48%;">
<ul>
<li><span class="math inline">\(\hat{\kappa} = 0\)</span>: No agreement between surveys/raters other than what would be expected by chance</li>
<li><span class="math inline">\(\hat{\kappa} = 1\)</span>: Complete agreement</li>
</ul>
</div>
</div>
</section>
<section id="measuring-agreement-cohens-kappa" class="level2">
<h2 class="anchored" data-anchor-id="measuring-agreement-cohens-kappa">Measuring Agreement: Cohen’s Kappa</h2>
<div class="columns">
<div class="column" style="width:52%;">
<ul>
<li><p>Point estimate: <span class="math display">\[\hat{\kappa}=\frac{p_o-p_E}{1-p_E}\]</span></p>
<ul>
<li>With <span class="math inline">\(p_o=\ \frac{\sum_{i}\ n_{ii}}{n}\)</span> (sum of diagonals divided by total)</li>
<li>With <span class="math inline">\(p_E=\sum_{i}{a_ib_i}\)</span></li>
<li>With range of point estimate from <span class="math inline">\([-1, 1]\)</span></li>
</ul></li>
</ul>
</div><div class="column" style="width:4%;">

</div><div class="column" style="width:44%;">
<div class="definition">
<div class="def-title">
<p>What’s <span class="math inline">\(\sum_{i}{a_ib_i}\)</span>?</p>
</div>
<div class="def-cont">
<p>For <span class="math inline">\(i\)</span> responses (row/columns), <span class="math inline">\(a_i\)</span> is proportion of <span class="math inline">\(i\)</span> response category in first survey and <span class="math inline">\(b_i\)</span> is proportion of <span class="math inline">\(i\)</span> response category in second survey (we’ll show this in the example)</p>
</div>
</div>
</div>
</div>
<ul>
<li>Approximate standard error:</li>
</ul>
<p><span class="math display">\[ SE_{\widehat{\kappa}} = \sqrt{\frac{1}{{n\left(1-p_e\right)}^2}\left\{p_e^2+p_e-\sum_{i}\left[a_ib_i\left(a_i+b_i\right)\right]\right\}}\]</span></p>
<ul>
<li>95% Wald confidence interval for <span class="math inline">\(\widehat{\kappa}\)</span>:</li>
</ul>
<p><span class="math display">\[\widehat{\kappa} \pm 1.96 \cdot SE_{\widehat{\kappa}}\]</span></p>
</section>
<section id="example-our-moods-13" class="level2">
<h2 class="anchored" data-anchor-id="example-our-moods-13">Example: Our moods (1/3)</h2>
<div class="columns">
<div class="column" style="width:68%;">
<div class="example">
<div class="ex-title">
<p>Agreement of surveys</p>
</div>
<div class="ex-cont">
<p>Compute the point estimate and 95% confidence interval for the agreement between our Monday and Wednesday moods.</p>
</div>
</div>
</div><div class="column" style="width:32%;">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="./images/mood_ct.png" class="img-fluid figure-img"></p>
</figure>
</div>
</div>
</div>
<p><strong>Needed steps:</strong></p>
<ol type="1">
<li>Compute the kappa statistic</li>
<li>Find confidence interval of kappa</li>
<li>Interpret the estimate</li>
</ol>
</section>
<section id="example-our-moods-23" class="level2">
<h2 class="anchored" data-anchor-id="example-our-moods-23">Example: Our moods (2/3)</h2>
<div class="columns">
<div class="column" style="width:68%;">
<div class="example">
<div class="ex-title">
<p>Agreement of surveys</p>
</div>
<div class="ex-cont">
<p>Compute the point estimate and 95% confidence interval for the agreement between our Monday and Wednesday moods.</p>
</div>
</div>
</div><div class="column" style="width:32%;">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="./images/mood_ct.png" class="img-fluid figure-img"></p>
</figure>
</div>
</div>
</div>
<p><strong>Needed steps:</strong></p>
<p>1/2. Compute the kappa statistic and find confidence interval of kappa</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb18"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb18-1"><a href="#cb18-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(epiR)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>Package epiR 2.0.63 is loaded</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Type help(epi.about) for summary information</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Type browseVignettes(package = 'epiR') to learn how to use epiR for applied epidemiological analyses</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code></code></pre>
</div>
<div class="sourceCode cell-code" id="cb23"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb23-1"><a href="#cb23-1" aria-hidden="true" tabindex="-1"></a>moods <span class="ot">=</span> <span class="fu">matrix</span>(<span class="fu">c</span>(<span class="dv">100</span>, <span class="dv">40</span>, <span class="dv">10</span>, <span class="dv">30</span>), <span class="at">nrow =</span> <span class="dv">2</span>, <span class="at">byrow =</span> T)</span>
<span id="cb23-2"><a href="#cb23-2" aria-hidden="true" tabindex="-1"></a>moods</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>     [,1] [,2]
[1,]  100   40
[2,]   10   30</code></pre>
</div>
<div class="sourceCode cell-code" id="cb25"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb25-1"><a href="#cb25-1" aria-hidden="true" tabindex="-1"></a><span class="fu">epi.kappa</span>(moods, <span class="at">method =</span> <span class="st">"cohen"</span>)<span class="sc">$</span>kappa </span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>        est         se     lower     upper
1 0.3661972 0.07617362 0.2168996 0.5154947</code></pre>
</div>
</div>
</section>
<section id="example-our-moods-33" class="level2">
<h2 class="anchored" data-anchor-id="example-our-moods-33">Example: Our moods (3/3)</h2>
<div class="columns">
<div class="column" style="width:68%;">
<div class="example">
<div class="ex-title">
<p>Agreement of surveys</p>
</div>
<div class="ex-cont">
<p>Compute the point estimate and 95% confidence interval for the agreement between our Monday and Wednesday moods.</p>
</div>
</div>
</div><div class="column" style="width:32%;">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="./images/mood_ct.png" class="img-fluid figure-img"></p>
</figure>
</div>
</div>
</div>
<p><strong>Needed steps:</strong></p>
<ol start="3" type="1">
<li>Interpret the estimate</li>
</ol>
<p>The kappa statistic is ____ (95% CI: _____, _____), indicating ______ agreement.</p>
<p>Since the 95% confidence interval does/does not contain 0, we have/do not have sufficient evidence that there is _________ agreement between our mood on Monday and our mood on Wednesday.</p>
</section>
<section id="measuring-agreement-oberved-kappas" class="level2">
<h2 class="anchored" data-anchor-id="measuring-agreement-oberved-kappas">Measuring Agreement: Oberved Kappas</h2>
<ul>
<li><p>Guidelines for evaluating Kappa (Rosner TB)</p>
<p>&nbsp;</p>
<ul>
<li><strong>Excellent agreement</strong> if <span class="math inline">\(\hat\kappa \geq 0.75\)</span></li>
</ul>
<p>&nbsp;</p>
<ul>
<li><strong>Fair to good agreement</strong> if <span class="math inline">\(0.4 &lt; \hat\kappa &lt; 0.75\)</span></li>
</ul>
<p>&nbsp;</p>
<ul>
<li><strong>Poor agreement</strong> if <span class="math inline">\(\hat\kappa \leq 0.4\)</span></li>
</ul></li>
</ul>
<p>&nbsp;</p>
<p>If <span class="math inline">\(\hat\kappa&lt;0\)</span>, suggest agreement less than by chance</p>
</section>
</section>
<section id="learning-objectives-3" class="level1">
<h1>Learning Objectives</h1>
<ol type="1">
<li>Identify cases when it is appropriate to use risk difference, relative risk, or odds ratios</li>
<li>Expand work on contingency tables to evaluate the agreement or reproducibility using Cohen’s Kappa</li>
</ol>
<section id="measurement-of-association-so-far" class="level2">
<h2 class="anchored" data-anchor-id="measurement-of-association-so-far">Measurement of Association So Far</h2>
<ul>
<li><p>Used contingency tables to test and measure association between two variables</p>
<ul>
<li>Categorical outcome variable (Y)</li>
<li>One categorical explanatory variable (X)</li>
</ul></li>
<li><p>We looked at risk difference, risk ratio, and odds ratio to measure association</p></li>
<li><p>Such an association is called crude association</p>
<ul>
<li>No adjustment for possible confounding factors</li>
<li>Also called marginal association</li>
</ul></li>
<li><p>But we cannot expand analysis based on contingency tables past 3 variables</p>
<ul>
<li>We can get into stratified contingency tables to bring in a 3rd variable</li>
<li>But I don’t think it’s worth it because regression can bring in (adjust for) many variables</li>
</ul></li>
</ul>
</section>
</section>
<section id="extra-example-in-case-the-mood-example-fails-beautifully" class="level1">
<h1>Extra example in case the mood example fails beautifully</h1>
<section id="just-in-case-our-data-doesnt-work-out-beef-consumption-in-survey" class="level2">
<h2 class="anchored" data-anchor-id="just-in-case-our-data-doesnt-work-out-beef-consumption-in-survey">Just in case our data doesn’t work out: Beef Consumption in Survey</h2>
<p>A diet questionnaire was mailed to 537 female American nurses on two separate occasions several months apart. The questions asked included the quantities eaten of more than 100 separate food items. The data from the two surveys for the amount of beef consumption are presented in the below table. How can reproducibility of response for the beef-consumption data be quantified?</p>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="./images/beef.png" class="img-fluid figure-img"></p>
</figure>
</div>
</section>
<section id="example-beef-consumption-in-survey-13" class="level2">
<h2 class="anchored" data-anchor-id="example-beef-consumption-in-survey-13">Example: Beef Consumption in Survey (1/3)</h2>
<div class="columns">
<div class="column" style="width:62%;">
<div class="example">
<div class="ex-title">
<p>Agreement of surveys</p>
</div>
<div class="ex-cont">
<p>Compute the point estimate and 95% confidence interval for the agreement between beef consumption surveys. Similar to question: Are results reproducible for the beef-consumption in the survey?</p>
</div>
</div>
</div><div class="column" style="width:38%;">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="./images/beef.png" class="img-fluid figure-img"></p>
</figure>
</div>
</div>
</div>
<p><strong>Needed steps:</strong></p>
<ol type="1">
<li>Compute the kappa statistic</li>
<li>Find confidence interval of kappa</li>
<li>Interpret the estimate</li>
</ol>
</section>
<section id="example-beef-consumption-in-survey-23" class="level2">
<h2 class="anchored" data-anchor-id="example-beef-consumption-in-survey-23">Example: Beef Consumption in Survey (2/3)</h2>
<div class="columns">
<div class="column" style="width:62%;">
<div class="example">
<div class="ex-title">
<p>Agreement of surveys</p>
</div>
<div class="ex-cont">
<p>Compute the point estimate and 95% confidence interval for the agreement between beef consumption surveys. Similar to question: Are results reproducible for the beef-consumption in the survey?</p>
</div>
</div>
</div><div class="column" style="width:38%;">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="./images/beef.png" class="img-fluid figure-img"></p>
</figure>
</div>
</div>
</div>
<p><strong>Needed steps:</strong></p>
<p>1/2. Compute the kappa statistic and find confidence interval of kappa</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb27"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb27-1"><a href="#cb27-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(epiR)</span>
<span id="cb27-2"><a href="#cb27-2" aria-hidden="true" tabindex="-1"></a>beef <span class="ot">=</span> <span class="fu">matrix</span>(<span class="fu">c</span>(<span class="dv">136</span>, <span class="dv">92</span>, <span class="dv">69</span>, <span class="dv">240</span>), <span class="at">nrow =</span> <span class="dv">2</span>, <span class="at">byrow =</span> T)</span>
<span id="cb27-3"><a href="#cb27-3" aria-hidden="true" tabindex="-1"></a><span class="fu">epi.kappa</span>(beef, <span class="at">method =</span> <span class="st">"cohen"</span>)<span class="sc">$</span>kappa </span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>        est         se     lower     upper
1 0.3781906 0.04100635 0.2978196 0.4585616</code></pre>
</div>
</div>
</section>
<section id="example-beef-consumption-in-survey-33" class="level2">
<h2 class="anchored" data-anchor-id="example-beef-consumption-in-survey-33">Example: Beef Consumption in Survey (3/3)</h2>
<div class="columns">
<div class="column" style="width:62%;">
<div class="example">
<div class="ex-title">
<p>Agreement of surveys</p>
</div>
<div class="ex-cont">
<p>Compute the point estimate and 95% confidence interval for the agreement between beef consumption surveys. Similar to question: Are results reproducible for the beef-consumption in the survey?</p>
</div>
</div>
</div><div class="column" style="width:38%;">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="./images/beef.png" class="img-fluid figure-img"></p>
</figure>
</div>
</div>
</div>
<p><strong>Needed steps:</strong></p>
<ol start="3" type="1">
<li>Interpret the estimate</li>
</ol>
<p>The kappa statistic is 0.378 (95% CI: 0.298, 0.459), indicating fair agreement.</p>
<p>Since the 95% confidence interval does not contain 0, we have sufficient evidence that there is fair agreement between the surveys for beef consumption. The survey is not reliably reproducible since we did not achieve excellent agreement.</p>


</section>
</section>

</main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const isCodeAnnotation = (el) => {
    for (const clz of el.classList) {
      if (clz.startsWith('code-annotation-')) {                     
        return true;
      }
    }
    return false;
  }
  const clipboard = new window.ClipboardJS('.code-copy-button', {
    text: function(trigger) {
      const codeEl = trigger.previousElementSibling.cloneNode(true);
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
    }
  });
  clipboard.on('success', function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  });
  function tippyHover(el, contentFn) {
    const config = {
      allowHTML: true,
      content: contentFn,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start'
    };
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      return note.innerHTML;
    });
  }
      let selectedAnnoteEl;
      const selectorForAnnotation = ( cell, annotation) => {
        let cellAttr = 'data-code-cell="' + cell + '"';
        let lineAttr = 'data-code-annotation="' +  annotation + '"';
        const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
        return selector;
      }
      const selectCodeLines = (annoteEl) => {
        const doc = window.document;
        const targetCell = annoteEl.getAttribute("data-target-cell");
        const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
        const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
        const lines = annoteSpan.getAttribute("data-code-lines").split(",");
        const lineIds = lines.map((line) => {
          return targetCell + "-" + line;
        })
        let top = null;
        let height = null;
        let parent = null;
        if (lineIds.length > 0) {
            //compute the position of the single el (top and bottom and make a div)
            const el = window.document.getElementById(lineIds[0]);
            top = el.offsetTop;
            height = el.offsetHeight;
            parent = el.parentElement.parentElement;
          if (lineIds.length > 1) {
            const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
            const bottom = lastEl.offsetTop + lastEl.offsetHeight;
            height = bottom - top;
          }
          if (top !== null && height !== null && parent !== null) {
            // cook up a div (if necessary) and position it 
            let div = window.document.getElementById("code-annotation-line-highlight");
            if (div === null) {
              div = window.document.createElement("div");
              div.setAttribute("id", "code-annotation-line-highlight");
              div.style.position = 'absolute';
              parent.appendChild(div);
            }
            div.style.top = top - 2 + "px";
            div.style.height = height + 4 + "px";
            let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
            if (gutterDiv === null) {
              gutterDiv = window.document.createElement("div");
              gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
              gutterDiv.style.position = 'absolute';
              const codeCell = window.document.getElementById(targetCell);
              const gutter = codeCell.querySelector('.code-annotation-gutter');
              gutter.appendChild(gutterDiv);
            }
            gutterDiv.style.top = top - 2 + "px";
            gutterDiv.style.height = height + 4 + "px";
          }
          selectedAnnoteEl = annoteEl;
        }
      };
      const unselectCodeLines = () => {
        const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
        elementsIds.forEach((elId) => {
          const div = window.document.getElementById(elId);
          if (div) {
            div.remove();
          }
        });
        selectedAnnoteEl = undefined;
      };
      // Attach click handler to the DT
      const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
      for (const annoteDlNode of annoteDls) {
        annoteDlNode.addEventListener('click', (event) => {
          const clickedEl = event.target;
          if (clickedEl !== selectedAnnoteEl) {
            unselectCodeLines();
            const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
            if (activeEl) {
              activeEl.classList.remove('code-annotation-active');
            }
            selectCodeLines(clickedEl);
            clickedEl.classList.add('code-annotation-active');
          } else {
            // Unselect the line
            unselectCodeLines();
            clickedEl.classList.remove('code-annotation-active');
          }
        });
      }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
</div> <!-- /content -->



</body></html>