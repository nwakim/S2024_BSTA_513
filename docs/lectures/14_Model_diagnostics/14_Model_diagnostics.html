<!DOCTYPE html>
<html lang="en"><head>
<script src="../../site_libs/clipboard/clipboard.min.js"></script>
<script src="../../site_libs/quarto-html/tabby.min.js"></script>
<script src="../../site_libs/quarto-html/popper.min.js"></script>
<script src="../../site_libs/quarto-html/tippy.umd.min.js"></script>
<link href="../../site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="../../site_libs/quarto-html/light-border.css" rel="stylesheet">
<link href="../../site_libs/quarto-html/quarto-html.min.css" rel="stylesheet" data-mode="light">
<link href="../../site_libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" id="quarto-text-highlighting-styles"><meta charset="utf-8">
  <meta name="generator" content="quarto-1.3.450">

  <meta name="author" content="Nicky Wakim">
  <meta name="dcterms.date" content="2024-05-20">
  <title>Categorical Data Analysis - Lesson 14: Model Diagnostics</title>
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, minimal-ui">
  <link rel="stylesheet" href="../../site_libs/revealjs/dist/reset.css">
  <link rel="stylesheet" href="../../site_libs/revealjs/dist/reveal.css">
  <style>
    code{white-space: pre-wrap;}
    span.smallcaps{font-variant: small-caps;}
    div.columns{display: flex; gap: min(4vw, 1.5em);}
    div.column{flex: auto; overflow-x: auto;}
    div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
    ul.task-list{list-style: none;}
    ul.task-list li input[type="checkbox"] {
      width: 0.8em;
      margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
      vertical-align: middle;
    }
    /* CSS for syntax highlighting */
    pre > code.sourceCode { white-space: pre; position: relative; }
    pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
    pre > code.sourceCode > span:empty { height: 1.2em; }
    .sourceCode { overflow: visible; }
    code.sourceCode > span { color: inherit; text-decoration: inherit; }
    div.sourceCode { margin: 1em 0; }
    pre.sourceCode { margin: 0; }
    @media screen {
    div.sourceCode { overflow: auto; }
    }
    @media print {
    pre > code.sourceCode { white-space: pre-wrap; }
    pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
    }
    pre.numberSource code
      { counter-reset: source-line 0; }
    pre.numberSource code > span
      { position: relative; left: -4em; counter-increment: source-line; }
    pre.numberSource code > span > a:first-child::before
      { content: counter(source-line);
        position: relative; left: -1em; text-align: right; vertical-align: baseline;
        border: none; display: inline-block;
        -webkit-touch-callout: none; -webkit-user-select: none;
        -khtml-user-select: none; -moz-user-select: none;
        -ms-user-select: none; user-select: none;
        padding: 0 4px; width: 4em;
      }
    pre.numberSource { margin-left: 3em;  padding-left: 4px; }
    div.sourceCode
      { color: #575f66;  }
    @media screen {
    pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
    }
    code span { color: #575f66; } /* Normal */
    code span.al { color: #f51818; background-color: #faefef; font-weight: bold; } /* Alert */
    code span.an { color: #e6ba7e; } /* Annotation */
    code span.at { color: #399ee6; } /* Attribute */
    code span.bn { color: #ff9940; } /* BaseN */
    code span.bu { color: #4cbf99; } /* BuiltIn */
    code span.cf { color: #fa8d3e; font-weight: bold; } /* ControlFlow */
    code span.ch { color: #4cbf99; } /* Char */
    code span.cn { color: #a37acc; } /* Constant */
    code span.co { color: #607880; font-style: italic; } /* Comment */
    code span.cv { color: #a37acc; } /* CommentVar */
    code span.do { color: #607880; } /* Documentation */
    code span.dt { color: #fa8d3e; } /* DataType */
    code span.dv { color: #ff9940; } /* DecVal */
    code span.er { color: #f51818; text-decoration: underline; } /* Error */
    code span.ex { color: #399ee6; font-weight: bold; } /* Extension */
    code span.fl { color: #ff9940; } /* Float */
    code span.fu { color: #f2ae49; } /* Function */
    code span.im { color: #86b300; } /* Import */
    code span.in { color: #ff9940; } /* Information */
    code span.kw { color: #fa8d3e; font-weight: bold; } /* Keyword */
    code span.op { color: #ed9366; } /* Operator */
    code span.ot { color: #55b4d4; } /* Other */
    code span.pp { color: #f07171; } /* Preprocessor */
    code span.re { color: #399ee6; background-color: #ddecf3; } /* RegionMarker */
    code span.sc { color: #4cbf99; } /* SpecialChar */
    code span.ss { color: #4cbf99; } /* SpecialString */
    code span.st { color: #86b300; } /* String */
    code span.va { color: #55b4d4; } /* Variable */
    code span.vs { color: #86b300; } /* VerbatimString */
    code span.wa { color: #f07171; } /* Warning */
  </style>
  <link rel="stylesheet" href="../../site_libs/revealjs/dist/theme/quarto.css">
  <link href="../../site_libs/revealjs/plugin/quarto-line-highlight/line-highlight.css" rel="stylesheet">
  <link href="../../site_libs/revealjs/plugin/reveal-menu/menu.css" rel="stylesheet">
  <link href="../../site_libs/revealjs/plugin/reveal-menu/quarto-menu.css" rel="stylesheet">
  <link href="../../site_libs/revealjs/plugin/reveal-chalkboard/font-awesome/css/all.css" rel="stylesheet">
  <link href="../../site_libs/revealjs/plugin/reveal-chalkboard/style.css" rel="stylesheet">
  <link href="../../site_libs/revealjs/plugin/quarto-support/footer.css" rel="stylesheet">
  <style type="text/css">

  .callout {
    margin-top: 1em;
    margin-bottom: 1em;  
    border-radius: .25rem;
  }

  .callout.callout-style-simple { 
    padding: 0em 0.5em;
    border-left: solid #acacac .3rem;
    border-right: solid 1px silver;
    border-top: solid 1px silver;
    border-bottom: solid 1px silver;
    display: flex;
  }

  .callout.callout-style-default {
    border-left: solid #acacac .3rem;
    border-right: solid 1px silver;
    border-top: solid 1px silver;
    border-bottom: solid 1px silver;
  }

  .callout .callout-body-container {
    flex-grow: 1;
  }

  .callout.callout-style-simple .callout-body {
    font-size: 1rem;
    font-weight: 400;
  }

  .callout.callout-style-default .callout-body {
    font-size: 0.9rem;
    font-weight: 400;
  }

  .callout.callout-titled.callout-style-simple .callout-body {
    margin-top: 0.2em;
  }

  .callout:not(.callout-titled) .callout-body {
      display: flex;
  }

  .callout:not(.no-icon).callout-titled.callout-style-simple .callout-content {
    padding-left: 1.6em;
  }

  .callout.callout-titled .callout-header {
    padding-top: 0.2em;
    margin-bottom: -0.2em;
  }

  .callout.callout-titled .callout-title  p {
    margin-top: 0.5em;
    margin-bottom: 0.5em;
  }
    
  .callout.callout-titled.callout-style-simple .callout-content  p {
    margin-top: 0;
  }

  .callout.callout-titled.callout-style-default .callout-content  p {
    margin-top: 0.7em;
  }

  .callout.callout-style-simple div.callout-title {
    border-bottom: none;
    font-size: .9rem;
    font-weight: 600;
    opacity: 75%;
  }

  .callout.callout-style-default  div.callout-title {
    border-bottom: none;
    font-weight: 600;
    opacity: 85%;
    font-size: 0.9rem;
    padding-left: 0.5em;
    padding-right: 0.5em;
  }

  .callout.callout-style-default div.callout-content {
    padding-left: 0.5em;
    padding-right: 0.5em;
  }

  .callout.callout-style-simple .callout-icon::before {
    height: 1rem;
    width: 1rem;
    display: inline-block;
    content: "";
    background-repeat: no-repeat;
    background-size: 1rem 1rem;
  }

  .callout.callout-style-default .callout-icon::before {
    height: 0.9rem;
    width: 0.9rem;
    display: inline-block;
    content: "";
    background-repeat: no-repeat;
    background-size: 0.9rem 0.9rem;
  }

  .callout-title {
    display: flex
  }
    
  .callout-icon::before {
    margin-top: 1rem;
    padding-right: .5rem;
  }

  .callout.no-icon::before {
    display: none !important;
  }

  .callout.callout-titled .callout-body > .callout-content > :last-child {
    margin-bottom: 0.5rem;
  }

  .callout.callout-titled .callout-icon::before {
    margin-top: .5rem;
    padding-right: .5rem;
  }

  .callout:not(.callout-titled) .callout-icon::before {
    margin-top: 1rem;
    padding-right: .5rem;
  }

  /* Callout Types */

  div.callout-note {
    border-left-color: #4582ec !important;
  }

  div.callout-note .callout-icon::before {
    background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAAAXNSR0IArs4c6QAAAERlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAA6ABAAMAAAABAAEAAKACAAQAAAABAAAAIKADAAQAAAABAAAAIAAAAACshmLzAAAEU0lEQVRYCcVXTWhcVRQ+586kSUMMxkyaElstCto2SIhitS5Ek8xUKV2poatCcVHtUlFQk8mbaaziwpWgglJwVaquitBOfhQXFlqlzSJpFSpIYyXNjBNiTCck7x2/8/LeNDOZxDuEkgOXe++553zfefee+/OYLOXFk3+1LLrRdiO81yNqZ6K9cG0P3MeFaMIQjXssE8Z1JzLO9ls20MBZX7oG8w9GxB0goaPrW5aNMp1yOZIa7Wv6o2ykpLtmAPs/vrG14Z+6d4jpbSKuhdcSyq9wGMPXjonwmESXrriLzFGOdDBLB8Y6MNYBu0dRokSygMA/mrun8MGFN3behm6VVAwg4WR3i6FvYK1T7MHo9BK7ydH+1uurECoouk5MPRyVSBrBHMYwVobG2aOXM07sWrn5qgB60rc6mcwIDJtQrnrEr44kmy+UO9r0u9O5/YbkS9juQckLed3DyW2XV/qWBBB3ptvI8EUY3I9p/67OW+g967TNr3Sotn3IuVlfMLVnsBwH4fsnebJvyGm5GeIUA3jljERmrv49SizPYuq+z7c2H/jlGC+Ghhupn/hcapqmcudB9jwJ/3jvnvu6vu5lVzF1fXyZuZZ7U8nRmVzytvT+H3kilYvH09mLWrQdwFSsFEsxFVs5fK7A0g8gMZjbif4ACpKbjv7gNGaD8bUrlk8x+KRflttr22JEMRUbTUwwDQScyzPgedQHZT0xnx7ujw2jfVfExwYHwOsDTjLdJ2ebmeQIlJ7neo41s/DrsL3kl+W2lWvAga0tR3zueGr6GL78M3ifH0rGXrBC2aAR8uYcIA5gwV8zIE8onoh8u0Fca/ciF7j1uOzEnqcIm59sEXoGc0+z6+H45V1CvAvHcD7THztu669cnp+L0okAeIc6zjbM/24LgGM1gZk7jnRu1aQWoU9sfUOuhrmtaPIO3YY1KLLWZaEO5TKUbMY5zx8W9UJ6elpLwKXbsaZ4EFl7B4bMtDv0iRipKoDQT2sNQI9b1utXFdYisi+wzZ/ri/1m7QfDgEuvgUUEIJPq3DhX/5DWNqIXDOweC2wvIR90Oq3lDpdMIgD2r0dXvGdsEW5H6x6HLRJYU7C69VefO1x8Gde1ZFSJLfWS1jbCnhtOPxmpfv2LXOA2Xk2tvnwKKPFuZ/oRmwBwqRQDcKNeVQkYcOjtWVBuM/JuYw5b6isojIkYxyYAFn5K7ZBF10fea52y8QltAg6jnMqNHFBmGkQ1j+U43HMi2xMar1Nv0zGsf1s8nUsmUtPOOrbFIR8bHFDMB5zL13Gmr/kGlCkUzedTzzmzsaJXhYawnA3UmARpiYj5ooJZiUoxFRtK3X6pgNPv+IZVPcnwbOl6f+aBaO1CNvPW9n9LmCp01nuSaTRF2YxHqZ8DYQT6WsXT+RD6eUztwYLZ8rM+rcPxamv1VQzFUkzFXvkiVrySGQgJNvXHJAxiU3/NwiC03rSf05VBaPtu/Z7/B8Yn/w7eguloAAAAAElFTkSuQmCC');
  }

  div.callout-note.callout-style-default .callout-title {
    background-color: #dae6fb
  }

  div.callout-important {
    border-left-color: #d9534f !important;
  }

  div.callout-important .callout-icon::before {
    background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAAAXNSR0IArs4c6QAAAERlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAA6ABAAMAAAABAAEAAKACAAQAAAABAAAAIKADAAQAAAABAAAAIAAAAACshmLzAAAEKklEQVRYCcVXTWhcVRS+575MJym48A+hSRFr00ySRQhURRfd2HYjk2SSTokuBCkU2o0LoSKKraKIBTcuFCoidGFD08nkBzdREbpQ1EDNIv8qSGMFUboImMSZd4/f9zJv8ibJMC8xJQfO3HPPPef7zrvvvnvviIkpC9nsw0UttFunbUhpFzFtarSd6WJkStVMw5xyVqYTvkwfzuf/5FgtkVoB0729j1rjXwThS7Vio+Mo6DNnvLfahoZ+i/o32lULuJ3NNiz7q6+pyAUkJaFF6JwaM2lUJlV0MlnQn5aTRbEu0SEqHUa0A4AdiGuB1kFXRfVyg5d87+Dg4DL6m2TLAub60ilj7A1Ec4odSAc8X95sHh7+ZRPCFo6Fnp7HfU/fBng/hi10CjCnWnJjsxvDNxWw0NfV6Rv5GgP3I3jGWXumdTD/3cbEOP2ZbOZp69yniG3FQ9z1jD7bnBu9Fc2tKGC2q+uAJOQHBDRiZX1x36o7fWBs7J9ownbtO+n0/qWkvW7UPIfc37WgT6ZGR++EOJyeQDSb9UB+DZ1G6DdLDzyS+b/kBCYGsYgJbSQHuThGKRcw5xdeQf8YdNHsc6ePXrlSYMBuSIAFTGAtQo+VuALo4BX83N190NWZWbynBjhOHsmNfFWLeL6v+ynsA58zDvvAC8j5PkbOcXCMg2PZFk3q8MjI7WAG/Dp9AwP7jdGBOOQkAvlFUB+irtm16I1Zw9YBcpGTGXYmk3kQIC/Cds55l+iMI3jqhjAuaoe+am2Jw5GT3Nbz3CkE12NavmzN5+erJW7046n/CH1RO/RVa8lBLozXk9uqykkGAyRXLWlLv5jyp4RFsG5vGVzpDLnIjTWgnRy2Rr+tDKvRc7Y8AyZq10jj8DqXdnIRNtFZb+t/ZRtXcDiVnzpqx8mPcDWxgARUqx0W1QB9MeUZiNrV4qP+Ehc+BpNgATsTX8ozYKL2NtFYAHc84fG7ndxUPr+AR/iQSns7uSUufAymwDOb2+NjK27lEFocm/EE2WpyIy/Hi66MWuMKJn8RvxIcj87IM5Vh9663ziW36kR0HNenXuxmfaD8JC7tfKbrhFr7LiZCrMjrzTeGx+PmkosrkNzW94ObzwocJ7A1HokLolY+AvkTiD/q1H0cN48c5EL8Crkttsa/AXQVDmutfyku0E7jShx49XqV3MFK8IryDhYVbj7Sj2P2eBxwcXoe8T8idsKKPRcnZw1b+slFTubwUwhktrfnAt7J++jwQtLZcm3sr9LQrjRzz6cfMv9aLvgmnAGvpoaGLxM4mAEaLV7iAzQ3oU0IvD5x9ix3yF2RAAuYAOO2f7PEFWCXZ4C9Pb2UsgDeVnFSpbFK7/IWu7TPTvBqzbGdCHOJQSxiEjt6IyZmxQyEJHv6xyQsYk//moVFsN2zP6fRImjfq7/n/wFDguUQFNEwugAAAABJRU5ErkJggg==');
  }

  div.callout-important.callout-style-default .callout-title {
    background-color: #f7dddc
  }

  div.callout-warning {
    border-left-color: #f0ad4e !important;
  }

  div.callout-warning .callout-icon::before {
    background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAAAXNSR0IArs4c6QAAAERlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAA6ABAAMAAAABAAEAAKACAAQAAAABAAAAIKADAAQAAAABAAAAIAAAAACshmLzAAAETklEQVRYCeVWW2gcVRg+58yaTUnizqbipZeX4uWhBEniBaoUX1Ioze52t7sRq6APio9V9MEaoWlVsFasRq0gltaAPuxms8lu0gcviE/FFOstVbSIxgcv6SU7EZqmdc7v9+9mJtNks51NTUH84ed889/PP+cmxP+d5FIbMJmNbpREu4WUkiTtCicKny0l1pIKmBzovF2S+hIJHX8iEu3hZJ5lNZGqyRrGSIQpq15AzF28jgpeY6yk6GVdrfFqdrD6Iw+QlB8g0YS2g7dyQmXM/IDhBhT0UCiRf59lfqmmDvzRt6kByV/m4JjtzuaujMUM2c5Z2d6JdKrRb3K2q6mA+oYVz8JnDdKPmmNthzkAk/lN63sYPgevrguc72aZX/L9C6x09GYyxBgCX4NlvyGUHOKELlm5rXeR1kchuChJt4SSwyddZRXgvwMGvYo4QSlk3/zkHD8UHxwVJA6zjZZqP8v8kK8OWLnIZtLyCAJagYC4rTGW/9Pqj92N/c+LUaAj27movwbi19tk/whRCIE7Q9vyI6yvRpftAKVTdUjOW40X3h5OXsKCdmFcx0xlLJoSuQngnrJe7Kcjm4OMq9FlC7CMmScQANuNvjfP3PjGXDBaUQmbp296S5L4DrpbrHN1T87ZVEZVCzg1FF0Ft+dKrlLukI+/c9ENo+TvlTDbYFvuKPtQ9+l052rXrgKoWkDAFnvh0wTOmYn8R5f4k/jN/fZiCM1tQx9jQQ4ANhqG4hiL0qIFTGViG9DKB7GYzgubnpofgYRwO+DFjh0Zin2m4b/97EDkXkc+f6xYAPX0KK2I/7fUQuwzuwo/L3AkcjugPNixC8cHf0FyPjWlItmLxWw4Ou9YsQCr5fijMGoD/zpdRy95HRysyXA74MWOnscpO4j2y3HAVisw85hX5+AFBRSHt4ShfLFkIMXTqyKFc46xdzQM6XbAi702a7sy04J0+feReMFKp5q9esYLCqAZYw/k14E/xcLLsFElaornTuJB0svMuJINy8xkIYuL+xPAlWRceH6+HX7THJ0djLUom46zREu7tTkxwmf/FdOZ/sh6Q8qvEAiHpm4PJ4a/doJe0gH1t+aHRgCzOvBvJedEK5OFE5jpm4AGP2a8Dxe3gGJ/pAutug9Gp6he92CsSsWBaEcxGx0FHytmIpuqGkOpldqNYQK8cSoXvd+xLxXADw0kf6UkJNFtdo5MOgaLjiQOQHcn+A6h5NuL2s0qsC2LOM75PcF3yr5STuBSAcGG+meA14K/CI21HcS4LBT6tv0QAh8Dr5l93AhZzG5ZJ4VxAqdZUEl9z7WJ4aN+svMvwHHL21UKTd1mqvChH7/Za5xzXBBKrUcB0TQ+Ulgkfbi/H/YT5EptrGzsEK7tR1B7ln9BBwckYfMiuSqklSznIuoIIOM42MQO+QnduCoFCI0bpkzjCjddHPN/F+2Yu+sd9bKNpVwHhbS3LluK/0zgfwD0xYI5dXuzlQAAAABJRU5ErkJggg==');
  }

  div.callout-warning.callout-style-default .callout-title {
    background-color: #fcefdc
  }

  div.callout-tip {
    border-left-color: #02b875 !important;
  }

  div.callout-tip .callout-icon::before {
    background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAAAXNSR0IArs4c6QAAAERlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAA6ABAAMAAAABAAEAAKACAAQAAAABAAAAIKADAAQAAAABAAAAIAAAAACshmLzAAADr0lEQVRYCe1XTWgTQRj9ZjZV8a9SPIkKgj8I1bMHsUWrqYLVg4Ue6v9BwZOxSYsIerFao7UiUryIqJcqgtpimhbBXoSCVxUFe9CTiogUrUp2Pt+3aUI2u5vdNh4dmMzOzHvvezuz8xNFM0mjnbXaNu1MvFWRXkXEyE6aYOYJpdW4IXuA4r0fo8qqSMDBU0v1HJUgVieAXxzCsdE/YJTdFcVIZQNMyhruOMJKXYFoLfIfIvVIMWdsrd+Rpd86ZmyzzjJmLStqRn0v8lzkb4rVIXvnpScOJuAn2ACC65FkPzEdEy4TPWRLJ2h7z4cArXzzaOdKlbOvKKX25Wl00jSnrwVxAg3o4dRxhO13RBSdNvH0xSARv3adTXbBdTf64IWO2vH0LT+cv4GR1DJt+DUItaQogeBX/chhbTBxEiZ6gftlDNXTrvT7co4ub5A6gp9HIcHvzTa46OS5fBeP87Qm0fQkr4FsYgVQ7Qg+ZayaDg9jhg1GkWj8RG6lkeSacrrHgDaxdoBiZPg+NXV/KifMuB6//JmYH4CntVEHy/keA6x4h4CU5oFy8GzrBS18cLJMXcljAKB6INjWsRcuZBWVaS3GDrqB7rdapVIeA+isQ57Eev9eCqzqOa81CY05VLd6SamW2wA2H3SiTbnbSxmzfp7WtKZkqy4mdyAlGx7ennghYf8voqp9cLSgKdqNfa6RdRsAAkPwRuJZNbpByn+RrJi1RXTwdi8RQF6ymDwGMAtZ6TVE+4uoKh+MYkcLsT0Hk8eAienbiGdjJHZTpmNjlbFJNKDVAp2fJlYju6IreQxQ08UJDNYdoLSl6AadO+fFuCQqVMB1NJwPm69T04Wv5WhfcWyfXQB+wXRs1pt+nCknRa0LVzSA/2B+a9+zQJadb7IyyV24YAxKp2Jqs3emZTuNnKxsah+uabKbMk7CbTgJx/zIgQYErIeTKRQ9yD9wxVof5YolPHqaWo7TD6tJlh7jQnK5z2n3+fGdggIOx2kaa2YI9QWarc5Ce1ipNWMKeSG4DysFF52KBmTNMmn5HqCFkwy34rDg05gDwgH3bBi+sgFhN/e8QvRn8kbamCOhgrZ9GJhFDgfcMHzFb6BAtjKpFhzTjwv1KCVuxHvCbsSiEz4CANnj84cwHdFXAbAOJ4LTSAawGWFn5tDhLMYz6nWeU2wJfIhmIJBefcd/A5FWQWGgrWzyORZ3Q6HuV+Jf0Bj+BTX69fm1zWgK7By1YTXchFDORywnfQ7GpzOo6S+qECrsx2ifVQAAAABJRU5ErkJggg==');
  }

  div.callout-tip.callout-style-default .callout-title {
    background-color: #ccf1e3
  }

  div.callout-caution {
    border-left-color: #fd7e14 !important;
  }

  div.callout-caution .callout-icon::before {
    background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAAAXNSR0IArs4c6QAAAERlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAA6ABAAMAAAABAAEAAKACAAQAAAABAAAAIKADAAQAAAABAAAAIAAAAACshmLzAAACV0lEQVRYCdVWzWoUQRCuqp2ICBLJXgITZL1EfQDBW/bkzUMUD7klD+ATSHBEfAIfQO+iXsWDxJsHL96EHAwhgzlkg8nBg25XWb0zIb0zs9muYYWkoKeru+vn664fBqElyZNuyh167NXJ8Ut8McjbmEraKHkd7uAnAFku+VWdb3reSmRV8PKSLfZ0Gjn3a6Xlcq9YGb6tADjn+lUfTXtVmaZ1KwBIvFI11rRXlWlatwIAAv2asaa9mlB9wwygiDX26qaw1yYPzFXg2N1GgG0FMF8Oj+VIx7E/03lHx8UhvYyNZLN7BwSPgekXXLribw7w5/c8EF+DBK5idvDVYtEEwMeYefjjLAdEyQ3M9nfOkgnPTEkYU+sxMq0BxNR6jExrAI31H1rzvLEfRIdgcv1XEdj6QTQAS2wtstEALLG1yEZ3QhH6oDX7ExBSFEkFINXH98NTrme5IOaaA7kIfiu2L8A3qhH9zRbukdCqdsA98TdElyeMe5BI8Rs2xHRIsoTSSVFfCFCWGPn9XHb4cdobRIWABNf0add9jakDjQJpJ1bTXOJXnnRXHRf+dNL1ZV1MBRCXhMbaHqGI1JkKIL7+i8uffuP6wVQAzO7+qVEbF6NbS0LJureYcWXUUhH66nLR5rYmva+2tjRFtojkM2aD76HEGAD3tPtKM309FJg5j/K682ywcWJ3PASCcycH/22u+Bh7Aa0ehM2Fu4z0SAE81HF9RkB21c5bEn4Dzw+/qNOyXr3DCTQDMBOdhi4nAgiFDGCinIa2owCEChUwD8qzd03PG+qdW/4fDzjUMcE1ZpIAAAAASUVORK5CYII=');
  }

  div.callout-caution.callout-style-default .callout-title {
    background-color: #ffe5d0
  }

  </style>
  <style type="text/css">
    .reveal div.sourceCode {
      margin: 0;
      overflow: auto;
    }
    .reveal div.hanging-indent {
      margin-left: 1em;
      text-indent: -1em;
    }
    .reveal .slide:not(.center) {
      height: 100%;
    }
    .reveal .slide.scrollable {
      overflow-y: auto;
    }
    .reveal .footnotes {
      height: 100%;
      overflow-y: auto;
    }
    .reveal .slide .absolute {
      position: absolute;
      display: block;
    }
    .reveal .footnotes ol {
      counter-reset: ol;
      list-style-type: none; 
      margin-left: 0;
    }
    .reveal .footnotes ol li:before {
      counter-increment: ol;
      content: counter(ol) ". "; 
    }
    .reveal .footnotes ol li > p:first-child {
      display: inline-block;
    }
    .reveal .slide ul,
    .reveal .slide ol {
      margin-bottom: 0.5em;
    }
    .reveal .slide ul li,
    .reveal .slide ol li {
      margin-top: 0.4em;
      margin-bottom: 0.2em;
    }
    .reveal .slide ul[role="tablist"] li {
      margin-bottom: 0;
    }
    .reveal .slide ul li > *:first-child,
    .reveal .slide ol li > *:first-child {
      margin-block-start: 0;
    }
    .reveal .slide ul li > *:last-child,
    .reveal .slide ol li > *:last-child {
      margin-block-end: 0;
    }
    .reveal .slide .columns:nth-child(3) {
      margin-block-start: 0.8em;
    }
    .reveal blockquote {
      box-shadow: none;
    }
    .reveal .tippy-content>* {
      margin-top: 0.2em;
      margin-bottom: 0.7em;
    }
    .reveal .tippy-content>*:last-child {
      margin-bottom: 0.2em;
    }
    .reveal .slide > img.stretch.quarto-figure-center,
    .reveal .slide > img.r-stretch.quarto-figure-center {
      display: block;
      margin-left: auto;
      margin-right: auto; 
    }
    .reveal .slide > img.stretch.quarto-figure-left,
    .reveal .slide > img.r-stretch.quarto-figure-left  {
      display: block;
      margin-left: 0;
      margin-right: auto; 
    }
    .reveal .slide > img.stretch.quarto-figure-right,
    .reveal .slide > img.r-stretch.quarto-figure-right  {
      display: block;
      margin-left: auto;
      margin-right: 0; 
    }
  </style>
</head>
<body class="quarto-light">
  <div class="reveal">
    <div class="slides">

<section id="title-slide" data-background-color="#C2352F" class="quarto-title-block center">
  <h1 class="title">Lesson 14: Model Diagnostics</h1>

<div class="quarto-title-authors">
<div class="quarto-title-author">
<div class="quarto-title-author-name">
Nicky Wakim 
</div>
</div>
</div>

  <p class="date">2024-05-20</p>
</section>
<section>
<section id="learning-objectives" class="title-slide slide level1 center">
<h1>Learning Objectives</h1>
<ol type="1">
<li><p>Understand the components of calculations for logistic regression diagnostics</p></li>
<li><p>Plot and determine observations where regression does not fit well or are influential using specific diagnostic values</p></li>
</ol>
<div class="cell">
<style type="text/css">
.reveal code {
  max-height: 80% !important;
}
</style>
</div>
</section>
<section id="review-of-model-assessment-so-far-12" class="slide level2">
<h2>Review of model assessment so far (1/2)</h2>
<ul>
<li><p>Overall measurements of fit</p>
<ul>
<li><p>How well does the fitted logistic regression model predict the outcome?</p></li>
<li><p>Different ways to measure the answer to this question</p></li>
</ul></li>
</ul>
<table style="width:100%;">
<colgroup>
<col style="width: 22%">
<col style="width: 22%">
<col style="width: 33%">
<col style="width: 22%">
</colgroup>
<thead>
<tr class="header">
<th>Measure of fit</th>
<th>Hypothesis tested?</th>
<th>Equation</th>
<th>R code</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>Pearson residual</td>
<td>Yes</td>
<td><span class="math inline">\(X^2=\sum_{j=1}^{J}{r\left(Y_j,{\hat{\pi}}_j\right)^2}\)</span></td>
<td>Not given</td>
</tr>
<tr class="even">
<td>Hosmer-Lemeshow test</td>
<td>Yes</td>
<td><span class="math inline">\(\hat{C}=\sum_{k=1}^{g}\frac{\left(o_k-n_k^\prime{\bar{\pi}}_k\right)^2}{n_k^\prime{\bar{\pi}}_k(1-{\bar{\pi}}_k)}\)</span></td>
<td><code>hoslem.test()</code></td>
</tr>
<tr class="odd">
<td>AUC-ROC</td>
<td>Kinda</td>
<td>Not given</td>
<td><code>auc(observed, predicted)</code></td>
</tr>
<tr class="even">
<td>AIC</td>
<td>Only to compare models</td>
<td><span class="math inline">\(AIC = -2 \cdot \text{log-likelihood} + 2q\)</span></td>
<td><code>AIC(model_name)</code></td>
</tr>
<tr class="odd">
<td>BIC</td>
<td>Only to compare models</td>
<td><span class="math inline">\(BIC = -2 \cdot \text{log-likelihood} + q\text{log}(n)\)</span></td>
<td><code>BIC(model_name)</code></td>
</tr>
</tbody>
</table>
</section>
<section id="review-of-model-assessment-so-far-22" class="slide level2">
<h2>Review of model assessment so far (2/2)</h2>
<ul>
<li><p>Numerical problems</p>
<ul>
<li>Assess pre and post model fit</li>
<li>Numerical problems often depend on the final model (which variables and interactions are included)</li>
</ul></li>
<li><p>Different numerical problems to look out for</p>
<ul>
<li>Zero cell count</li>
<li>Complete separation</li>
<li>Multicollinearity</li>
</ul></li>
</ul>
</section>
<section id="today" class="slide level2">
<h2>Today</h2>
<ul>
<li>We now use model diagnostics to identify any observations that the model does not fit well</li>
</ul>
</section></section>
<section>
<section id="learning-objectives-1" class="title-slide slide level1 center">
<h1>Learning Objectives</h1>
<div class="lob">
<ol type="1">
<li>Understand the components of calculations for logistic regression diagnostics</li>
</ol>
</div>
<ol start="2" type="1">
<li>Plot and determine observations where regression does not fit well or are influential using specific diagnostic values</li>
</ol>
</section>
<section id="review-of-number-of-covariate-patterns" class="slide level2">
<h2>Review of Number of Covariate Patterns</h2>
<ul>
<li>Covariate patterns are the <strong>unique covariate combinations</strong> that are observed</li>
</ul>
<p>&nbsp;</p>
<ul>
<li><p><strong>For example:</strong> model contains two binary covariates (history of fracture and smoking status), there will be <strong>4 unique combination of these factors</strong></p>
<ul>
<li>This model has <strong>4 covariate patterns</strong></li>
<li>Subjects can be divided into 4 groups based on the covariates‚Äô values</li>
</ul></li>
</ul>
<p>&nbsp;</p>
<ul>
<li>When we have <strong>continuous covariates</strong>, the number of covariate patterns will be close to the <strong>number of individuals in the dataset</strong></li>
</ul>
</section>
<section id="from-overall-measure-to-diagnostics" class="slide level2">
<h2>From overall measure to diagnostics</h2>
<ul>
<li><p>Now we need to investigate diagnostics looking at individual data or covariate pattern data</p>
<ul>
<li>Make sure the overall measure has not been influenced by certain observations</li>
</ul></li>
</ul>
<p>&nbsp;</p>
<ul>
<li><p>The key quantities from logistic regression diagnostics are the components of ‚Äúresidual sum-of-squares‚Äù</p>
<ul>
<li><p>The same idea as in the linear regression</p></li>
<li><p>Assessed for <strong>each covariate pattern</strong> <span class="math inline">\(j\)</span>, by computing standardized Pearson residuals and Deviance residuals</p>
<ul>
<li>Standardization using <span class="math inline">\(h_j\)</span>, the leverage values</li>
</ul></li>
</ul></li>
</ul>
</section>
<section id="hat-matrix-and-leverage-values-linear-regression" class="slide level2">
<h2>Hat Matrix and Leverage Values: Linear regression</h2>
<ul>
<li>We have learned ‚Äúhat‚Äù matrix and leverage values from linear regression diagnostics</li>
</ul>
<p>&nbsp;</p>
<ul>
<li><p>In linear regression, the hat matrix projects the outcome variable onto the covariate space:</p>
<p>&nbsp;</p>
<ul>
<li><span class="math inline">\(H=X\left(X^\prime X\right)^{-1}X^\prime\)</span> and <span class="math inline">\(\hat{y}=Hy\)</span></li>
</ul>
<p>&nbsp;</p>
<ul>
<li>The linear regression residuals is thus <span class="math inline">\(y - \widehat{y}\)</span>, or <span class="math inline">\((I-H)y\)</span></li>
</ul></li>
</ul>
<p>&nbsp;</p>
<ul>
<li>The leverage is just the diagonal elements of the hat matrix, which is proportional to the distance of <span class="math inline">\(x_j\)</span> to the mean of the data <span class="math inline">\(\overline{x}\)</span></li>
</ul>
</section>
<section id="hat-matrix-and-leverage-values-logistic-regression" class="slide level2">
<h2>Hat Matrix and Leverage Values: Logistic regression</h2>
<ul>
<li><p>In logistic regression model, the hat matrix is: <span class="math display">\[H=V^\frac{1}{2}X\left(X^\prime V\ X\right)^{-1}X^\prime V^\frac{1}{2}\]</span></p></li>
<li><p>The leverage is <span class="math display">\[h_j=m_j\cdot\hat{\pi}\left(\textbf{x}_j\right)\left[1-\hat{\pi}\left(\textbf{x}_j\right)\right]\textbf{x}_j^\prime\left(\textbf{X}^\prime\textbf{VX}\right)^{-1}\textbf{x}_j=v_j\cdot b_j\]</span></p>
<ul>
<li><p><span class="math inline">\(b\)</span>: weighted distance of <span class="math inline">\(x_j\)</span> from <span class="math inline">\(\overline{x}\)</span></p></li>
<li><p><span class="math inline">\(v_j\)</span>: model based estimator of the variance of <span class="math inline">\(y_j\)</span></p>
<ul>
<li><span class="math inline">\(v_j=m_j\cdot\hat{\pi}\left(\textbf{x}_j\right)\left[1-\hat{\pi}\left(\textbf{x}_j\right)\right]\)</span></li>
</ul></li>
</ul></li>
<li><p><span class="math inline">\(h_j\)</span> <strong>reflects the relative influence of each covariate pattern on the model‚Äôs fit</strong></p></li>
</ul>
</section>
<section id="poll-everywhere-question-1" class="slide level2">
<h2>Poll Everywhere Question 1</h2>
</section>
<section id="poll-everywhere-question-2" class="slide level2">
<h2>Poll Everywhere Question 2</h2>
</section>
<section id="diagnostic-statistics-computation-12" class="slide level2">
<h2>Diagnostic Statistics Computation (1/2)</h2>
<ul>
<li><p>Two diagnostic statistics computation approach</p>
<ul>
<li><p><strong>Approach 1</strong>: computed by covariate pattern</p>
<ul>
<li>Recommendation of Hosmer-Lemeshow textbook</li>
<li>R uses this approach</li>
<li>Identify outliers as group that shares the same covariate values (in the same covariate pattern)</li>
</ul></li>
<li><p><strong>Approach 2</strong>: individual observation approach</p>
<ul>
<li>SAS uses this approach</li>
<li>Identify outliers as individual</li>
</ul></li>
</ul></li>
<li><p>Why prefer covariate patterns approach?</p>
<ul>
<li>When the number of covariate pattern is much smaller than n, there is risk that we may fail to identify influential and/or poorly fit covariate patterns using individual based on residual</li>
</ul></li>
</ul>
</section>
<section id="diagnostic-statistics-computation-22" class="slide level2">
<h2>Diagnostic Statistics Computation (2/2)</h2>
<p>Consider a covariate pattern with <span class="math inline">\(m_j\)</span> subjects, all did not have event (some <span class="math inline">\(y_i = 0\)</span>). So the estimated logistic probability is <span class="math inline">\(\widehat\pi_j\)</span></p>
<ul>
<li><p>Pearson residual computed by individual <span class="math display">\[r_i=-\sqrt{\frac{{\hat{\pi}}_j}{(1-{\hat{\pi}}_j)}}\]</span></p></li>
<li><p>Pearson residual computed by covariate pattern <span class="math display">\[r_i=-\sqrt{m_j}\sqrt{\frac{{\hat{\pi}}_j}{(1-{\hat{\pi}}_j)}}\]</span></p></li>
<li><p><strong>Difference between aboveresiduals will be large if <span class="math inline">\(m_j\)</span> is large</strong>: usually a problem if less covariate patterns</p>
<ul>
<li>Residual from covariate pattern will identify poorly fit covariate patterns</li>
</ul></li>
</ul>
</section>
<section id="diagnostics-of-logistic-regression" class="slide level2">
<h2>Diagnostics of Logistic Regression</h2>
<ul>
<li><p>Model diagnostics of logistic regression can be assessed by checking how influential a covariate pattern is:</p>
<p>&nbsp;</p>
<ul>
<li><p>Look at <span style="color:#70AD47">change in residuals if a covariate pattern is excluded</span></p>
<ul>
<li>Standardized Pearson residual</li>
<li>Standardized Deviance residual</li>
</ul></li>
</ul>
<p>&nbsp;</p>
<ul>
<li>Look at <span style="color:#5B9BD5">change in coefficients if a covariate pattern is excluded</span></li>
</ul></li>
</ul>
</section>
<section id="change-of-standardized-residuals" class="slide level2">
<h2>Change of Standardized Residuals</h2>
<ul>
<li><p>Change in <strong>standardized Pearson Chi-square statistic</strong> due to deletion of subjects with covariate pattern <span class="math inline">\(x_j\)</span>: <span class="math display">\[\Delta X_j^2 = r_{sj}^2 = \dfrac{r_j^2}{1-h_j}\]</span></p></li>
<li><p><em>Don‚Äôt need to know this</em>: change in <strong>standardized deviance statistic</strong> due to deletion of subjects with covariate pattern <span class="math inline">\(x_j\)</span>: <span class="math display">\[\Delta D_j = \dfrac{d_j^2}{1-h_j}\]</span></p></li>
<li><p>Refer to <em>Lesson 12: Assessing Model Fit</em> for expression of Pearson residual</p></li>
</ul>
</section>
<section id="change-of-estimated-coefficients" class="slide level2">
<h2>Change of Estimated Coefficients</h2>
<ul>
<li>Change in estimated coefficients due to deletion of subjects with covariate pattern <span class="math inline">\(x_j\)</span>: <span class="math display">\[\Delta \widehat{\beta}_j = \dfrac{r_j^2 h_j}{(1-h_j)^2}\]</span></li>
</ul>
<p>&nbsp;</p>
<ul>
<li>This is the logistic regression analog of Cook‚Äôs influence statistic (in linear regression)</li>
</ul>
</section></section>
<section id="minute-break" class="title-slide slide level1 center">
<h1>10 minute break</h1>

</section>

<section>
<section id="learning-objectives-2" class="title-slide slide level1 center">
<h1>Learning Objectives</h1>
<ol type="1">
<li>Understand the components of calculations for logistic regression diagnostics</li>
</ol>
<div class="lob">
<ol start="2" type="1">
<li>Plot and determine observations where regression does not fit well or are influential using specific diagnostic values</li>
</ol>
</div>
</section>
<section id="visual-assessment-for-diagnostics-of-logistic-regression-i" class="slide level2">
<h2>Visual Assessment for Diagnostics of Logistic Regression (I)</h2>
<ul>
<li><p>In logistic regression, we mainly rely on graphical methods</p>
<ul>
<li>Because the distribution of diagnostic measures under null hypothesis (that the model fits) is only known in certain limited settings</li>
</ul></li>
</ul>
<p>&nbsp;</p>
<ul>
<li><p>Four plots for analysis of diagnostics in logistic regression:</p>
<ul>
<li><span class="math inline">\(\Delta X_j^2\)</span> vs.&nbsp;<span class="math inline">\({\hat{\pi}}_j\)</span></li>
<li><span class="math inline">\(\Delta D_j\)</span> vs.&nbsp;<span class="math inline">\({\hat{\pi}}_j\)</span></li>
<li><span class="math inline">\(\Delta\widehat{\beta}_j\)</span> vs.&nbsp;<span class="math inline">\({\hat{\pi}}_j\)</span></li>
<li><span class="math inline">\(h_j\)</span> vs.&nbsp;<span class="math inline">\({\hat{\pi}}_j\)</span></li>
</ul></li>
</ul>
</section>
<section id="recall-the-model-we-fit-glow-study-with-interactions" class="slide level2">
<h2>Recall the model we fit: GLOW Study with interactions</h2>
<ul>
<li><p><strong>Outcome variable:</strong> any fracture in the first year of follow up (FRACTURE: 0 or 1)</p></li>
<li><p><strong>Risk factor/variable of interest:</strong> history of prior fracture (PRIORFRAC: 0 or 1)</p></li>
<li><p><strong>Potential confounder or effect modifier:</strong> age (AGE, a continuous variable)</p></li>
<li><p>Fitted model with interactions: <span class="math display">\[\begin{aligned} \text{logit}\left(\widehat\pi(\mathbf{X})\right) &amp; = \widehat\beta_0 &amp;+ &amp;\widehat\beta_1\cdot I(\text{PF}) &amp; + &amp;\widehat\beta_2\cdot Age&amp; + &amp;\widehat\beta_3 \cdot I(\text{PF}) \cdot Age \\  
\text{logit}\left(\widehat\pi(\mathbf{X})\right) &amp; = -1.376 &amp;+ &amp;1.002\cdot I(\text{PF})&amp; + &amp;0.063\cdot Age&amp; -&amp;0.057 \cdot I(\text{PF}) \cdot Age
\end{aligned}\]</span></p></li>
</ul>
<p>&nbsp;</p>
<ul>
<li>Lesson 12: determined the overall fit of this model</li>
<li>Today: determine the if any observations/covariate patterns that model does not fit well</li>
</ul>
</section>
<section id="how-do-we-get-these-values-in-r" class="slide level2">
<h2>How do we get these values in R?</h2>
<ul>
<li><p>Nice function in the R script <code>Logistic_Dx_Functions.R</code></p>
<ul>
<li>Highly suggest you save this R script for future use!!</li>
</ul></li>
</ul>
<div class="cell">
<div class="sourceCode cell-code" id="cb1"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb1-1"><a href="#cb1-1"></a><span class="fu">source</span>(<span class="fu">here</span>(<span class="st">"lectures"</span>, <span class="st">"14_Model_diagnostics"</span>, <span class="st">"Logistic_Dx_Functions.R"</span>))</span>
<span id="cb1-2"><a href="#cb1-2"></a>dx_glow <span class="ot">=</span> <span class="fu">dx</span>(glow_m3)</span>
<span id="cb1-3"><a href="#cb1-3"></a><span class="fu">glimpse</span>(dx_glow)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>Rows: 71
Columns: 16
$ `(Intercept)`        &lt;dbl&gt; 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1‚Ä¶
$ priorfracYes         &lt;dbl&gt; 1, 0, 1, 0, 1, 0, 0, 1, 1, 0, 0, 0, 0, 0, 1, 0, 0‚Ä¶
$ age_c                &lt;dbl&gt; 1, -7, 7, -2, 10, 20, 1, -2, 2, 8, 18, -8, 11, 10‚Ä¶
$ `priorfracYes:age_c` &lt;dbl&gt; 1, 0, 7, 0, 10, 0, 0, -2, 2, 0, 0, 0, 0, 0, -3, 0‚Ä¶
$ y                    &lt;dbl&gt; 2, 2, 3, 2, 2, 1, 3, 3, 1, 5, 1, 3, 2, 1, 1, 4, 1‚Ä¶
$ P                    &lt;dbl&gt; 0.4088354, 0.1402159, 0.4162991, 0.1822879, 0.420‚Ä¶
$ n                    &lt;int&gt; 5, 15, 7, 10, 5, 2, 12, 8, 3, 15, 2, 18, 7, 4, 3,‚Ä¶
$ yhat                 &lt;dbl&gt; 2.0441770, 2.1032389, 2.9140936, 1.8228786, 2.100‚Ä¶
$ Pr                   &lt;dbl&gt; -0.04018670, -0.07677228, 0.06586860, 0.14507476,‚Ä¶
$ dr                   &lt;dbl&gt; -0.04023255, -0.07730975, 0.06577949, 0.14332786,‚Ä¶
$ h                    &lt;dbl&gt; 0.008844090, 0.003811004, 0.008725450, 0.00290085‚Ä¶
$ sPr                  &lt;dbl&gt; -0.04036559, -0.07691899, 0.06615786, 0.14528564,‚Ä¶
$ sdr                  &lt;dbl&gt; -0.04041165, -0.07745749, 0.06606836, 0.14353620,‚Ä¶
$ dChisq               &lt;dbl&gt; 0.001629381, 0.005916530, 0.004376863, 0.02110791‚Ä¶
$ dDev                 &lt;dbl&gt; 0.001633102, 0.005999662, 0.004365028, 0.02060264‚Ä¶
$ dBhat                &lt;dbl&gt; 1.453897e-05, 2.263418e-05, 3.852626e-05, 6.14091‚Ä¶</code></pre>
</div>
</div>
</section>
<section id="key-to-the-values" class="slide level2">
<h2>Key to the values</h2>
<div class="columns">
<div class="column">
<div class="cell">
<div class="sourceCode cell-code" id="cb3"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb3-1"><a href="#cb3-1"></a><span class="fu">colnames</span>(dx_glow)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code> [1] "(Intercept)"        "priorfracYes"       "age_c"             
 [4] "priorfracYes:age_c" "y"                  "P"                 
 [7] "n"                  "yhat"               "Pr"                
[10] "dr"                 "h"                  "sPr"               
[13] "sdr"                "dChisq"             "dDev"              
[16] "dBhat"             </code></pre>
</div>
</div>
</div><div class="column">
<p>For each covariate pattern (which is each row) ‚Ä¶</p>
<ul>
<li><code>y</code>: Number of events</li>
<li><code>P</code>: Estimated probability of events</li>
<li><code>n</code>: Number of observations</li>
<li><code>yhat</code>: Estimated number of events</li>
<li><code>Pr</code>: Pearson residual</li>
<li><code>dr</code>: Deviance</li>
<li><code>h</code>: leverage</li>
<li><code>sPr</code>: Standardized Pearson residual</li>
<li><code>sdr</code>: Standardized deviance</li>
<li><code>dChisq</code>: Change in standardized Pearson residual</li>
<li><code>dDev</code>: Change in standardized deviance</li>
<li><code>dBhat</code>: Change in coefficient estimates</li>
</ul>
</div>
</div>
</section>
<section id="poll-everywhere-question-3" class="slide level2">
<h2>Poll Everywhere Question 3</h2>
</section>
<section id="visual-assessment-for-diagnostics-of-logistic-regression" class="slide level2">
<h2>Visual Assessment for Diagnostics of Logistic Regression</h2>
<ul>
<li><p>The plots allow us to identify those covariate patterns that are‚Ä¶</p>
<ul>
<li><p>Poorly fit</p>
<ul>
<li>Large values of <span class="math inline">\(\Delta X_j^2\)</span> (and/or <span class="math inline">\(\Delta D_j\)</span> if we looked at those)</li>
</ul></li>
<li><p>Influential on estimated coefficients</p>
<ul>
<li>Large values of <span class="math inline">\(\Delta\widehat{\beta}_j\)</span></li>
</ul></li>
</ul></li>
<li><p>If you are interested to look at the contribution of leverage (‚Ñé_ùëó) to the values of the diagnostic statistic, you may also look at plots of:</p>
<ul>
<li><span class="math inline">\(\Delta X_j^2\)</span> vs.&nbsp;<span class="math inline">\({\hat{\pi}}_j\)</span></li>
<li><span class="math inline">\(\Delta D_j\)</span> vs.&nbsp;<span class="math inline">\({\hat{\pi}}_j\)</span></li>
<li><span class="math inline">\(\Delta\widehat{\beta}_j\)</span> vs.&nbsp;<span class="math inline">\({\hat{\pi}}_j\)</span></li>
</ul></li>
</ul>
</section>
<section id="glow-study-standardized-pearson-residuals" class="slide level2">
<h2>GLOW study: standardized Pearson residuals</h2>
<div class="columns">
<div class="column">
<ul>
<li><p>Generally, the points that curve from top left to bottom right of plot correspond to covariate patterns with <span class="math inline">\(y_j = 1\)</span></p>
<ul>
<li>Opposite corresponds to <span class="math inline">\(y_j = 0\)</span></li>
</ul></li>
</ul>
</div><div class="column">
<div class="cell">
<details>
<summary>To make the plot</summary>
<div class="sourceCode cell-code" id="cb5"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb5-1"><a href="#cb5-1"></a><span class="fu">ggplot</span>(dx_glow) <span class="sc">+</span> <span class="fu">geom_point</span>(<span class="fu">aes</span>(<span class="at">x=</span>P, <span class="at">y=</span>dChisq), <span class="at">size =</span> <span class="dv">3</span>) <span class="sc">+</span> </span>
<span id="cb5-2"><a href="#cb5-2"></a>  <span class="fu">xlab</span>(<span class="st">"Estimated/Predicted Probability of Fracture"</span>) <span class="sc">+</span></span>
<span id="cb5-3"><a href="#cb5-3"></a>  <span class="fu">ylab</span>(<span class="st">"Change in Std. Pearson Residual"</span>) <span class="sc">+</span></span>
<span id="cb5-4"><a href="#cb5-4"></a>  <span class="fu">theme</span>(<span class="at">text =</span> <span class="fu">element_text</span>(<span class="at">size =</span> <span class="dv">26</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output-display">
<p><img data-src="14_Model_diagnostics_files/figure-revealjs/unnamed-chunk-5-1.png" width="768"></p>
</div>
</div>
</div>
</div>
</section>
<section id="glow-study-standardized-pearson-residuals-1" class="slide level2">
<h2>GLOW study: standardized Pearson residuals</h2>
<div class="columns">
<div class="column">
<ul>
<li><p>Generally, the points that curve from top left to bottom right of plot correspond to covariate patterns with <span class="math inline">\(y_j = 1\)</span></p>
<ul>
<li>Opposite corresponds to <span class="math inline">\(y_j = 0\)</span></li>
</ul></li>
<li><p>Points in the top left or top right corners identify the covariate patterns that are poorly fit</p></li>
<li><p>We may use 4 as a crude approximation to the upper 95th percentile for <span class="math inline">\(\Delta X_j^2\)</span></p>
<ul>
<li>95th percentile of chi-squared distribution is 3.84</li>
</ul></li>
</ul>
</div><div class="column">
<div class="cell">
<details>
<summary>To make the plot</summary>
<div class="sourceCode cell-code" id="cb6"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb6-1"><a href="#cb6-1"></a><span class="fu">ggplot</span>(dx_glow) <span class="sc">+</span> <span class="fu">geom_point</span>(<span class="fu">aes</span>(<span class="at">x=</span>P, <span class="at">y=</span>dChisq), <span class="at">size =</span> <span class="dv">3</span>) <span class="sc">+</span> </span>
<span id="cb6-2"><a href="#cb6-2"></a>  <span class="fu">xlab</span>(<span class="st">"Estimated/Predicted Probability of Fracture"</span>) <span class="sc">+</span></span>
<span id="cb6-3"><a href="#cb6-3"></a>  <span class="fu">ylab</span>(<span class="st">"Change in Std. Pearson Residual"</span>) <span class="sc">+</span></span>
<span id="cb6-4"><a href="#cb6-4"></a>  <span class="fu">theme</span>(<span class="at">text =</span> <span class="fu">element_text</span>(<span class="at">size =</span> <span class="dv">26</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output-display">
<p><img data-src="14_Model_diagnostics_files/figure-revealjs/unnamed-chunk-6-1.png" width="768"></p>
</div>
</div>
</div>
</div>
</section>
<section id="glow-study-standardized-pearson-residuals-2" class="slide level2">
<h2>GLOW study: standardized Pearson residuals</h2>
<div class="columns">
<div class="column">
<ul>
<li><p>Generally, the points that curve from top left to bottom right of plot correspond to covariate patterns with <span class="math inline">\(y_j = 1\)</span></p>
<ul>
<li>Opposite corresponds to <span class="math inline">\(y_j = 0\)</span></li>
</ul></li>
<li><p>Points in the top left or top right corners identify the covariate patterns that are poorly fit</p></li>
<li><p>We may use 4 as a crude approximation to the upper 95th percentile for <span class="math inline">\(\Delta X_j^2\)</span></p>
<ul>
<li>95th percentile of chi-squared distribution is 3.84</li>
</ul></li>
<li><p>Which point is over 4?</p></li>
</ul>
<div class="cell">
<div class="sourceCode cell-code" id="cb7"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb7-1"><a href="#cb7-1"></a>dx_glow <span class="sc">%&gt;%</span> <span class="fu">filter</span>(dChisq <span class="sc">&gt;</span> <span class="dv">4</span>) <span class="sc">%&gt;%</span> <span class="fu">select</span>(priorfracYes, age_c, P, dChisq)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>   priorfracYes age_c         P   dChisq
          &lt;num&gt; &lt;num&gt;     &lt;num&gt;    &lt;num&gt;
1:            0    -4 0.1643855 4.413937</code></pre>
</div>
</div>
</div><div class="column">
<div class="cell">
<details>
<summary>To make the plot</summary>
<div class="sourceCode cell-code" id="cb9"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb9-1"><a href="#cb9-1"></a><span class="fu">ggplot</span>(dx_glow) <span class="sc">+</span> <span class="fu">geom_point</span>(<span class="fu">aes</span>(<span class="at">x=</span>P, <span class="at">y=</span>dChisq), <span class="at">size =</span> <span class="dv">3</span>) <span class="sc">+</span> </span>
<span id="cb9-2"><a href="#cb9-2"></a>  <span class="fu">xlab</span>(<span class="st">"Estimated/Predicted Probability of Fracture"</span>) <span class="sc">+</span></span>
<span id="cb9-3"><a href="#cb9-3"></a>  <span class="fu">ylab</span>(<span class="st">"Change in Std. Pearson Residual"</span>) <span class="sc">+</span></span>
<span id="cb9-4"><a href="#cb9-4"></a>  <span class="fu">theme</span>(<span class="at">text =</span> <span class="fu">element_text</span>(<span class="at">size =</span> <span class="dv">26</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output-display">
<p><img data-src="14_Model_diagnostics_files/figure-revealjs/unnamed-chunk-8-1.png" width="768"></p>
</div>
</div>
</div>
</div>
</section>
<section id="glow-study-standardized-deviance-residuals" class="slide level2">
<h2>GLOW study: standardized Deviance residuals</h2>
<div class="columns">
<div class="column">
<ul>
<li><p>Same investigation as Pearson residuals</p></li>
<li><p>Points in the top left or top right corners identify the covariate patterns that are poorly fit</p></li>
<li><p>Use 4 as a crude approximation to the upper 95th percentile</p></li>
<li><p>Which point is over 4?</p></li>
</ul>
<div class="cell">
<div class="sourceCode cell-code" id="cb10"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb10-1"><a href="#cb10-1"></a>dx_glow <span class="sc">%&gt;%</span> <span class="fu">filter</span>(dDev <span class="sc">&gt;</span> <span class="dv">4</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb10-2"><a href="#cb10-2"></a>  <span class="fu">select</span>(priorfracYes, age_c, P, dDev)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>   priorfracYes age_c         P     dDev
          &lt;num&gt; &lt;num&gt;     &lt;num&gt;    &lt;num&gt;
1:            0   -10 0.1190935 4.841217
2:            0     7 0.2812460 5.313540
3:            1     6 0.4150524 4.325664</code></pre>
</div>
</div>
</div><div class="column">
<div class="cell">
<details>
<summary>To make the plot</summary>
<div class="sourceCode cell-code" id="cb12"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb12-1"><a href="#cb12-1"></a><span class="fu">ggplot</span>(dx_glow) <span class="sc">+</span> <span class="fu">geom_point</span>(<span class="fu">aes</span>(<span class="at">x=</span>P, <span class="at">y=</span>dDev), <span class="at">size =</span> <span class="dv">3</span>) <span class="sc">+</span> </span>
<span id="cb12-2"><a href="#cb12-2"></a>  <span class="fu">xlab</span>(<span class="st">"Estimated/Predicted Probability of Fracture"</span>) <span class="sc">+</span></span>
<span id="cb12-3"><a href="#cb12-3"></a>  <span class="fu">ylab</span>(<span class="st">"Change in Std. Deviance Residual"</span>) <span class="sc">+</span></span>
<span id="cb12-4"><a href="#cb12-4"></a>  <span class="fu">theme</span>(<span class="at">text =</span> <span class="fu">element_text</span>(<span class="at">size =</span> <span class="dv">26</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output-display">
<p><img data-src="14_Model_diagnostics_files/figure-revealjs/unnamed-chunk-10-1.png" width="768"></p>
</div>
</div>
</div>
</div>
</section>
<section id="glow-study-change-in-coefficient-estimates" class="slide level2">
<h2>GLOW Study: Change in coefficient estimates</h2>
<div class="columns">
<div class="column">
<ul>
<li><p>Book recommends flagging certain covariate patterns if change in coefficient estimates are greater than 1</p></li>
<li><p>All values of <span class="math inline">\(\Delta\widehat{\beta}_j\)</span> are below 0.09</p></li>
</ul>
<div class="cell">
<div class="sourceCode cell-code" id="cb13"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb13-1"><a href="#cb13-1"></a>dx_glow <span class="sc">%&gt;%</span> <span class="fu">filter</span>(dBhat <span class="sc">&gt;</span> <span class="fl">0.075</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb13-2"><a href="#cb13-2"></a>  <span class="fu">select</span>(priorfracYes, age_c, P, dBhat)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>   priorfracYes age_c         P      dBhat
          &lt;num&gt; &lt;num&gt;     &lt;num&gt;      &lt;num&gt;
1:            1    20 0.4325984 0.08926472</code></pre>
</div>
</div>
</div><div class="column">
<div class="cell">
<details>
<summary>To make the plot</summary>
<div class="sourceCode cell-code" id="cb15"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb15-1"><a href="#cb15-1"></a><span class="fu">ggplot</span>(dx_glow) <span class="sc">+</span> <span class="fu">geom_point</span>(<span class="fu">aes</span>(<span class="at">x=</span>P, <span class="at">y=</span>dBhat), <span class="at">size =</span> <span class="dv">3</span>) <span class="sc">+</span> </span>
<span id="cb15-2"><a href="#cb15-2"></a>  <span class="fu">xlab</span>(<span class="st">"Estimated/Predicted Probability of Fracture"</span>) <span class="sc">+</span></span>
<span id="cb15-3"><a href="#cb15-3"></a>  <span class="fu">ylab</span>(<span class="st">"Change in Coefficient Estimates"</span>) <span class="sc">+</span></span>
<span id="cb15-4"><a href="#cb15-4"></a>  <span class="fu">theme</span>(<span class="at">text =</span> <span class="fu">element_text</span>(<span class="at">size =</span> <span class="dv">26</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output-display">
<p><img data-src="14_Model_diagnostics_files/figure-revealjs/unnamed-chunk-12-1.png" width="768"></p>
</div>
</div>
</div>
</div>
</section>
<section id="glow-study-leverage" class="slide level2">
<h2>GLOW Study: Leverage</h2>
<div class="columns">
<div class="column">
<ul>
<li><p>We can use the same rule as linear regression: <span class="math inline">\(h_j &gt; 3p/n\)</span></p>
<ul>
<li>Flag these points as high leverage</li>
</ul></li>
<li><p>Points with high leverage</p>
<ul>
<li><span class="math inline">\(p=4\)</span>: four regression coefficients</li>
<li><span class="math inline">\(n=500\)</span>: 500 total observations</li>
<li>Look for <span class="math inline">\(h_j &gt; 3p/n = 3\cdot4 /500 = 0.024\)</span></li>
</ul></li>
</ul>
<div class="cell">
<div class="sourceCode cell-code" id="cb16"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb16-1"><a href="#cb16-1"></a>dx_glow <span class="sc">%&gt;%</span> <span class="fu">filter</span>(h <span class="sc">&gt;</span> <span class="dv">3</span><span class="sc">*</span><span class="dv">4</span><span class="sc">/</span><span class="dv">500</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb16-2"><a href="#cb16-2"></a>  <span class="fu">select</span>(priorfracYes, age_c, P, h) <span class="sc">%&gt;%</span> </span>
<span id="cb16-3"><a href="#cb16-3"></a>  <span class="fu">head</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>   priorfracYes age_c         P          h
          &lt;num&gt; &lt;num&gt;     &lt;num&gt;      &lt;num&gt;
1:            0    20 0.4686423 0.02688958
2:            1   -12 0.3928116 0.03186122
3:            0    19 0.4531105 0.02451738
4:            1   -11 0.3940365 0.02900675
5:            1    19 0.4313389 0.02895824
6:            1    18 0.4300804 0.02621708</code></pre>
</div>
</div>
</div><div class="column">
<div class="cell">
<details>
<summary>To make the plot</summary>
<div class="sourceCode cell-code" id="cb18"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb18-1"><a href="#cb18-1"></a><span class="fu">ggplot</span>(dx_glow) <span class="sc">+</span> <span class="fu">geom_point</span>(<span class="fu">aes</span>(<span class="at">x=</span>P, <span class="at">y=</span>h), <span class="at">size=</span><span class="dv">3</span>) <span class="sc">+</span> </span>
<span id="cb18-2"><a href="#cb18-2"></a>  <span class="fu">xlab</span>(<span class="st">"Estimated/Predicted Probability of Fracture"</span>) <span class="sc">+</span></span>
<span id="cb18-3"><a href="#cb18-3"></a>  <span class="fu">ylab</span>(<span class="st">"Leverage"</span>) <span class="sc">+</span></span>
<span id="cb18-4"><a href="#cb18-4"></a>  <span class="fu">theme</span>(<span class="at">text =</span> <span class="fu">element_text</span>(<span class="at">size =</span> <span class="dv">26</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output-display">
<p><img data-src="14_Model_diagnostics_files/figure-revealjs/unnamed-chunk-14-1.png" width="768"></p>
</div>
</div>
</div>
</div>
</section>
<section id="find-out-the-influential-observation-from-the-data-set" class="slide level2">
<h2>Find Out the ‚ÄúInfluential‚Äù Observation From the Data Set</h2>
<div class="columns">
<div class="column" style="width:30%;">
<ul>
<li>We identified covariate patterns that may be poorly fit or influential</li>
</ul>
<p>&nbsp;</p>
<ul>
<li>Let‚Äôs identify the covariate patterns that were not fit well</li>
</ul>
</div><div class="column" style="width:70%;">
<div class="cell">
<div class="sourceCode cell-code" id="cb19"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb19-1"><a href="#cb19-1"></a>dx_glow <span class="sc">%&gt;%</span> <span class="fu">mutate</span>(<span class="at">Cov_patt =</span> <span class="dv">1</span><span class="sc">:</span><span class="fu">nrow</span>(.)) <span class="sc">%&gt;%</span></span>
<span id="cb19-2"><a href="#cb19-2"></a>  <span class="fu">filter</span>(dChisq <span class="sc">&gt;</span> <span class="dv">4</span> <span class="sc">|</span> dDev <span class="sc">&gt;</span> <span class="dv">4</span> <span class="sc">|</span> dBhat <span class="sc">&gt;</span> <span class="dv">1</span> <span class="sc">|</span> </span>
<span id="cb19-3"><a href="#cb19-3"></a>          h <span class="sc">&gt;</span> <span class="dv">3</span><span class="sc">*</span><span class="dv">4</span><span class="sc">/</span><span class="dv">500</span>) <span class="sc">%&gt;%</span></span>
<span id="cb19-4"><a href="#cb19-4"></a>  <span class="fu">select</span>(Cov_patt, y, P, h, dChisq, dDev, dBhat, h) <span class="sc">%&gt;%</span></span>
<span id="cb19-5"><a href="#cb19-5"></a>  <span class="fu">round</span>(., <span class="dv">3</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>    Cov_patt     y     P     h dChisq  dDev dBhat
       &lt;num&gt; &lt;num&gt; &lt;num&gt; &lt;num&gt;  &lt;num&gt; &lt;num&gt; &lt;num&gt;
 1:        6     1 0.469 0.027  0.008 0.008 0.000
 2:       22     1 0.393 0.032  0.046 0.047 0.002
 3:       36     1 0.453 0.025  0.178 0.183 0.004
 4:       43     0 0.119 0.005  2.581 4.841 0.012
 5:       45     6 0.164 0.003  4.414 3.554 0.014
 6:       47     0 0.281 0.006  3.148 5.314 0.018
 7:       48     0 0.394 0.029  0.670 1.032 0.020
 8:       49     2 0.431 0.029  0.698 0.693 0.021
 9:       50     0 0.430 0.026  0.775 1.155 0.021
10:       53     0 0.415 0.008  2.862 4.326 0.024
11:       57     2 0.395 0.026  0.949 0.924 0.026
12:       63     0 0.484 0.029  0.967 1.364 0.029
13:       69     0 0.434 0.035  1.588 2.358 0.058
14:       70     1 0.392 0.035  1.610 1.943 0.058
15:       71     2 0.433 0.032  2.710 3.462 0.089</code></pre>
</div>
</div>
</div>
</div>
</section>
<section id="after-identifying-points" class="slide level2">
<h2>After identifying points</h2>
<ul>
<li><p>Do a data quality check</p>
<ul>
<li>Unless you have a very good reason to believe the data are not measured correctly, then we leave it in</li>
<li>Common to do nothing</li>
</ul></li>
</ul>
<p>&nbsp;</p>
<ul>
<li><p>If only a few covariate pattern does not fit well (<span class="math inline">\(y_j\)</span> differs from <span class="math inline">\(m_j\widehat\pi_j\)</span> ), we are not too worried</p>
<ul>
<li>We had 15 out of 71 covariate patterns</li>
</ul></li>
</ul>
<p>&nbsp;</p>
<ul>
<li><p>If quite a few covariate patterns do not fit well, potential reasons can be considered:</p>
<ul>
<li><p>The link used in logistic regression model is not appropriate for outcome</p>
<ul>
<li>This is usually unlikely, since logistic regression model is very flexible (think back to why we transformed our outcome from binary form)</li>
</ul></li>
<li><p>One or more important covariates missing in the model</p>
<ul>
<li>At least one of the covariates in the model has been entered in the wrong scale (think age-squared vs.&nbsp;age)</li>
</ul></li>
</ul></li>
</ul>
</section>
<section id="how-would-i-report-this-combining-all-model-assessment" class="slide level2">
<h2>How would I report this? (Combining all model assessment)</h2>
<ul>
<li>Assuming I have not checked other final models (no other models to compare AIC/BIC or AUC with)</li>
</ul>
<p><strong>Methods:</strong> To assess the overall model fit, we calculated the AUC-ROC. We also calculated several model diagnostics including standardized Pearson residual, standardized deviance, change in coefficient estimates, and leverage. We identified covariate patterns with high standardized Pearson residual (greater than 4), standardized deviance (greater than 4), change in coefficient estimates (greater than 1), and leverage (greater than 0.024).</p>
<p>&nbsp;</p>
<p><strong>Results:</strong> Our final logistic regression model consisted of the outcome, fracture, and predictors including prior fracture, age, and their interaction. The AUC-ROC was 0.68. We identified 11 covariate patterns with high leverage and 4 with high standardized Pearson residual, standardized deviance, or change in coefficient estimates. No identified observations were omitted.</p>
<p>&nbsp;</p>
<p><strong>Discussion:</strong></p>
<ul>
<li><p>AUC-ROC low: Included covariates were pre-determined</p></li>
<li><p>Influential points were kept in because all observations were within feasible range of the predictors and outcome. (we could try age-sqaured and see if that helps AUC and/or diagnostics)</p></li>
</ul>

<div class="footer footer-default">
<p>Lesson 14: Model Diagnostics</p>
</div>
</section></section>
    </div>
  </div>

  <script>window.backupDefine = window.define; window.define = undefined;</script>
  <script src="../../site_libs/revealjs/dist/reveal.js"></script>
  <!-- reveal.js plugins -->
  <script src="../../site_libs/revealjs/plugin/quarto-line-highlight/line-highlight.js"></script>
  <script src="../../site_libs/revealjs/plugin/pdf-export/pdfexport.js"></script>
  <script src="../../site_libs/revealjs/plugin/reveal-menu/menu.js"></script>
  <script src="../../site_libs/revealjs/plugin/reveal-menu/quarto-menu.js"></script>
  <script src="../../site_libs/revealjs/plugin/reveal-chalkboard/plugin.js"></script>
  <script src="../../site_libs/revealjs/plugin/quarto-support/support.js"></script>
  

  <script src="../../site_libs/revealjs/plugin/notes/notes.js"></script>
  <script src="../../site_libs/revealjs/plugin/search/search.js"></script>
  <script src="../../site_libs/revealjs/plugin/zoom/zoom.js"></script>
  <script src="../../site_libs/revealjs/plugin/math/math.js"></script>
  <script>window.define = window.backupDefine; window.backupDefine = undefined;</script>

  <script>

      // Full list of configuration options available at:
      // https://revealjs.com/config/
      Reveal.initialize({
'controlsAuto': true,
'previewLinksAuto': false,
'smaller': false,
'pdfSeparateFragments': false,
'autoAnimateEasing': "ease",
'autoAnimateDuration': 1,
'autoAnimateUnmatched': true,
'menu': {"side":"left","useTextContentForMissingTitles":true,"markers":false,"loadIcons":false,"custom":[{"title":"Tools","icon":"<i class=\"fas fa-gear\"></i>","content":"<ul class=\"slide-menu-items\">\n<li class=\"slide-tool-item active\" data-item=\"0\"><a href=\"#\" onclick=\"RevealMenuToolHandlers.fullscreen(event)\"><kbd>f</kbd> Fullscreen</a></li>\n<li class=\"slide-tool-item\" data-item=\"1\"><a href=\"#\" onclick=\"RevealMenuToolHandlers.speakerMode(event)\"><kbd>s</kbd> Speaker View</a></li>\n<li class=\"slide-tool-item\" data-item=\"2\"><a href=\"#\" onclick=\"RevealMenuToolHandlers.overview(event)\"><kbd>o</kbd> Slide Overview</a></li>\n<li class=\"slide-tool-item\" data-item=\"3\"><a href=\"#\" onclick=\"RevealMenuToolHandlers.togglePdfExport(event)\"><kbd>e</kbd> PDF Export Mode</a></li>\n<li class=\"slide-tool-item\" data-item=\"4\"><a href=\"#\" onclick=\"RevealMenuToolHandlers.toggleChalkboard(event)\"><kbd>b</kbd> Toggle Chalkboard</a></li>\n<li class=\"slide-tool-item\" data-item=\"5\"><a href=\"#\" onclick=\"RevealMenuToolHandlers.toggleNotesCanvas(event)\"><kbd>c</kbd> Toggle Notes Canvas</a></li>\n<li class=\"slide-tool-item\" data-item=\"6\"><a href=\"#\" onclick=\"RevealMenuToolHandlers.downloadDrawings(event)\"><kbd>d</kbd> Download Drawings</a></li>\n<li class=\"slide-tool-item\" data-item=\"7\"><a href=\"#\" onclick=\"RevealMenuToolHandlers.keyboardHelp(event)\"><kbd>?</kbd> Keyboard Help</a></li>\n</ul>"}],"openButton":true},
'chalkboard': {"buttons":true},
'smaller': false,
 
        // Display controls in the bottom right corner
        controls: false,

        // Help the user learn the controls by providing hints, for example by
        // bouncing the down arrow when they first encounter a vertical slide
        controlsTutorial: false,

        // Determines where controls appear, "edges" or "bottom-right"
        controlsLayout: 'edges',

        // Visibility rule for backwards navigation arrows; "faded", "hidden"
        // or "visible"
        controlsBackArrows: 'faded',

        // Display a presentation progress bar
        progress: true,

        // Display the page number of the current slide
        slideNumber: 'c/t',

        // 'all', 'print', or 'speaker'
        showSlideNumber: 'all',

        // Add the current slide number to the URL hash so that reloading the
        // page/copying the URL will return you to the same slide
        hash: true,

        // Start with 1 for the hash rather than 0
        hashOneBasedIndex: false,

        // Flags if we should monitor the hash and change slides accordingly
        respondToHashChanges: true,

        // Push each slide change to the browser history
        history: true,

        // Enable keyboard shortcuts for navigation
        keyboard: true,

        // Enable the slide overview mode
        overview: true,

        // Disables the default reveal.js slide layout (scaling and centering)
        // so that you can use custom CSS layout
        disableLayout: false,

        // Vertical centering of slides
        center: false,

        // Enables touch navigation on devices with touch input
        touch: true,

        // Loop the presentation
        loop: false,

        // Change the presentation direction to be RTL
        rtl: false,

        // see https://revealjs.com/vertical-slides/#navigation-mode
        navigationMode: 'linear',

        // Randomizes the order of slides each time the presentation loads
        shuffle: false,

        // Turns fragments on and off globally
        fragments: true,

        // Flags whether to include the current fragment in the URL,
        // so that reloading brings you to the same fragment position
        fragmentInURL: false,

        // Flags if the presentation is running in an embedded mode,
        // i.e. contained within a limited portion of the screen
        embedded: false,

        // Flags if we should show a help overlay when the questionmark
        // key is pressed
        help: true,

        // Flags if it should be possible to pause the presentation (blackout)
        pause: true,

        // Flags if speaker notes should be visible to all viewers
        showNotes: false,

        // Global override for autoplaying embedded media (null/true/false)
        autoPlayMedia: null,

        // Global override for preloading lazy-loaded iframes (null/true/false)
        preloadIframes: null,

        // Number of milliseconds between automatically proceeding to the
        // next slide, disabled when set to 0, this value can be overwritten
        // by using a data-autoslide attribute on your slides
        autoSlide: 0,

        // Stop auto-sliding after user input
        autoSlideStoppable: true,

        // Use this method for navigation when auto-sliding
        autoSlideMethod: null,

        // Specify the average time in seconds that you think you will spend
        // presenting each slide. This is used to show a pacing timer in the
        // speaker view
        defaultTiming: null,

        // Enable slide navigation via mouse wheel
        mouseWheel: false,

        // The display mode that will be used to show slides
        display: 'block',

        // Hide cursor if inactive
        hideInactiveCursor: true,

        // Time before the cursor is hidden (in ms)
        hideCursorTime: 5000,

        // Opens links in an iframe preview overlay
        previewLinks: false,

        // Transition style (none/fade/slide/convex/concave/zoom)
        transition: 'none',

        // Transition speed (default/fast/slow)
        transitionSpeed: 'default',

        // Transition style for full page slide backgrounds
        // (none/fade/slide/convex/concave/zoom)
        backgroundTransition: 'none',

        // Number of slides away from the current that are visible
        viewDistance: 3,

        // Number of slides away from the current that are visible on mobile
        // devices. It is advisable to set this to a lower number than
        // viewDistance in order to save resources.
        mobileViewDistance: 2,

        // The "normal" size of the presentation, aspect ratio will be preserved
        // when the presentation is scaled to fit different resolutions. Can be
        // specified using percentage units.
        width: 1955,

        height: 1100,

        // Factor of the display size that should remain empty around the content
        margin: 0.1,

        math: {
          mathjax: 'https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-chtml-full.js',
          config: 'TeX-AMS_HTML-full',
          tex2jax: {
            inlineMath: [['\\(','\\)']],
            displayMath: [['\\[','\\]']],
            balanceBraces: true,
            processEscapes: false,
            processRefs: true,
            processEnvironments: true,
            preview: 'TeX',
            skipTags: ['script','noscript','style','textarea','pre','code'],
            ignoreClass: 'tex2jax_ignore',
            processClass: 'tex2jax_process'
          },
        },

        // reveal.js plugins
        plugins: [QuartoLineHighlight, PdfExport, RevealMenu, RevealChalkboard, QuartoSupport,

          RevealMath,
          RevealNotes,
          RevealSearch,
          RevealZoom
        ]
      });
    </script>
    
    <script>
      // htmlwidgets need to know to resize themselves when slides are shown/hidden.
      // Fire the "slideenter" event (handled by htmlwidgets.js) when the current
      // slide changes (different for each slide format).
      (function () {
        // dispatch for htmlwidgets
        function fireSlideEnter() {
          const event = window.document.createEvent("Event");
          event.initEvent("slideenter", true, true);
          window.document.dispatchEvent(event);
        }

        function fireSlideChanged(previousSlide, currentSlide) {
          fireSlideEnter();

          // dispatch for shiny
          if (window.jQuery) {
            if (previousSlide) {
              window.jQuery(previousSlide).trigger("hidden");
            }
            if (currentSlide) {
              window.jQuery(currentSlide).trigger("shown");
            }
          }
        }

        // hookup for slidy
        if (window.w3c_slidy) {
          window.w3c_slidy.add_observer(function (slide_num) {
            // slide_num starts at position 1
            fireSlideChanged(null, w3c_slidy.slides[slide_num - 1]);
          });
        }

      })();
    </script>

    <script id="quarto-html-after-body" type="application/javascript">
    window.document.addEventListener("DOMContentLoaded", function (event) {
      const toggleBodyColorMode = (bsSheetEl) => {
        const mode = bsSheetEl.getAttribute("data-mode");
        const bodyEl = window.document.querySelector("body");
        if (mode === "dark") {
          bodyEl.classList.add("quarto-dark");
          bodyEl.classList.remove("quarto-light");
        } else {
          bodyEl.classList.add("quarto-light");
          bodyEl.classList.remove("quarto-dark");
        }
      }
      const toggleBodyColorPrimary = () => {
        const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
        if (bsSheetEl) {
          toggleBodyColorMode(bsSheetEl);
        }
      }
      toggleBodyColorPrimary();  
      const tabsets =  window.document.querySelectorAll(".panel-tabset-tabby")
      tabsets.forEach(function(tabset) {
        const tabby = new Tabby('#' + tabset.id);
      });
      const isCodeAnnotation = (el) => {
        for (const clz of el.classList) {
          if (clz.startsWith('code-annotation-')) {                     
            return true;
          }
        }
        return false;
      }
      const clipboard = new window.ClipboardJS('.code-copy-button', {
        text: function(trigger) {
          const codeEl = trigger.previousElementSibling.cloneNode(true);
          for (const childEl of codeEl.children) {
            if (isCodeAnnotation(childEl)) {
              childEl.remove();
            }
          }
          return codeEl.innerText;
        }
      });
      clipboard.on('success', function(e) {
        // button target
        const button = e.trigger;
        // don't keep focus
        button.blur();
        // flash "checked"
        button.classList.add('code-copy-button-checked');
        var currentTitle = button.getAttribute("title");
        button.setAttribute("title", "Copied!");
        let tooltip;
        if (window.bootstrap) {
          button.setAttribute("data-bs-toggle", "tooltip");
          button.setAttribute("data-bs-placement", "left");
          button.setAttribute("data-bs-title", "Copied!");
          tooltip = new bootstrap.Tooltip(button, 
            { trigger: "manual", 
              customClass: "code-copy-button-tooltip",
              offset: [0, -8]});
          tooltip.show();    
        }
        setTimeout(function() {
          if (tooltip) {
            tooltip.hide();
            button.removeAttribute("data-bs-title");
            button.removeAttribute("data-bs-toggle");
            button.removeAttribute("data-bs-placement");
          }
          button.setAttribute("title", currentTitle);
          button.classList.remove('code-copy-button-checked');
        }, 1000);
        // clear code selection
        e.clearSelection();
      });
      function tippyHover(el, contentFn) {
        const config = {
          allowHTML: true,
          content: contentFn,
          maxWidth: 500,
          delay: 100,
          arrow: false,
          appendTo: function(el) {
              return el.closest('section.slide') || el.parentElement;
          },
          interactive: true,
          interactiveBorder: 10,
          theme: 'light-border',
          placement: 'bottom-start'
        };
          config['offset'] = [0,0];
          config['maxWidth'] = 700;
        window.tippy(el, config); 
      }
      const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
      for (var i=0; i<noterefs.length; i++) {
        const ref = noterefs[i];
        tippyHover(ref, function() {
          // use id or data attribute instead here
          let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
          try { href = new URL(href).hash; } catch {}
          const id = href.replace(/^#\/?/, "");
          const note = window.document.getElementById(id);
          return note.innerHTML;
        });
      }
      const findCites = (el) => {
        const parentEl = el.parentElement;
        if (parentEl) {
          const cites = parentEl.dataset.cites;
          if (cites) {
            return {
              el,
              cites: cites.split(' ')
            };
          } else {
            return findCites(el.parentElement)
          }
        } else {
          return undefined;
        }
      };
      var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
      for (var i=0; i<bibliorefs.length; i++) {
        const ref = bibliorefs[i];
        const citeInfo = findCites(ref);
        if (citeInfo) {
          tippyHover(citeInfo.el, function() {
            var popup = window.document.createElement('div');
            citeInfo.cites.forEach(function(cite) {
              var citeDiv = window.document.createElement('div');
              citeDiv.classList.add('hanging-indent');
              citeDiv.classList.add('csl-entry');
              var biblioDiv = window.document.getElementById('ref-' + cite);
              if (biblioDiv) {
                citeDiv.innerHTML = biblioDiv.innerHTML;
              }
              popup.appendChild(citeDiv);
            });
            return popup.innerHTML;
          });
        }
      }
    });
    </script>
    

</body></html>